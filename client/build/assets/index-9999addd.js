function xx(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _x(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var ag={exports:{}},$a={},lg={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=Symbol.for("react.element"),bx=Symbol.for("react.portal"),kx=Symbol.for("react.fragment"),jx=Symbol.for("react.strict_mode"),Ex=Symbol.for("react.profiler"),Cx=Symbol.for("react.provider"),Px=Symbol.for("react.context"),Tx=Symbol.for("react.forward_ref"),Nx=Symbol.for("react.suspense"),Rx=Symbol.for("react.memo"),Ax=Symbol.for("react.lazy"),Qh=Symbol.iterator;function Ox(t){return t===null||typeof t!="object"?null:(t=Qh&&t[Qh]||t["@@iterator"],typeof t=="function"?t:null)}var cg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ug=Object.assign,dg={};function _s(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||cg}_s.prototype.isReactComponent={};_s.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_s.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hg(){}hg.prototype=_s.prototype;function od(t,e,n){this.props=t,this.context=e,this.refs=dg,this.updater=n||cg}var ad=od.prototype=new hg;ad.constructor=od;ug(ad,_s.prototype);ad.isPureReactComponent=!0;var Yh=Array.isArray,fg=Object.prototype.hasOwnProperty,ld={current:null},pg={key:!0,ref:!0,__self:!0,__source:!0};function mg(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fg.call(e,r)&&!pg.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Mi,type:t,key:i,ref:o,props:s,_owner:ld.current}}function Lx(t,e){return{$$typeof:Mi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mi}function Ix(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xh=/\/+/g;function Nl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ix(""+t.key):e.toString(36)}function Oo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Mi:case bx:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Nl(o,0):r,Yh(s)?(n="",t!=null&&(n=t.replace(Xh,"$&/")+"/"),Oo(s,e,n,"",function(u){return u})):s!=null&&(cd(s)&&(s=Lx(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xh,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yh(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Nl(i,a);o+=Oo(i,e,n,l,s)}else if(l=Ox(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Nl(i,a++),o+=Oo(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function no(t,e,n){if(t==null)return t;var r=[],s=0;return Oo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Dx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},Lo={transition:null},Ux={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:Lo,ReactCurrentOwner:ld};function gg(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:no,forEach:function(t,e,n){no(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return no(t,function(){e++}),e},toArray:function(t){return no(t,function(e){return e})||[]},only:function(t){if(!cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=_s;Z.Fragment=kx;Z.Profiler=Ex;Z.PureComponent=od;Z.StrictMode=jx;Z.Suspense=Nx;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ux;Z.act=gg;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ug({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ld.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fg.call(e,l)&&!pg.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Mi,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:Px,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Cx,_context:t},t.Consumer=t};Z.createElement=mg;Z.createFactory=function(t){var e=mg.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:Tx,render:t}};Z.isValidElement=cd;Z.lazy=function(t){return{$$typeof:Ax,_payload:{_status:-1,_result:t},_init:Dx}};Z.memo=function(t,e){return{$$typeof:Rx,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=Lo.transition;Lo.transition={};try{t()}finally{Lo.transition=e}};Z.unstable_act=gg;Z.useCallback=function(t,e){return st.current.useCallback(t,e)};Z.useContext=function(t){return st.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return st.current.useDeferredValue(t)};Z.useEffect=function(t,e){return st.current.useEffect(t,e)};Z.useId=function(){return st.current.useId()};Z.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return st.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};Z.useRef=function(t){return st.current.useRef(t)};Z.useState=function(t){return st.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return st.current.useTransition()};Z.version="18.3.1";lg.exports=Z;var w=lg.exports;const ud=Sx(w),Fx=xx({__proto__:null,default:ud},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx=w,$x=Symbol.for("react.element"),Mx=Symbol.for("react.fragment"),Vx=Object.prototype.hasOwnProperty,zx=Bx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hx={key:!0,ref:!0,__self:!0,__source:!0};function yg(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Vx.call(e,r)&&!Hx.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$x,type:t,key:i,ref:o,props:s,_owner:zx.current}}$a.Fragment=Mx;$a.jsx=yg;$a.jsxs=yg;ag.exports=$a;var c=ag.exports,Nc={},vg={exports:{}},St={},wg={exports:{}},xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,M){var V=L.length;L.push(M);e:for(;0<V;){var $=V-1>>>1,G=L[$];if(0<s(G,M))L[$]=M,L[V]=G,V=$;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var M=L[0],V=L.pop();if(V!==M){L[0]=V;e:for(var $=0,G=L.length,Le=G>>>1;$<Le;){var ie=2*($+1)-1,He=L[ie],B=ie+1,K=L[B];if(0>s(He,V))B<G&&0>s(K,He)?(L[$]=K,L[B]=V,$=B):(L[$]=He,L[ie]=V,$=ie);else if(B<G&&0>s(K,V))L[$]=K,L[B]=V,$=B;else break e}}return M}function s(L,M){var V=L.sortIndex-M.sortIndex;return V!==0?V:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,g=!1,m=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(L){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=L)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function _(L){if(v=!1,p(L),!m)if(n(l)!==null)m=!0,U(b);else{var M=n(u);M!==null&&W(_,M.startTime-L)}}function b(L,M){m=!1,v&&(v=!1,x(E),E=-1),g=!0;var V=f;try{for(p(M),h=n(l);h!==null&&(!(h.expirationTime>M)||L&&!A());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var G=$(h.expirationTime<=M);M=t.unstable_now(),typeof G=="function"?h.callback=G:h===n(l)&&r(l),p(M)}else r(l);h=n(l)}if(h!==null)var Le=!0;else{var ie=n(u);ie!==null&&W(_,ie.startTime-M),Le=!1}return Le}finally{h=null,f=V,g=!1}}var k=!1,C=null,E=-1,O=5,T=-1;function A(){return!(t.unstable_now()-T<O)}function j(){if(C!==null){var L=t.unstable_now();T=L;var M=!0;try{M=C(!0,L)}finally{M?N():(k=!1,C=null)}}else k=!1}var N;if(typeof y=="function")N=function(){y(j)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=j,N=function(){F.postMessage(null)}}else N=function(){S(j,0)};function U(L){C=L,k||(k=!0,N())}function W(L,M){E=S(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,U(b))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var V=f;f=M;try{return L()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=f;f=L;try{return M()}finally{f=V}},t.unstable_scheduleCallback=function(L,M,V){var $=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?$+V:$):V=$,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,L={id:d++,callback:M,priorityLevel:L,startTime:V,expirationTime:G,sortIndex:-1},V>$?(L.sortIndex=V,e(u,L),n(l)===null&&L===n(u)&&(v?(x(E),E=-1):v=!0,W(_,V-$))):(L.sortIndex=G,e(l,L),m||g||(m=!0,U(b))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var M=f;return function(){var V=f;f=M;try{return L.apply(this,arguments)}finally{f=V}}}})(xg);wg.exports=xg;var Wx=wg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=w,wt=Wx;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sg=new Set,vi={};function Tr(t,e){ds(t,e),ds(t+"Capture",e)}function ds(t,e){for(vi[t]=e,t=0;t<e.length;t++)Sg.add(e[t])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rc=Object.prototype.hasOwnProperty,Gx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zh={},ef={};function Kx(t){return Rc.call(ef,t)?!0:Rc.call(Zh,t)?!1:Gx.test(t)?ef[t]=!0:(Zh[t]=!0,!1)}function Jx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Qx(t,e,n,r){if(e===null||typeof e>"u"||Jx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ze[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ze[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ze[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ze[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ze[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ze[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ze[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ze[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ze[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var dd=/[\-:]([a-z])/g;function hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dd,hd);ze[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dd,hd);ze[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dd,hd);ze[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ze[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});ze.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ze[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function fd(t,e,n,r){var s=ze.hasOwnProperty(e)?ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Qx(e,n,s,r)&&(n=null),r||s===null?Kx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xn=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ro=Symbol.for("react.element"),$r=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),Ac=Symbol.for("react.profiler"),_g=Symbol.for("react.provider"),bg=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),Oc=Symbol.for("react.suspense"),Lc=Symbol.for("react.suspense_list"),gd=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),kg=Symbol.for("react.offscreen"),tf=Symbol.iterator;function Is(t){return t===null||typeof t!="object"?null:(t=tf&&t[tf]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Rl;function Js(t){if(Rl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var Al=!1;function Ol(t,e){if(!t||Al)return"";Al=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Al=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Js(t):""}function Yx(t){switch(t.tag){case 5:return Js(t.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return t=Ol(t.type,!1),t;case 11:return t=Ol(t.type.render,!1),t;case 1:return t=Ol(t.type,!0),t;default:return""}}function Ic(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Mr:return"Fragment";case $r:return"Portal";case Ac:return"Profiler";case pd:return"StrictMode";case Oc:return"Suspense";case Lc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bg:return(t.displayName||"Context")+".Consumer";case _g:return(t._context.displayName||"Context")+".Provider";case md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gd:return e=t.displayName||null,e!==null?e:Ic(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return Ic(t(e))}catch{}}return null}function Xx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ic(e);case 8:return e===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zx(t){var e=jg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function so(t){t._valueTracker||(t._valueTracker=Zx(t))}function Eg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function na(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dc(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cg(t,e){e=e.checked,e!=null&&fd(t,"checked",e,!1)}function Uc(t,e){Cg(t,e);var n=Gn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fc(t,e.type,Gn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fc(t,e,n){(e!=="number"||na(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qs=Array.isArray;function rs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Qs(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gn(n)}}function Pg(t,e){var n=Gn(e.value),r=Gn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function of(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var io,Ng=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(io=io||document.createElement("div"),io.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=io.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ni={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eS=["Webkit","ms","Moz","O"];Object.keys(ni).forEach(function(t){eS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ni[e]=ni[t]})});function Rg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ni.hasOwnProperty(t)&&ni[t]?(""+e).trim():e+"px"}function Ag(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Rg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tS=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mc(t,e){if(e){if(tS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Vc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zc=null;function yd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hc=null,ss=null,is=null;function af(t){if(t=Hi(t)){if(typeof Hc!="function")throw Error(D(280));var e=t.stateNode;e&&(e=Wa(e),Hc(t.stateNode,t.type,e))}}function Og(t){ss?is?is.push(t):is=[t]:ss=t}function Lg(){if(ss){var t=ss,e=is;if(is=ss=null,af(t),e)for(t=0;t<e.length;t++)af(e[t])}}function Ig(t,e){return t(e)}function Dg(){}var Ll=!1;function Ug(t,e,n){if(Ll)return t(e,n);Ll=!0;try{return Ig(t,e,n)}finally{Ll=!1,(ss!==null||is!==null)&&(Dg(),Lg())}}function xi(t,e){var n=t.stateNode;if(n===null)return null;var r=Wa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Wc=!1;if(mn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Wc=!1}function nS(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ri=!1,ra=null,sa=!1,qc=null,rS={onError:function(t){ri=!0,ra=t}};function sS(t,e,n,r,s,i,o,a,l){ri=!1,ra=null,nS.apply(rS,arguments)}function iS(t,e,n,r,s,i,o,a,l){if(sS.apply(this,arguments),ri){if(ri){var u=ra;ri=!1,ra=null}else throw Error(D(198));sa||(sa=!0,qc=u)}}function Nr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lf(t){if(Nr(t)!==t)throw Error(D(188))}function oS(t){var e=t.alternate;if(!e){if(e=Nr(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lf(s),t;if(i===r)return lf(s),e;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Bg(t){return t=oS(t),t!==null?$g(t):null}function $g(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$g(t);if(e!==null)return e;t=t.sibling}return null}var Mg=wt.unstable_scheduleCallback,cf=wt.unstable_cancelCallback,aS=wt.unstable_shouldYield,lS=wt.unstable_requestPaint,ke=wt.unstable_now,cS=wt.unstable_getCurrentPriorityLevel,vd=wt.unstable_ImmediatePriority,Vg=wt.unstable_UserBlockingPriority,ia=wt.unstable_NormalPriority,uS=wt.unstable_LowPriority,zg=wt.unstable_IdlePriority,Ma=null,Xt=null;function dS(t){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Ma,t,void 0,(t.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:pS,hS=Math.log,fS=Math.LN2;function pS(t){return t>>>=0,t===0?32:31-(hS(t)/fS|0)|0}var oo=64,ao=4194304;function Ys(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function oa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ys(a):(i&=o,i!==0&&(r=Ys(i)))}else o=n&~s,o!==0?r=Ys(o):i!==0&&(r=Ys(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zt(e),s=1<<n,r|=t[n],e&=~s;return r}function mS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zt(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=mS(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Gc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hg(){var t=oo;return oo<<=1,!(oo&4194240)&&(oo=64),t}function Il(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zt(e),t[e]=n}function yS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function wd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var re=0;function Wg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qg,xd,Gg,Kg,Jg,Kc=!1,lo=[],In=null,Dn=null,Un=null,Si=new Map,_i=new Map,Tn=[],vS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uf(t,e){switch(t){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_i.delete(e.pointerId)}}function Us(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Hi(e),e!==null&&xd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wS(t,e,n,r,s){switch(e){case"focusin":return In=Us(In,t,e,n,r,s),!0;case"dragenter":return Dn=Us(Dn,t,e,n,r,s),!0;case"mouseover":return Un=Us(Un,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Si.set(i,Us(Si.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_i.set(i,Us(_i.get(i)||null,t,e,n,r,s)),!0}return!1}function Qg(t){var e=gr(t.target);if(e!==null){var n=Nr(e);if(n!==null){if(e=n.tag,e===13){if(e=Fg(n),e!==null){t.blockedOn=e,Jg(t.priority,function(){Gg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Io(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Jc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zc=r,n.target.dispatchEvent(r),zc=null}else return e=Hi(n),e!==null&&xd(e),t.blockedOn=n,!1;e.shift()}return!0}function df(t,e,n){Io(t)&&n.delete(e)}function xS(){Kc=!1,In!==null&&Io(In)&&(In=null),Dn!==null&&Io(Dn)&&(Dn=null),Un!==null&&Io(Un)&&(Un=null),Si.forEach(df),_i.forEach(df)}function Fs(t,e){t.blockedOn===e&&(t.blockedOn=null,Kc||(Kc=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,xS)))}function bi(t){function e(s){return Fs(s,t)}if(0<lo.length){Fs(lo[0],t);for(var n=1;n<lo.length;n++){var r=lo[n];r.blockedOn===t&&(r.blockedOn=null)}}for(In!==null&&Fs(In,t),Dn!==null&&Fs(Dn,t),Un!==null&&Fs(Un,t),Si.forEach(e),_i.forEach(e),n=0;n<Tn.length;n++)r=Tn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tn.length&&(n=Tn[0],n.blockedOn===null);)Qg(n),n.blockedOn===null&&Tn.shift()}var os=xn.ReactCurrentBatchConfig,aa=!0;function SS(t,e,n,r){var s=re,i=os.transition;os.transition=null;try{re=1,Sd(t,e,n,r)}finally{re=s,os.transition=i}}function _S(t,e,n,r){var s=re,i=os.transition;os.transition=null;try{re=4,Sd(t,e,n,r)}finally{re=s,os.transition=i}}function Sd(t,e,n,r){if(aa){var s=Jc(t,e,n,r);if(s===null)Wl(t,e,r,la,n),uf(t,r);else if(wS(s,t,e,n,r))r.stopPropagation();else if(uf(t,r),e&4&&-1<vS.indexOf(t)){for(;s!==null;){var i=Hi(s);if(i!==null&&qg(i),i=Jc(t,e,n,r),i===null&&Wl(t,e,r,la,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wl(t,e,r,null,n)}}var la=null;function Jc(t,e,n,r){if(la=null,t=yd(r),t=gr(t),t!==null)if(e=Nr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return la=t,null}function Yg(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cS()){case vd:return 1;case Vg:return 4;case ia:case uS:return 16;case zg:return 536870912;default:return 16}default:return 16}}var An=null,_d=null,Do=null;function Xg(){if(Do)return Do;var t,e=_d,n=e.length,r,s="value"in An?An.value:An.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Do=s.slice(t,1<r?1-r:void 0)}function Uo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function co(){return!0}function hf(){return!1}function _t(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?co:hf,this.isPropagationStopped=hf,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),e}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=_t(bs),zi=we({},bs,{view:0,detail:0}),bS=_t(zi),Dl,Ul,Bs,Va=we({},zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bs&&(Bs&&t.type==="mousemove"?(Dl=t.screenX-Bs.screenX,Ul=t.screenY-Bs.screenY):Ul=Dl=0,Bs=t),Dl)},movementY:function(t){return"movementY"in t?t.movementY:Ul}}),ff=_t(Va),kS=we({},Va,{dataTransfer:0}),jS=_t(kS),ES=we({},zi,{relatedTarget:0}),Fl=_t(ES),CS=we({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),PS=_t(CS),TS=we({},bs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NS=_t(TS),RS=we({},bs,{data:0}),pf=_t(RS),AS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LS[t])?!!e[t]:!1}function kd(){return IS}var DS=we({},zi,{key:function(t){if(t.key){var e=AS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(t){return t.type==="keypress"?Uo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),US=_t(DS),FS=we({},Va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mf=_t(FS),BS=we({},zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),$S=_t(BS),MS=we({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),VS=_t(MS),zS=we({},Va,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HS=_t(zS),WS=[9,13,27,32],jd=mn&&"CompositionEvent"in window,si=null;mn&&"documentMode"in document&&(si=document.documentMode);var qS=mn&&"TextEvent"in window&&!si,Zg=mn&&(!jd||si&&8<si&&11>=si),gf=String.fromCharCode(32),yf=!1;function ey(t,e){switch(t){case"keyup":return WS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function GS(t,e){switch(t){case"compositionend":return ty(e);case"keypress":return e.which!==32?null:(yf=!0,gf);case"textInput":return t=e.data,t===gf&&yf?null:t;default:return null}}function KS(t,e){if(Vr)return t==="compositionend"||!jd&&ey(t,e)?(t=Xg(),Do=_d=An=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Zg&&e.locale!=="ko"?null:e.data;default:return null}}var JS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JS[t.type]:e==="textarea"}function ny(t,e,n,r){Og(r),e=ca(e,"onChange"),0<e.length&&(n=new bd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ii=null,ki=null;function QS(t){fy(t,0)}function za(t){var e=Wr(t);if(Eg(e))return t}function YS(t,e){if(t==="change")return e}var ry=!1;if(mn){var Bl;if(mn){var $l="oninput"in document;if(!$l){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),$l=typeof wf.oninput=="function"}Bl=$l}else Bl=!1;ry=Bl&&(!document.documentMode||9<document.documentMode)}function xf(){ii&&(ii.detachEvent("onpropertychange",sy),ki=ii=null)}function sy(t){if(t.propertyName==="value"&&za(ki)){var e=[];ny(e,ki,t,yd(t)),Ug(QS,e)}}function XS(t,e,n){t==="focusin"?(xf(),ii=e,ki=n,ii.attachEvent("onpropertychange",sy)):t==="focusout"&&xf()}function ZS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return za(ki)}function e_(t,e){if(t==="click")return za(e)}function t_(t,e){if(t==="input"||t==="change")return za(e)}function n_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qt=typeof Object.is=="function"?Object.is:n_;function ji(t,e){if(qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rc.call(e,s)||!qt(t[s],e[s]))return!1}return!0}function Sf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _f(t,e){var n=Sf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sf(n)}}function iy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oy(){for(var t=window,e=na();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=na(t.document)}return e}function Ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function r_(t){var e=oy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&iy(n.ownerDocument.documentElement,n)){if(r!==null&&Ed(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=_f(n,i);var o=_f(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s_=mn&&"documentMode"in document&&11>=document.documentMode,zr=null,Qc=null,oi=null,Yc=!1;function bf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yc||zr==null||zr!==na(r)||(r=zr,"selectionStart"in r&&Ed(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oi&&ji(oi,r)||(oi=r,r=ca(Qc,"onSelect"),0<r.length&&(e=new bd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zr)))}function uo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hr={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},Ml={},ay={};mn&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function Ha(t){if(Ml[t])return Ml[t];if(!Hr[t])return t;var e=Hr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ay)return Ml[t]=e[n];return t}var ly=Ha("animationend"),cy=Ha("animationiteration"),uy=Ha("animationstart"),dy=Ha("transitionend"),hy=new Map,kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(t,e){hy.set(t,e),Tr(e,[t])}for(var Vl=0;Vl<kf.length;Vl++){var zl=kf[Vl],i_=zl.toLowerCase(),o_=zl[0].toUpperCase()+zl.slice(1);Yn(i_,"on"+o_)}Yn(ly,"onAnimationEnd");Yn(cy,"onAnimationIteration");Yn(uy,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(dy,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function jf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iS(r,e,void 0,t),t.currentTarget=null}function fy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;jf(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;jf(s,a,u),i=l}}}if(sa)throw t=qc,sa=!1,qc=null,t}function de(t,e){var n=e[nu];n===void 0&&(n=e[nu]=new Set);var r=t+"__bubble";n.has(r)||(py(e,t,2,!1),n.add(r))}function Hl(t,e,n){var r=0;e&&(r|=4),py(n,t,r,e)}var ho="_reactListening"+Math.random().toString(36).slice(2);function Ei(t){if(!t[ho]){t[ho]=!0,Sg.forEach(function(n){n!=="selectionchange"&&(a_.has(n)||Hl(n,!1,t),Hl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ho]||(e[ho]=!0,Hl("selectionchange",!1,e))}}function py(t,e,n,r){switch(Yg(e)){case 1:var s=SS;break;case 4:s=_S;break;default:s=Sd}n=s.bind(null,e,n,t),s=void 0,!Wc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wl(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=gr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ug(function(){var u=i,d=yd(n),h=[];e:{var f=hy.get(t);if(f!==void 0){var g=bd,m=t;switch(t){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":g=US;break;case"focusin":m="focus",g=Fl;break;case"focusout":m="blur",g=Fl;break;case"beforeblur":case"afterblur":g=Fl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ff;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$S;break;case ly:case cy:case uy:g=PS;break;case dy:g=VS;break;case"scroll":g=bS;break;case"wheel":g=HS;break;case"copy":case"cut":case"paste":g=NS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mf}var v=(e&4)!==0,S=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var y=u,p;y!==null;){p=y;var _=p.stateNode;if(p.tag===5&&_!==null&&(p=_,x!==null&&(_=xi(y,x),_!=null&&v.push(Ci(y,_,p)))),S)break;y=y.return}0<v.length&&(f=new g(f,m,null,n,d),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==zc&&(m=n.relatedTarget||n.fromElement)&&(gr(m)||m[gn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=n.relatedTarget||n.toElement,g=u,m=m?gr(m):null,m!==null&&(S=Nr(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(v=ff,_="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=mf,_="onPointerLeave",x="onPointerEnter",y="pointer"),S=g==null?f:Wr(g),p=m==null?f:Wr(m),f=new v(_,y+"leave",g,n,d),f.target=S,f.relatedTarget=p,_=null,gr(d)===u&&(v=new v(x,y+"enter",m,n,d),v.target=p,v.relatedTarget=S,_=v),S=_,g&&m)t:{for(v=g,x=m,y=0,p=v;p;p=Lr(p))y++;for(p=0,_=x;_;_=Lr(_))p++;for(;0<y-p;)v=Lr(v),y--;for(;0<p-y;)x=Lr(x),p--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=Lr(v),x=Lr(x)}v=null}else v=null;g!==null&&Ef(h,f,g,v,!1),m!==null&&S!==null&&Ef(h,S,m,v,!0)}}e:{if(f=u?Wr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var b=YS;else if(vf(f))if(ry)b=t_;else{b=ZS;var k=XS}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=e_);if(b&&(b=b(t,u))){ny(h,b,n,d);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Fc(f,"number",f.value)}switch(k=u?Wr(u):window,t){case"focusin":(vf(k)||k.contentEditable==="true")&&(zr=k,Qc=u,oi=null);break;case"focusout":oi=Qc=zr=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,bf(h,n,d);break;case"selectionchange":if(s_)break;case"keydown":case"keyup":bf(h,n,d)}var C;if(jd)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Vr?ey(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Zg&&n.locale!=="ko"&&(Vr||E!=="onCompositionStart"?E==="onCompositionEnd"&&Vr&&(C=Xg()):(An=d,_d="value"in An?An.value:An.textContent,Vr=!0)),k=ca(u,E),0<k.length&&(E=new pf(E,t,null,n,d),h.push({event:E,listeners:k}),C?E.data=C:(C=ty(n),C!==null&&(E.data=C)))),(C=qS?GS(t,n):KS(t,n))&&(u=ca(u,"onBeforeInput"),0<u.length&&(d=new pf("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}fy(h,e)})}function Ci(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ca(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xi(t,n),i!=null&&r.unshift(Ci(t,i,s)),i=xi(t,e),i!=null&&r.push(Ci(t,i,s))),t=t.return}return r}function Lr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ef(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=xi(n,i),l!=null&&o.unshift(Ci(n,l,a))):s||(l=xi(n,i),l!=null&&o.push(Ci(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var l_=/\r\n?/g,c_=/\u0000|\uFFFD/g;function Cf(t){return(typeof t=="string"?t:""+t).replace(l_,`
`).replace(c_,"")}function fo(t,e,n){if(e=Cf(e),Cf(t)!==e&&n)throw Error(D(425))}function ua(){}var Xc=null,Zc=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,Pf=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof Pf<"u"?function(t){return Pf.resolve(null).then(t).catch(h_)}:tu;function h_(t){setTimeout(function(){throw t})}function ql(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),bi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bi(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ks=Math.random().toString(36).slice(2),Yt="__reactFiber$"+ks,Pi="__reactProps$"+ks,gn="__reactContainer$"+ks,nu="__reactEvents$"+ks,f_="__reactListeners$"+ks,p_="__reactHandles$"+ks;function gr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tf(t);t!==null;){if(n=t[Yt])return n;t=Tf(t)}return e}t=n,n=t.parentNode}return null}function Hi(t){return t=t[Yt]||t[gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function Wa(t){return t[Pi]||null}var ru=[],qr=-1;function Xn(t){return{current:t}}function he(t){0>qr||(t.current=ru[qr],ru[qr]=null,qr--)}function le(t,e){qr++,ru[qr]=t.current,t.current=e}var Kn={},Xe=Xn(Kn),ut=Xn(!1),br=Kn;function hs(t,e){var n=t.type.contextTypes;if(!n)return Kn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dt(t){return t=t.childContextTypes,t!=null}function da(){he(ut),he(Xe)}function Nf(t,e,n){if(Xe.current!==Kn)throw Error(D(168));le(Xe,e),le(ut,n)}function my(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(D(108,Xx(t)||"Unknown",s));return we({},n,r)}function ha(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kn,br=Xe.current,le(Xe,t),le(ut,ut.current),!0}function Rf(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=my(t,e,br),r.__reactInternalMemoizedMergedChildContext=t,he(ut),he(Xe),le(Xe,t)):he(ut),le(ut,n)}var ln=null,qa=!1,Gl=!1;function gy(t){ln===null?ln=[t]:ln.push(t)}function m_(t){qa=!0,gy(t)}function Zn(){if(!Gl&&ln!==null){Gl=!0;var t=0,e=re;try{var n=ln;for(re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ln=null,qa=!1}catch(s){throw ln!==null&&(ln=ln.slice(t+1)),Mg(vd,Zn),s}finally{re=e,Gl=!1}}return null}var Gr=[],Kr=0,fa=null,pa=0,jt=[],Et=0,kr=null,cn=1,un="";function cr(t,e){Gr[Kr++]=pa,Gr[Kr++]=fa,fa=t,pa=e}function yy(t,e,n){jt[Et++]=cn,jt[Et++]=un,jt[Et++]=kr,kr=t;var r=cn;t=un;var s=32-zt(r)-1;r&=~(1<<s),n+=1;var i=32-zt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,cn=1<<32-zt(e)+s|n<<s|r,un=i+t}else cn=1<<i|n<<s|r,un=t}function Cd(t){t.return!==null&&(cr(t,1),yy(t,1,0))}function Pd(t){for(;t===fa;)fa=Gr[--Kr],Gr[Kr]=null,pa=Gr[--Kr],Gr[Kr]=null;for(;t===kr;)kr=jt[--Et],jt[Et]=null,un=jt[--Et],jt[Et]=null,cn=jt[--Et],jt[Et]=null}var vt=null,yt=null,fe=!1,Vt=null;function vy(t,e){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Af(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vt=t,yt=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vt=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:cn,overflow:un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vt=t,yt=null,!0):!1;default:return!1}}function su(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(fe){var e=yt;if(e){var n=e;if(!Af(t,e)){if(su(t))throw Error(D(418));e=Fn(n.nextSibling);var r=vt;e&&Af(t,e)?vy(r,n):(t.flags=t.flags&-4097|2,fe=!1,vt=t)}}else{if(su(t))throw Error(D(418));t.flags=t.flags&-4097|2,fe=!1,vt=t}}}function Of(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vt=t}function po(t){if(t!==vt)return!1;if(!fe)return Of(t),fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=yt)){if(su(t))throw wy(),Error(D(418));for(;e;)vy(t,e),e=Fn(e.nextSibling)}if(Of(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=Fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=vt?Fn(t.stateNode.nextSibling):null;return!0}function wy(){for(var t=yt;t;)t=Fn(t.nextSibling)}function fs(){yt=vt=null,fe=!1}function Td(t){Vt===null?Vt=[t]:Vt.push(t)}var g_=xn.ReactCurrentBatchConfig;function $s(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function mo(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lf(t){var e=t._init;return e(t._payload)}function xy(t){function e(x,y){if(t){var p=x.deletions;p===null?(x.deletions=[y],x.flags|=16):p.push(y)}}function n(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=Vn(x,y),x.index=0,x.sibling=null,x}function i(x,y,p){return x.index=p,t?(p=x.alternate,p!==null?(p=p.index,p<y?(x.flags|=2,y):p):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,y,p,_){return y===null||y.tag!==6?(y=ec(p,x.mode,_),y.return=x,y):(y=s(y,p),y.return=x,y)}function l(x,y,p,_){var b=p.type;return b===Mr?d(x,y,p.props.children,_,p.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===jn&&Lf(b)===y.type)?(_=s(y,p.props),_.ref=$s(x,y,p),_.return=x,_):(_=Ho(p.type,p.key,p.props,null,x.mode,_),_.ref=$s(x,y,p),_.return=x,_)}function u(x,y,p,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==p.containerInfo||y.stateNode.implementation!==p.implementation?(y=tc(p,x.mode,_),y.return=x,y):(y=s(y,p.children||[]),y.return=x,y)}function d(x,y,p,_,b){return y===null||y.tag!==7?(y=_r(p,x.mode,_,b),y.return=x,y):(y=s(y,p),y.return=x,y)}function h(x,y,p){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ec(""+y,x.mode,p),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ro:return p=Ho(y.type,y.key,y.props,null,x.mode,p),p.ref=$s(x,null,y),p.return=x,p;case $r:return y=tc(y,x.mode,p),y.return=x,y;case jn:var _=y._init;return h(x,_(y._payload),p)}if(Qs(y)||Is(y))return y=_r(y,x.mode,p,null),y.return=x,y;mo(x,y)}return null}function f(x,y,p,_){var b=y!==null?y.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:a(x,y,""+p,_);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ro:return p.key===b?l(x,y,p,_):null;case $r:return p.key===b?u(x,y,p,_):null;case jn:return b=p._init,f(x,y,b(p._payload),_)}if(Qs(p)||Is(p))return b!==null?null:d(x,y,p,_,null);mo(x,p)}return null}function g(x,y,p,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(p)||null,a(y,x,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ro:return x=x.get(_.key===null?p:_.key)||null,l(y,x,_,b);case $r:return x=x.get(_.key===null?p:_.key)||null,u(y,x,_,b);case jn:var k=_._init;return g(x,y,p,k(_._payload),b)}if(Qs(_)||Is(_))return x=x.get(p)||null,d(y,x,_,b,null);mo(y,_)}return null}function m(x,y,p,_){for(var b=null,k=null,C=y,E=y=0,O=null;C!==null&&E<p.length;E++){C.index>E?(O=C,C=null):O=C.sibling;var T=f(x,C,p[E],_);if(T===null){C===null&&(C=O);break}t&&C&&T.alternate===null&&e(x,C),y=i(T,y,E),k===null?b=T:k.sibling=T,k=T,C=O}if(E===p.length)return n(x,C),fe&&cr(x,E),b;if(C===null){for(;E<p.length;E++)C=h(x,p[E],_),C!==null&&(y=i(C,y,E),k===null?b=C:k.sibling=C,k=C);return fe&&cr(x,E),b}for(C=r(x,C);E<p.length;E++)O=g(C,x,E,p[E],_),O!==null&&(t&&O.alternate!==null&&C.delete(O.key===null?E:O.key),y=i(O,y,E),k===null?b=O:k.sibling=O,k=O);return t&&C.forEach(function(A){return e(x,A)}),fe&&cr(x,E),b}function v(x,y,p,_){var b=Is(p);if(typeof b!="function")throw Error(D(150));if(p=b.call(p),p==null)throw Error(D(151));for(var k=b=null,C=y,E=y=0,O=null,T=p.next();C!==null&&!T.done;E++,T=p.next()){C.index>E?(O=C,C=null):O=C.sibling;var A=f(x,C,T.value,_);if(A===null){C===null&&(C=O);break}t&&C&&A.alternate===null&&e(x,C),y=i(A,y,E),k===null?b=A:k.sibling=A,k=A,C=O}if(T.done)return n(x,C),fe&&cr(x,E),b;if(C===null){for(;!T.done;E++,T=p.next())T=h(x,T.value,_),T!==null&&(y=i(T,y,E),k===null?b=T:k.sibling=T,k=T);return fe&&cr(x,E),b}for(C=r(x,C);!T.done;E++,T=p.next())T=g(C,x,E,T.value,_),T!==null&&(t&&T.alternate!==null&&C.delete(T.key===null?E:T.key),y=i(T,y,E),k===null?b=T:k.sibling=T,k=T);return t&&C.forEach(function(j){return e(x,j)}),fe&&cr(x,E),b}function S(x,y,p,_){if(typeof p=="object"&&p!==null&&p.type===Mr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case ro:e:{for(var b=p.key,k=y;k!==null;){if(k.key===b){if(b=p.type,b===Mr){if(k.tag===7){n(x,k.sibling),y=s(k,p.props.children),y.return=x,x=y;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===jn&&Lf(b)===k.type){n(x,k.sibling),y=s(k,p.props),y.ref=$s(x,k,p),y.return=x,x=y;break e}n(x,k);break}else e(x,k);k=k.sibling}p.type===Mr?(y=_r(p.props.children,x.mode,_,p.key),y.return=x,x=y):(_=Ho(p.type,p.key,p.props,null,x.mode,_),_.ref=$s(x,y,p),_.return=x,x=_)}return o(x);case $r:e:{for(k=p.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===p.containerInfo&&y.stateNode.implementation===p.implementation){n(x,y.sibling),y=s(y,p.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else e(x,y);y=y.sibling}y=tc(p,x.mode,_),y.return=x,x=y}return o(x);case jn:return k=p._init,S(x,y,k(p._payload),_)}if(Qs(p))return m(x,y,p,_);if(Is(p))return v(x,y,p,_);mo(x,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,y!==null&&y.tag===6?(n(x,y.sibling),y=s(y,p),y.return=x,x=y):(n(x,y),y=ec(p,x.mode,_),y.return=x,x=y),o(x)):n(x,y)}return S}var ps=xy(!0),Sy=xy(!1),ma=Xn(null),ga=null,Jr=null,Nd=null;function Rd(){Nd=Jr=ga=null}function Ad(t){var e=ma.current;he(ma),t._currentValue=e}function ou(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function as(t,e){ga=t,Nd=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ct=!0),t.firstContext=null)}function Rt(t){var e=t._currentValue;if(Nd!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(ga===null)throw Error(D(308));Jr=t,ga.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var yr=null;function Od(t){yr===null?yr=[t]:yr.push(t)}function _y(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Od(e)):(n.next=s.next,s.next=n),e.interleaved=n,yn(t,r)}function yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var En=!1;function Ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function by(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,yn(t,n)}return s=r.interleaved,s===null?(e.next=e,Od(r)):(e.next=s.next,s.next=e),r.interleaved=e,yn(t,n)}function Fo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wd(t,n)}}function If(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ya(t,e,n,r){var s=t.updateQueue;En=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(f=e,g=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(g,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(g,h,f):m,f==null)break e;h=we({},h,f);break e;case 2:En=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Er|=o,t.lanes=o,t.memoizedState=h}}function Df(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Wi={},Zt=Xn(Wi),Ti=Xn(Wi),Ni=Xn(Wi);function vr(t){if(t===Wi)throw Error(D(174));return t}function Id(t,e){switch(le(Ni,e),le(Ti,t),le(Zt,Wi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}he(Zt),le(Zt,e)}function ms(){he(Zt),he(Ti),he(Ni)}function ky(t){vr(Ni.current);var e=vr(Zt.current),n=$c(e,t.type);e!==n&&(le(Ti,t),le(Zt,n))}function Dd(t){Ti.current===t&&(he(Zt),he(Ti))}var ge=Xn(0);function va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kl=[];function Ud(){for(var t=0;t<Kl.length;t++)Kl[t]._workInProgressVersionPrimary=null;Kl.length=0}var Bo=xn.ReactCurrentDispatcher,Jl=xn.ReactCurrentBatchConfig,jr=0,ve=null,Ae=null,Ue=null,wa=!1,ai=!1,Ri=0,y_=0;function qe(){throw Error(D(321))}function Fd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qt(t[n],e[n]))return!1;return!0}function Bd(t,e,n,r,s,i){if(jr=i,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bo.current=t===null||t.memoizedState===null?S_:__,t=n(r,s),ai){i=0;do{if(ai=!1,Ri=0,25<=i)throw Error(D(301));i+=1,Ue=Ae=null,e.updateQueue=null,Bo.current=b_,t=n(r,s)}while(ai)}if(Bo.current=xa,e=Ae!==null&&Ae.next!==null,jr=0,Ue=Ae=ve=null,wa=!1,e)throw Error(D(300));return t}function $d(){var t=Ri!==0;return Ri=0,t}function Qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?ve.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function At(){if(Ae===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Ue===null?ve.memoizedState:Ue.next;if(e!==null)Ue=e,Ae=t;else{if(t===null)throw Error(D(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Ue===null?ve.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function Ai(t,e){return typeof e=="function"?e(t):e}function Ql(t){var e=At(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Ae,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((jr&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ve.lanes|=d,Er|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,qt(r,e.memoizedState)||(ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ve.lanes|=i,Er|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yl(t){var e=At(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qt(i,e.memoizedState)||(ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jy(){}function Ey(t,e){var n=ve,r=At(),s=e(),i=!qt(r.memoizedState,s);if(i&&(r.memoizedState=s,ct=!0),r=r.queue,Md(Ty.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Oi(9,Py.bind(null,n,r,s,e),void 0,null),Fe===null)throw Error(D(349));jr&30||Cy(n,e,s)}return s}function Cy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Py(t,e,n,r){e.value=n,e.getSnapshot=r,Ny(e)&&Ry(t)}function Ty(t,e,n){return n(function(){Ny(e)&&Ry(t)})}function Ny(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qt(t,n)}catch{return!0}}function Ry(t){var e=yn(t,1);e!==null&&Ht(e,t,1,-1)}function Uf(t){var e=Qt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},e.queue=t,t=t.dispatch=x_.bind(null,ve,t),[e.memoizedState,t]}function Oi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ay(){return At().memoizedState}function $o(t,e,n,r){var s=Qt();ve.flags|=t,s.memoizedState=Oi(1|e,n,void 0,r===void 0?null:r)}function Ga(t,e,n,r){var s=At();r=r===void 0?null:r;var i=void 0;if(Ae!==null){var o=Ae.memoizedState;if(i=o.destroy,r!==null&&Fd(r,o.deps)){s.memoizedState=Oi(e,n,i,r);return}}ve.flags|=t,s.memoizedState=Oi(1|e,n,i,r)}function Ff(t,e){return $o(8390656,8,t,e)}function Md(t,e){return Ga(2048,8,t,e)}function Oy(t,e){return Ga(4,2,t,e)}function Ly(t,e){return Ga(4,4,t,e)}function Iy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dy(t,e,n){return n=n!=null?n.concat([t]):null,Ga(4,4,Iy.bind(null,e,t),n)}function Vd(){}function Uy(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fy(t,e){var n=At();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function By(t,e,n){return jr&21?(qt(n,e)||(n=Hg(),ve.lanes|=n,Er|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=n)}function v_(t,e){var n=re;re=n!==0&&4>n?n:4,t(!0);var r=Jl.transition;Jl.transition={};try{t(!1),e()}finally{re=n,Jl.transition=r}}function $y(){return At().memoizedState}function w_(t,e,n){var r=Mn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},My(t))Vy(e,n);else if(n=_y(t,e,n,r),n!==null){var s=rt();Ht(n,t,r,s),zy(n,e,r)}}function x_(t,e,n){var r=Mn(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(My(t))Vy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qt(a,o)){var l=e.interleaved;l===null?(s.next=s,Od(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=_y(t,e,s,r),n!==null&&(s=rt(),Ht(n,t,r,s),zy(n,e,r))}}function My(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function Vy(t,e){ai=wa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wd(t,n)}}var xa={readContext:Rt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},S_={readContext:Rt,useCallback:function(t,e){return Qt().memoizedState=[t,e===void 0?null:e],t},useContext:Rt,useEffect:Ff,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$o(4194308,4,Iy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $o(4194308,4,t,e)},useInsertionEffect:function(t,e){return $o(4,2,t,e)},useMemo:function(t,e){var n=Qt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=w_.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=Qt();return t={current:t},e.memoizedState=t},useState:Uf,useDebugValue:Vd,useDeferredValue:function(t){return Qt().memoizedState=t},useTransition:function(){var t=Uf(!1),e=t[0];return t=v_.bind(null,t[1]),Qt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,s=Qt();if(fe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Fe===null)throw Error(D(349));jr&30||Cy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Ff(Ty.bind(null,r,i,t),[t]),r.flags|=2048,Oi(9,Py.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Qt(),e=Fe.identifierPrefix;if(fe){var n=un,r=cn;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=y_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},__={readContext:Rt,useCallback:Uy,useContext:Rt,useEffect:Md,useImperativeHandle:Dy,useInsertionEffect:Oy,useLayoutEffect:Ly,useMemo:Fy,useReducer:Ql,useRef:Ay,useState:function(){return Ql(Ai)},useDebugValue:Vd,useDeferredValue:function(t){var e=At();return By(e,Ae.memoizedState,t)},useTransition:function(){var t=Ql(Ai)[0],e=At().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ey,useId:$y,unstable_isNewReconciler:!1},b_={readContext:Rt,useCallback:Uy,useContext:Rt,useEffect:Md,useImperativeHandle:Dy,useInsertionEffect:Oy,useLayoutEffect:Ly,useMemo:Fy,useReducer:Yl,useRef:Ay,useState:function(){return Yl(Ai)},useDebugValue:Vd,useDeferredValue:function(t){var e=At();return Ae===null?e.memoizedState=t:By(e,Ae.memoizedState,t)},useTransition:function(){var t=Yl(Ai)[0],e=At().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ey,useId:$y,unstable_isNewReconciler:!1};function Ft(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function au(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ka={isMounted:function(t){return(t=t._reactInternals)?Nr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rt(),s=Mn(t),i=hn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bn(t,i,s),e!==null&&(Ht(e,t,s,r),Fo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rt(),s=Mn(t),i=hn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bn(t,i,s),e!==null&&(Ht(e,t,s,r),Fo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rt(),r=Mn(t),s=hn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bn(t,s,r),e!==null&&(Ht(e,t,r,n),Fo(e,t,r))}};function Bf(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ji(n,r)||!ji(s,i):!0}function Hy(t,e,n){var r=!1,s=Kn,i=e.contextType;return typeof i=="object"&&i!==null?i=Rt(i):(s=dt(e)?br:Xe.current,r=e.contextTypes,i=(r=r!=null)?hs(t,s):Kn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ka,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function $f(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ka.enqueueReplaceState(e,e.state,null)}function lu(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ld(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Rt(i):(i=dt(e)?br:Xe.current,s.context=hs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(au(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ka.enqueueReplaceState(s,s.state,null),ya(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gs(t,e){try{var n="",r=e;do n+=Yx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var k_=typeof WeakMap=="function"?WeakMap:Map;function Wy(t,e,n){n=hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_a||(_a=!0,wu=r),cu(t,e)},n}function qy(t,e,n){n=hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){cu(t,e),typeof r!="function"&&($n===null?$n=new Set([this]):$n.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Mf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new k_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=F_.bind(null,t,e,n),e.then(t,t))}function Vf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zf(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hn(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var j_=xn.ReactCurrentOwner,ct=!1;function nt(t,e,n,r){e.child=t===null?Sy(e,null,n,r):ps(e,t.child,n,r)}function Hf(t,e,n,r,s){n=n.render;var i=e.ref;return as(e,s),r=Bd(t,e,n,r,i,s),n=$d(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(fe&&n&&Cd(e),e.flags|=1,nt(t,e,r,s),e.child)}function Wf(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Qd(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Gy(t,e,i,r,s)):(t=Ho(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ji,n(o,r)&&t.ref===e.ref)return vn(t,e,s)}return e.flags|=1,t=Vn(i,r),t.ref=e.ref,t.return=e,e.child=t}function Gy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ji(i,r)&&t.ref===e.ref)if(ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,vn(t,e,s)}return uu(t,e,n,r,s)}function Ky(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Yr,gt),gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(Yr,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(Yr,gt),gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,le(Yr,gt),gt|=r;return nt(t,e,s,n),e.child}function Jy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uu(t,e,n,r,s){var i=dt(n)?br:Xe.current;return i=hs(e,i),as(e,s),n=Bd(t,e,n,r,i,s),r=$d(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vn(t,e,s)):(fe&&r&&Cd(e),e.flags|=1,nt(t,e,n,s),e.child)}function qf(t,e,n,r,s){if(dt(n)){var i=!0;ha(e)}else i=!1;if(as(e,s),e.stateNode===null)Mo(t,e),Hy(e,n,r),lu(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Rt(u):(u=dt(n)?br:Xe.current,u=hs(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&$f(e,o,r,u),En=!1;var f=e.memoizedState;o.state=f,ya(e,r,o,s),l=e.memoizedState,a!==r||f!==l||ut.current||En?(typeof d=="function"&&(au(e,n,d,r),l=e.memoizedState),(a=En||Bf(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,by(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ft(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rt(l):(l=dt(n)?br:Xe.current,l=hs(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&$f(e,o,r,l),En=!1,f=e.memoizedState,o.state=f,ya(e,r,o,s);var m=e.memoizedState;a!==h||f!==m||ut.current||En?(typeof g=="function"&&(au(e,n,g,r),m=e.memoizedState),(u=En||Bf(e,n,u,r,f,m,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return du(t,e,n,r,i,s)}function du(t,e,n,r,s,i){Jy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rf(e,n,!1),vn(t,e,i);r=e.stateNode,j_.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ps(e,t.child,null,i),e.child=ps(e,null,a,i)):nt(t,e,a,i),e.memoizedState=r.state,s&&Rf(e,n,!0),e.child}function Qy(t){var e=t.stateNode;e.pendingContext?Nf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nf(t,e.context,!1),Id(t,e.containerInfo)}function Gf(t,e,n,r,s){return fs(),Td(s),e.flags|=256,nt(t,e,n,r),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yy(t,e,n){var r=e.pendingProps,s=ge.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),le(ge,s&1),t===null)return iu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ya(o,r,0,null),t=_r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fu(n),e.memoizedState=hu,t):zd(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return E_(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Vn(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Vn(a,i):(i=_r(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hu,r}return i=t.child,t=i.sibling,r=Vn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zd(t,e){return e=Ya({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function go(t,e,n,r){return r!==null&&Td(r),ps(e,t.child,null,n),t=zd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function E_(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xl(Error(D(422))),go(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ya({mode:"visible",children:r.children},s,0,null),i=_r(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ps(e,t.child,null,o),e.child.memoizedState=fu(o),e.memoizedState=hu,i);if(!(e.mode&1))return go(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=Xl(i,r,void 0),go(t,e,o,r)}if(a=(o&t.childLanes)!==0,ct||a){if(r=Fe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,yn(t,s),Ht(r,t,s,-1))}return Jd(),r=Xl(Error(D(421))),go(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=B_.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,yt=Fn(s.nextSibling),vt=e,fe=!0,Vt=null,t!==null&&(jt[Et++]=cn,jt[Et++]=un,jt[Et++]=kr,cn=t.id,un=t.overflow,kr=e),e=zd(e,r.children),e.flags|=4096,e)}function Kf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ou(t.return,e,n)}function Zl(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Xy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(nt(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kf(t,n,e);else if(t.tag===19)Kf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(le(ge,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&va(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zl(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&va(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zl(e,!0,n,null,i);break;case"together":Zl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Er|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C_(t,e,n){switch(e.tag){case 3:Qy(e),fs();break;case 5:ky(e);break;case 1:dt(e.type)&&ha(e);break;case 4:Id(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;le(ma,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(le(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Yy(t,e,n):(le(ge,ge.current&1),t=vn(t,e,n),t!==null?t.sibling:null);le(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Xy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,Ky(t,e,n)}return vn(t,e,n)}var Zy,pu,ev,tv;Zy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pu=function(){};ev=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vr(Zt.current);var i=null;switch(n){case"input":s=Dc(t,s),r=Dc(t,r),i=[];break;case"select":s=we({},s,{value:void 0}),r=we({},r,{value:void 0}),i=[];break;case"textarea":s=Bc(t,s),r=Bc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ua)}Mc(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vi.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&de("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};tv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ms(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function P_(t,e,n){var r=e.pendingProps;switch(Pd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return dt(e.type)&&da(),Ge(e),null;case 3:return r=e.stateNode,ms(),he(ut),he(Xe),Ud(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(po(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(_u(Vt),Vt=null))),pu(t,e),Ge(e),null;case 5:Dd(e);var s=vr(Ni.current);if(n=e.type,t!==null&&e.stateNode!=null)ev(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Ge(e),null}if(t=vr(Zt.current),po(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Yt]=e,r[Pi]=i,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(s=0;s<Xs.length;s++)de(Xs[s],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":nf(r,i),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},de("invalid",r);break;case"textarea":sf(r,i),de("invalid",r)}Mc(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&fo(r.textContent,a,t),s=["children",""+a]):vi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":so(r),rf(r,i,!0);break;case"textarea":so(r),of(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ua)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[Pi]=r,Zy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vc(n,r),n){case"dialog":de("cancel",t),de("close",t),s=r;break;case"iframe":case"object":case"embed":de("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xs.length;s++)de(Xs[s],t);s=r;break;case"source":de("error",t),s=r;break;case"img":case"image":case"link":de("error",t),de("load",t),s=r;break;case"details":de("toggle",t),s=r;break;case"input":nf(t,r),s=Dc(t,r),de("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=we({},r,{value:void 0}),de("invalid",t);break;case"textarea":sf(t,r),s=Bc(t,r),de("invalid",t);break;default:s=r}Mc(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Ag(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ng(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&wi(t,l):typeof l=="number"&&wi(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vi.hasOwnProperty(i)?l!=null&&i==="onScroll"&&de("scroll",t):l!=null&&fd(t,i,l,o))}switch(n){case"input":so(t),rf(t,r,!1);break;case"textarea":so(t),of(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rs(t,!!r.multiple,i,!1):r.defaultValue!=null&&rs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ua)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)tv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=vr(Ni.current),vr(Zt.current),po(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(i=r.nodeValue!==n)&&(t=vt,t!==null))switch(t.tag){case 3:fo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fo(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Ge(e),null;case 13:if(he(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(fe&&yt!==null&&e.mode&1&&!(e.flags&128))wy(),fs(),e.flags|=98560,i=!1;else if(i=po(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Yt]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),i=!1}else Vt!==null&&(_u(Vt),Vt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Oe===0&&(Oe=3):Jd())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return ms(),pu(t,e),t===null&&Ei(e.stateNode.containerInfo),Ge(e),null;case 10:return Ad(e.type._context),Ge(e),null;case 17:return dt(e.type)&&da(),Ge(e),null;case 19:if(he(ge),i=e.memoizedState,i===null)return Ge(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ms(i,!1);else{if(Oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=va(t),o!==null){for(e.flags|=128,Ms(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return le(ge,ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>ys&&(e.flags|=128,r=!0,Ms(i,!1),e.lanes=4194304)}else{if(!r)if(t=va(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ms(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Ge(e),null}else 2*ke()-i.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,r=!0,Ms(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=ge.current,le(ge,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return Kd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gt&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function T_(t,e){switch(Pd(e),e.tag){case 1:return dt(e.type)&&da(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),he(ut),he(Xe),Ud(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dd(e),null;case 13:if(he(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ge),null;case 4:return ms(),null;case 10:return Ad(e.type._context),null;case 22:case 23:return Kd(),null;case 24:return null;default:return null}}var yo=!1,Qe=!1,N_=typeof WeakSet=="function"?WeakSet:Set,z=null;function Qr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function mu(t,e,n){try{n()}catch(r){Se(t,e,r)}}var Jf=!1;function R_(t,e){if(Xc=aa,t=oy(),Ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zc={focusedElem:t,selectionRange:n},aa=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,S=m.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ft(e.type,v),S);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(_){Se(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return m=Jf,Jf=!1,m}function li(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&mu(e,n,i)}s=s.next}while(s!==r)}}function Ja(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nv(t){var e=t.alternate;e!==null&&(t.alternate=null,nv(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Pi],delete e[nu],delete e[f_],delete e[p_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rv(t){return t.tag===5||t.tag===3||t.tag===4}function Qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ua));else if(r!==4&&(t=t.child,t!==null))for(yu(t,e,n),t=t.sibling;t!==null;)yu(t,e,n),t=t.sibling}function vu(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vu(t,e,n),t=t.sibling;t!==null;)vu(t,e,n),t=t.sibling}var Me=null,Bt=!1;function _n(t,e,n){for(n=n.child;n!==null;)sv(t,e,n),n=n.sibling}function sv(t,e,n){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Ma,n)}catch{}switch(n.tag){case 5:Qe||Qr(n,e);case 6:var r=Me,s=Bt;Me=null,_n(t,e,n),Me=r,Bt=s,Me!==null&&(Bt?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(Bt?(t=Me,n=n.stateNode,t.nodeType===8?ql(t.parentNode,n):t.nodeType===1&&ql(t,n),bi(t)):ql(Me,n.stateNode));break;case 4:r=Me,s=Bt,Me=n.stateNode.containerInfo,Bt=!0,_n(t,e,n),Me=r,Bt=s;break;case 0:case 11:case 14:case 15:if(!Qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mu(n,e,o),s=s.next}while(s!==r)}_n(t,e,n);break;case 1:if(!Qe&&(Qr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Se(n,e,a)}_n(t,e,n);break;case 21:_n(t,e,n);break;case 22:n.mode&1?(Qe=(r=Qe)||n.memoizedState!==null,_n(t,e,n),Qe=r):_n(t,e,n);break;default:_n(t,e,n)}}function Yf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new N_),e.forEach(function(r){var s=$_.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Me=a.stateNode,Bt=!1;break e;case 3:Me=a.stateNode.containerInfo,Bt=!0;break e;case 4:Me=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if(Me===null)throw Error(D(160));sv(i,o,s),Me=null,Bt=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Se(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iv(e,t),e=e.sibling}function iv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),Kt(t),r&4){try{li(3,t,t.return),Ja(3,t)}catch(v){Se(t,t.return,v)}try{li(5,t,t.return)}catch(v){Se(t,t.return,v)}}break;case 1:Dt(e,t),Kt(t),r&512&&n!==null&&Qr(n,n.return);break;case 5:if(Dt(e,t),Kt(t),r&512&&n!==null&&Qr(n,n.return),t.flags&32){var s=t.stateNode;try{wi(s,"")}catch(v){Se(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Cg(s,i),Vc(a,o);var u=Vc(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Ag(s,h):d==="dangerouslySetInnerHTML"?Ng(s,h):d==="children"?wi(s,h):fd(s,d,h,u)}switch(a){case"input":Uc(s,i);break;case"textarea":Pg(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?rs(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?rs(s,!!i.multiple,i.defaultValue,!0):rs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pi]=i}catch(v){Se(t,t.return,v)}}break;case 6:if(Dt(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(D(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){Se(t,t.return,v)}}break;case 3:if(Dt(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bi(e.containerInfo)}catch(v){Se(t,t.return,v)}break;case 4:Dt(e,t),Kt(t);break;case 13:Dt(e,t),Kt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(qd=ke())),r&4&&Yf(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(u=Qe)||d,Dt(e,t),Qe=u):Dt(e,t),Kt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(z=t,d=t.child;d!==null;){for(h=z=d;z!==null;){switch(f=z,g=f.child,f.tag){case 0:case 11:case 14:case 15:li(4,f,f.return);break;case 1:Qr(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Se(r,n,v)}}break;case 5:Qr(f,f.return);break;case 22:if(f.memoizedState!==null){Zf(h);continue}}g!==null?(g.return=f,z=g):Zf(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Rg("display",o))}catch(v){Se(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){Se(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dt(e,t),Kt(t),r&4&&Yf(t);break;case 21:break;default:Dt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rv(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wi(s,""),r.flags&=-33);var i=Qf(t);vu(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Qf(t);yu(t,a,o);break;default:throw Error(D(161))}}catch(l){Se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A_(t,e,n){z=t,ov(t)}function ov(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var s=z,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||yo;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Qe;a=yo;var u=Qe;if(yo=o,(Qe=l)&&!u)for(z=s;z!==null;)o=z,l=o.child,o.tag===22&&o.memoizedState!==null?ep(s):l!==null?(l.return=o,z=l):ep(s);for(;i!==null;)z=i,ov(i),i=i.sibling;z=s,yo=a,Qe=u}Xf(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,z=i):Xf(t)}}function Xf(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||Ja(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qe)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Df(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Df(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&bi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Qe||e.flags&512&&gu(e)}catch(f){Se(e,e.return,f)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Zf(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function ep(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ja(4,e)}catch(l){Se(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Se(e,s,l)}}var i=e.return;try{gu(e)}catch(l){Se(e,i,l)}break;case 5:var o=e.return;try{gu(e)}catch(l){Se(e,o,l)}}}catch(l){Se(e,e.return,l)}if(e===t){z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,z=a;break}z=e.return}}var O_=Math.ceil,Sa=xn.ReactCurrentDispatcher,Hd=xn.ReactCurrentOwner,Tt=xn.ReactCurrentBatchConfig,ne=0,Fe=null,Pe=null,Ve=0,gt=0,Yr=Xn(0),Oe=0,Li=null,Er=0,Qa=0,Wd=0,ci=null,at=null,qd=0,ys=1/0,on=null,_a=!1,wu=null,$n=null,vo=!1,On=null,ba=0,ui=0,xu=null,Vo=-1,zo=0;function rt(){return ne&6?ke():Vo!==-1?Vo:Vo=ke()}function Mn(t){return t.mode&1?ne&2&&Ve!==0?Ve&-Ve:g_.transition!==null?(zo===0&&(zo=Hg()),zo):(t=re,t!==0||(t=window.event,t=t===void 0?16:Yg(t.type)),t):1}function Ht(t,e,n,r){if(50<ui)throw ui=0,xu=null,Error(D(185));Vi(t,n,r),(!(ne&2)||t!==Fe)&&(t===Fe&&(!(ne&2)&&(Qa|=n),Oe===4&&Nn(t,Ve)),ht(t,r),n===1&&ne===0&&!(e.mode&1)&&(ys=ke()+500,qa&&Zn()))}function ht(t,e){var n=t.callbackNode;gS(t,e);var r=oa(t,t===Fe?Ve:0);if(r===0)n!==null&&cf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cf(n),e===1)t.tag===0?m_(tp.bind(null,t)):gy(tp.bind(null,t)),d_(function(){!(ne&6)&&Zn()}),n=null;else{switch(Wg(r)){case 1:n=vd;break;case 4:n=Vg;break;case 16:n=ia;break;case 536870912:n=zg;break;default:n=ia}n=pv(n,av.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function av(t,e){if(Vo=-1,zo=0,ne&6)throw Error(D(327));var n=t.callbackNode;if(ls()&&t.callbackNode!==n)return null;var r=oa(t,t===Fe?Ve:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ka(t,r);else{e=r;var s=ne;ne|=2;var i=cv();(Fe!==t||Ve!==e)&&(on=null,ys=ke()+500,Sr(t,e));do try{D_();break}catch(a){lv(t,a)}while(1);Rd(),Sa.current=i,ne=s,Pe!==null?e=0:(Fe=null,Ve=0,e=Oe)}if(e!==0){if(e===2&&(s=Gc(t),s!==0&&(r=s,e=Su(t,s))),e===1)throw n=Li,Sr(t,0),Nn(t,r),ht(t,ke()),n;if(e===6)Nn(t,r);else{if(s=t.current.alternate,!(r&30)&&!L_(s)&&(e=ka(t,r),e===2&&(i=Gc(t),i!==0&&(r=i,e=Su(t,i))),e===1))throw n=Li,Sr(t,0),Nn(t,r),ht(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:ur(t,at,on);break;case 3:if(Nn(t,r),(r&130023424)===r&&(e=qd+500-ke(),10<e)){if(oa(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){rt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tu(ur.bind(null,t,at,on),e);break}ur(t,at,on);break;case 4:if(Nn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O_(r/1960))-r,10<r){t.timeoutHandle=tu(ur.bind(null,t,at,on),r);break}ur(t,at,on);break;case 5:ur(t,at,on);break;default:throw Error(D(329))}}}return ht(t,ke()),t.callbackNode===n?av.bind(null,t):null}function Su(t,e){var n=ci;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=ka(t,e),t!==2&&(e=at,at=n,e!==null&&_u(e)),t}function _u(t){at===null?at=t:at.push.apply(at,t)}function L_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nn(t,e){for(e&=~Wd,e&=~Qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zt(e),r=1<<n;t[n]=-1,e&=~r}}function tp(t){if(ne&6)throw Error(D(327));ls();var e=oa(t,0);if(!(e&1))return ht(t,ke()),null;var n=ka(t,e);if(t.tag!==0&&n===2){var r=Gc(t);r!==0&&(e=r,n=Su(t,r))}if(n===1)throw n=Li,Sr(t,0),Nn(t,e),ht(t,ke()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ur(t,at,on),ht(t,ke()),null}function Gd(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(ys=ke()+500,qa&&Zn())}}function Cr(t){On!==null&&On.tag===0&&!(ne&6)&&ls();var e=ne;ne|=1;var n=Tt.transition,r=re;try{if(Tt.transition=null,re=1,t)return t()}finally{re=r,Tt.transition=n,ne=e,!(ne&6)&&Zn()}}function Kd(){gt=Yr.current,he(Yr)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u_(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(Pd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&da();break;case 3:ms(),he(ut),he(Xe),Ud();break;case 5:Dd(r);break;case 4:ms();break;case 13:he(ge);break;case 19:he(ge);break;case 10:Ad(r.type._context);break;case 22:case 23:Kd()}n=n.return}if(Fe=t,Pe=t=Vn(t.current,null),Ve=gt=e,Oe=0,Li=null,Wd=Qa=Er=0,at=ci=null,yr!==null){for(e=0;e<yr.length;e++)if(n=yr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}yr=null}return t}function lv(t,e){do{var n=Pe;try{if(Rd(),Bo.current=xa,wa){for(var r=ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}wa=!1}if(jr=0,Ue=Ae=ve=null,ai=!1,Ri=0,Hd.current=null,n===null||n.return===null){Oe=1,Li=e,Pe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Ve,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Vf(o);if(g!==null){g.flags&=-257,zf(g,o,a,i,e),g.mode&1&&Mf(i,u,e),e=g,l=u;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){Mf(i,u,e),Jd();break e}l=Error(D(426))}}else if(fe&&a.mode&1){var S=Vf(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),zf(S,o,a,i,e),Td(gs(l,a));break e}}i=l=gs(l,a),Oe!==4&&(Oe=2),ci===null?ci=[i]:ci.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=Wy(i,l,e);If(i,x);break e;case 1:a=l;var y=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&($n===null||!$n.has(p)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=qy(i,a,e);If(i,_);break e}}i=i.return}while(i!==null)}dv(n)}catch(b){e=b,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function cv(){var t=Sa.current;return Sa.current=xa,t===null?xa:t}function Jd(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Fe===null||!(Er&268435455)&&!(Qa&268435455)||Nn(Fe,Ve)}function ka(t,e){var n=ne;ne|=2;var r=cv();(Fe!==t||Ve!==e)&&(on=null,Sr(t,e));do try{I_();break}catch(s){lv(t,s)}while(1);if(Rd(),ne=n,Sa.current=r,Pe!==null)throw Error(D(261));return Fe=null,Ve=0,Oe}function I_(){for(;Pe!==null;)uv(Pe)}function D_(){for(;Pe!==null&&!aS();)uv(Pe)}function uv(t){var e=fv(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?dv(t):Pe=e,Hd.current=null}function dv(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=T_(n,e),n!==null){n.flags&=32767,Pe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Oe=6,Pe=null;return}}else if(n=P_(n,e,gt),n!==null){Pe=n;return}if(e=e.sibling,e!==null){Pe=e;return}Pe=e=t}while(e!==null);Oe===0&&(Oe=5)}function ur(t,e,n){var r=re,s=Tt.transition;try{Tt.transition=null,re=1,U_(t,e,n,r)}finally{Tt.transition=s,re=r}return null}function U_(t,e,n,r){do ls();while(On!==null);if(ne&6)throw Error(D(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yS(t,i),t===Fe&&(Pe=Fe=null,Ve=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vo||(vo=!0,pv(ia,function(){return ls(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var o=re;re=1;var a=ne;ne|=4,Hd.current=null,R_(t,n),iv(n,t),r_(Zc),aa=!!Xc,Zc=Xc=null,t.current=n,A_(n),lS(),ne=a,re=o,Tt.transition=i}else t.current=n;if(vo&&(vo=!1,On=t,ba=s),i=t.pendingLanes,i===0&&($n=null),dS(n.stateNode),ht(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(_a)throw _a=!1,t=wu,wu=null,t;return ba&1&&t.tag!==0&&ls(),i=t.pendingLanes,i&1?t===xu?ui++:(ui=0,xu=t):ui=0,Zn(),null}function ls(){if(On!==null){var t=Wg(ba),e=Tt.transition,n=re;try{if(Tt.transition=null,re=16>t?16:t,On===null)var r=!1;else{if(t=On,On=null,ba=0,ne&6)throw Error(D(331));var s=ne;for(ne|=4,z=t.current;z!==null;){var i=z,o=i.child;if(z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(z=u;z!==null;){var d=z;switch(d.tag){case 0:case 11:case 15:li(8,d,i)}var h=d.child;if(h!==null)h.return=d,z=h;else for(;z!==null;){d=z;var f=d.sibling,g=d.return;if(nv(d),d===u){z=null;break}if(f!==null){f.return=g,z=f;break}z=g}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,z=o;else e:for(;z!==null;){if(i=z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:li(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,z=x;break e}z=i.return}}var y=t.current;for(z=y;z!==null;){o=z;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,z=p;else e:for(o=y;z!==null;){if(a=z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ja(9,a)}}catch(b){Se(a,a.return,b)}if(a===o){z=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,z=_;break e}z=a.return}}if(ne=s,Zn(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Ma,t)}catch{}r=!0}return r}finally{re=n,Tt.transition=e}}return!1}function np(t,e,n){e=gs(n,e),e=Wy(t,e,1),t=Bn(t,e,1),e=rt(),t!==null&&(Vi(t,1,e),ht(t,e))}function Se(t,e,n){if(t.tag===3)np(t,t,n);else for(;e!==null;){if(e.tag===3){np(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($n===null||!$n.has(r))){t=gs(n,t),t=qy(e,t,1),e=Bn(e,t,1),t=rt(),e!==null&&(Vi(e,1,t),ht(e,t));break}}e=e.return}}function F_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rt(),t.pingedLanes|=t.suspendedLanes&n,Fe===t&&(Ve&n)===n&&(Oe===4||Oe===3&&(Ve&130023424)===Ve&&500>ke()-qd?Sr(t,0):Wd|=n),ht(t,e)}function hv(t,e){e===0&&(t.mode&1?(e=ao,ao<<=1,!(ao&130023424)&&(ao=4194304)):e=1);var n=rt();t=yn(t,e),t!==null&&(Vi(t,e,n),ht(t,n))}function B_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hv(t,n)}function $_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),hv(t,n)}var fv;fv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ut.current)ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ct=!1,C_(t,e,n);ct=!!(t.flags&131072)}else ct=!1,fe&&e.flags&1048576&&yy(e,pa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mo(t,e),t=e.pendingProps;var s=hs(e,Xe.current);as(e,n),s=Bd(null,e,r,t,s,n);var i=$d();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(i=!0,ha(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ld(e),s.updater=Ka,e.stateNode=s,s._reactInternals=e,lu(e,r,t,n),e=du(null,e,r,!0,i,n)):(e.tag=0,fe&&i&&Cd(e),nt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mo(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=V_(r),t=Ft(r,t),s){case 0:e=uu(null,e,r,t,n);break e;case 1:e=qf(null,e,r,t,n);break e;case 11:e=Hf(null,e,r,t,n);break e;case 14:e=Wf(null,e,r,Ft(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),uu(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),qf(t,e,r,s,n);case 3:e:{if(Qy(e),t===null)throw Error(D(387));r=e.pendingProps,i=e.memoizedState,s=i.element,by(t,e),ya(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gs(Error(D(423)),e),e=Gf(t,e,r,n,s);break e}else if(r!==s){s=gs(Error(D(424)),e),e=Gf(t,e,r,n,s);break e}else for(yt=Fn(e.stateNode.containerInfo.firstChild),vt=e,fe=!0,Vt=null,n=Sy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===s){e=vn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return ky(e),t===null&&iu(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,eu(r,s)?o=null:i!==null&&eu(r,i)&&(e.flags|=32),Jy(t,e),nt(t,e,o,n),e.child;case 6:return t===null&&iu(e),null;case 13:return Yy(t,e,n);case 4:return Id(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),Hf(t,e,r,s,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,le(ma,r._currentValue),r._currentValue=o,i!==null)if(qt(i.value,o)){if(i.children===s.children&&!ut.current){e=vn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=hn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ou(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ou(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}nt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,as(e,n),s=Rt(s),r=r(s),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,s=Ft(r,e.pendingProps),s=Ft(r.type,s),Wf(t,e,r,s,n);case 15:return Gy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ft(r,s),Mo(t,e),e.tag=1,dt(r)?(t=!0,ha(e)):t=!1,as(e,n),Hy(e,r,s),lu(e,r,s,n),du(null,e,r,!0,t,n);case 19:return Xy(t,e,n);case 22:return Ky(t,e,n)}throw Error(D(156,e.tag))};function pv(t,e){return Mg(t,e)}function M_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(t,e,n,r){return new M_(t,e,n,r)}function Qd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function V_(t){if(typeof t=="function")return Qd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===gd)return 14}return 2}function Vn(t,e){var n=t.alternate;return n===null?(n=Pt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ho(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Qd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Mr:return _r(n.children,s,i,e);case pd:o=8,s|=8;break;case Ac:return t=Pt(12,n,e,s|2),t.elementType=Ac,t.lanes=i,t;case Oc:return t=Pt(13,n,e,s),t.elementType=Oc,t.lanes=i,t;case Lc:return t=Pt(19,n,e,s),t.elementType=Lc,t.lanes=i,t;case kg:return Ya(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _g:o=10;break e;case bg:o=9;break e;case md:o=11;break e;case gd:o=14;break e;case jn:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=Pt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function _r(t,e,n,r){return t=Pt(7,t,r,e),t.lanes=n,t}function Ya(t,e,n,r){return t=Pt(22,t,r,e),t.elementType=kg,t.lanes=n,t.stateNode={isHidden:!1},t}function ec(t,e,n){return t=Pt(6,t,null,e),t.lanes=n,t}function tc(t,e,n){return e=Pt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Il(0),this.expirationTimes=Il(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Il(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yd(t,e,n,r,s,i,o,a,l){return t=new z_(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(i),t}function H_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$r,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mv(t){if(!t)return Kn;t=t._reactInternals;e:{if(Nr(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(dt(n))return my(t,n,e)}return e}function gv(t,e,n,r,s,i,o,a,l){return t=Yd(n,r,!0,t,s,i,o,a,l),t.context=mv(null),n=t.current,r=rt(),s=Mn(n),i=hn(r,s),i.callback=e??null,Bn(n,i,s),t.current.lanes=s,Vi(t,s,r),ht(t,r),t}function Xa(t,e,n,r){var s=e.current,i=rt(),o=Mn(s);return n=mv(n),e.context===null?e.context=n:e.pendingContext=n,e=hn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bn(s,e,o),t!==null&&(Ht(t,s,o,i),Fo(t,s,o)),o}function ja(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xd(t,e){rp(t,e),(t=t.alternate)&&rp(t,e)}function W_(){return null}var yv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zd(t){this._internalRoot=t}Za.prototype.render=Zd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));Xa(t,e,null,null)};Za.prototype.unmount=Zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cr(function(){Xa(null,t,null,null)}),e[gn]=null}};function Za(t){this._internalRoot=t}Za.prototype.unstable_scheduleHydration=function(t){if(t){var e=Kg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tn.length&&e!==0&&e<Tn[n].priority;n++);Tn.splice(n,0,t),n===0&&Qg(t)}};function eh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function el(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sp(){}function q_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ja(o);i.call(u)}}var o=gv(e,r,t,0,null,!1,!1,"",sp);return t._reactRootContainer=o,t[gn]=o.current,Ei(t.nodeType===8?t.parentNode:t),Cr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ja(l);a.call(u)}}var l=Yd(t,0,!1,null,null,!1,!1,"",sp);return t._reactRootContainer=l,t[gn]=l.current,Ei(t.nodeType===8?t.parentNode:t),Cr(function(){Xa(e,l,n,r)}),l}function tl(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ja(o);a.call(l)}}Xa(e,o,t,s)}else o=q_(n,e,t,s,r);return ja(o)}qg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ys(e.pendingLanes);n!==0&&(wd(e,n|1),ht(e,ke()),!(ne&6)&&(ys=ke()+500,Zn()))}break;case 13:Cr(function(){var r=yn(t,1);if(r!==null){var s=rt();Ht(r,t,1,s)}}),Xd(t,1)}};xd=function(t){if(t.tag===13){var e=yn(t,134217728);if(e!==null){var n=rt();Ht(e,t,134217728,n)}Xd(t,134217728)}};Gg=function(t){if(t.tag===13){var e=Mn(t),n=yn(t,e);if(n!==null){var r=rt();Ht(n,t,e,r)}Xd(t,e)}};Kg=function(){return re};Jg=function(t,e){var n=re;try{return re=t,e()}finally{re=n}};Hc=function(t,e,n){switch(e){case"input":if(Uc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Wa(r);if(!s)throw Error(D(90));Eg(r),Uc(r,s)}}}break;case"textarea":Pg(t,n);break;case"select":e=n.value,e!=null&&rs(t,!!n.multiple,e,!1)}};Ig=Gd;Dg=Cr;var G_={usingClientEntryPoint:!1,Events:[Hi,Wr,Wa,Og,Lg,Gd]},Vs={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K_={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Bg(t),t===null?null:t.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||W_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{Ma=wo.inject(K_),Xt=wo}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eh(e))throw Error(D(200));return H_(t,e,null,n)};St.createRoot=function(t,e){if(!eh(t))throw Error(D(299));var n=!1,r="",s=yv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yd(t,1,!1,null,null,n,!1,r,s),t[gn]=e.current,Ei(t.nodeType===8?t.parentNode:t),new Zd(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Bg(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return Cr(t)};St.hydrate=function(t,e,n){if(!el(e))throw Error(D(200));return tl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!eh(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yv;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gv(e,null,t,1,n??null,s,!1,i,o),t[gn]=e.current,Ei(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Za(e)};St.render=function(t,e,n){if(!el(e))throw Error(D(200));return tl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!el(t))throw Error(D(40));return t._reactRootContainer?(Cr(function(){tl(null,null,t,!1,function(){t._reactRootContainer=null,t[gn]=null})}),!0):!1};St.unstable_batchedUpdates=Gd;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!el(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return tl(t,e,n,!1,r)};St.version="18.3.1-next-f1338f8080-20240426";function vv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vv)}catch(t){console.error(t)}}vv(),vg.exports=St;var J_=vg.exports,ip=J_;Nc.createRoot=ip.createRoot,Nc.hydrateRoot=ip.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ii(){return Ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ii.apply(this,arguments)}var Ln;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ln||(Ln={}));const op="popstate";function Q_(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return bu("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ea(s)}return X_(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y_(){return Math.random().toString(36).substr(2,8)}function ap(t,e){return{usr:t.state,key:t.key,idx:e}}function bu(t,e,n,r){return n===void 0&&(n=null),Ii({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?js(e):e,{state:n,key:e&&e.key||r||Y_()})}function Ea(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function js(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function X_(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ln.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(Ii({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Ln.Pop;let S=d(),x=S==null?null:S-u;u=S,l&&l({action:a,location:v.location,delta:x})}function f(S,x){a=Ln.Push;let y=bu(v.location,S,x);n&&n(y,S),u=d()+1;let p=ap(y,u),_=v.createHref(y);try{o.pushState(p,"",_)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(_)}i&&l&&l({action:a,location:v.location,delta:1})}function g(S,x){a=Ln.Replace;let y=bu(v.location,S,x);n&&n(y,S),u=d();let p=ap(y,u),_=v.createHref(y);o.replaceState(p,"",_),i&&l&&l({action:a,location:v.location,delta:0})}function m(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof S=="string"?S:Ea(S);return y=y.replace(/ $/,"%20"),je(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let v={get action(){return a},get location(){return t(s,o)},listen(S){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(op,h),l=S,()=>{s.removeEventListener(op,h),l=null}},createHref(S){return e(s,S)},createURL:m,encodeLocation(S){let x=m(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(S){return o.go(S)}};return v}var lp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(lp||(lp={}));function Z_(t,e,n){return n===void 0&&(n="/"),eb(t,e,n,!1)}function eb(t,e,n,r){let s=typeof e=="string"?js(e):e,i=th(s.pathname||"/",n);if(i==null)return null;let o=xv(t);tb(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=hb(i);a=ub(o[l],u,r)}return a}function xv(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(je(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=zn([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xv(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:lb(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of Sv(i.path))s(i,o,l)}),e}function Sv(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Sv(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function tb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nb=/^:[\w-]+$/,rb=3,sb=2,ib=1,ob=10,ab=-2,cp=t=>t==="*";function lb(t,e){let n=t.split("/"),r=n.length;return n.some(cp)&&(r+=ab),e&&(r+=sb),n.filter(s=>!cp(s)).reduce((s,i)=>s+(nb.test(i)?rb:i===""?ib:ob),r)}function cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function ub(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=up({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=up({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:zn([i,h.pathname]),pathnameBase:gb(zn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=zn([i,h.pathnameBase]))}return o}function up(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=db(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let v=a[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[h];return g&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function db(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function th(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?js(t):t;return{pathname:n?n.startsWith("/")?n:pb(n,e):e,search:yb(r),hash:vb(s)}}function pb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function nc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function nh(t,e){let n=mb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function rh(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=js(t):(s=Ii({},t),je(!s.pathname||!s.pathname.includes("?"),nc("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),nc("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),nc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=fb(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const zn=t=>t.join("/").replace(/\/\/+/g,"/"),gb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _v=["post","put","patch","delete"];new Set(_v);const xb=["get",..._v];new Set(xb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Di.apply(this,arguments)}const sh=w.createContext(null),Sb=w.createContext(null),er=w.createContext(null),nl=w.createContext(null),tr=w.createContext({outlet:null,matches:[],isDataRoute:!1}),bv=w.createContext(null);function _b(t,e){let{relative:n}=e===void 0?{}:e;Es()||je(!1);let{basename:r,navigator:s}=w.useContext(er),{hash:i,pathname:o,search:a}=jv(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:zn([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Es(){return w.useContext(nl)!=null}function Sn(){return Es()||je(!1),w.useContext(nl).location}function kv(t){w.useContext(er).static||w.useLayoutEffect(t)}function Ze(){let{isDataRoute:t}=w.useContext(tr);return t?Ib():bb()}function bb(){Es()||je(!1);let t=w.useContext(sh),{basename:e,future:n,navigator:r}=w.useContext(er),{matches:s}=w.useContext(tr),{pathname:i}=Sn(),o=JSON.stringify(nh(s,n.v7_relativeSplatPath)),a=w.useRef(!1);return kv(()=>{a.current=!0}),w.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=rh(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:zn([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,i,t])}function jv(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(er),{matches:s}=w.useContext(tr),{pathname:i}=Sn(),o=JSON.stringify(nh(s,r.v7_relativeSplatPath));return w.useMemo(()=>rh(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function kb(t,e){return jb(t,e)}function jb(t,e,n,r){Es()||je(!1);let{navigator:s}=w.useContext(er),{matches:i}=w.useContext(tr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Sn(),d;if(e){var h;let S=typeof e=="string"?js(e):e;l==="/"||(h=S.pathname)!=null&&h.startsWith(l)||je(!1),d=S}else d=u;let f=d.pathname||"/",g=f;if(l!=="/"){let S=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let m=Z_(t,{pathname:g}),v=Nb(m&&m.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:zn([l,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?l:zn([l,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return e&&v?w.createElement(nl.Provider,{value:{location:Di({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ln.Pop}},v):v}function Eb(){let t=Lb(),e=wb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,i)}const Cb=w.createElement(Eb,null);class Pb extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(tr.Provider,{value:this.props.routeContext},w.createElement(bv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tb(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(sh);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(tr.Provider,{value:e},r)}function Nb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||je(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=n,m=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||m){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let g,m=!1,v=null,S=null;n&&(g=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||Cb,l&&(u<0&&f===0?(Db("route-fallback",!1),m=!0,S=null):u===f&&(m=!0,S=h.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,f+1)),y=()=>{let p;return g?p=v:m?p=S:h.route.Component?p=w.createElement(h.route.Component,null):h.route.element?p=h.route.element:p=d,w.createElement(Tb,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:p})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(Pb,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var Ev=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ev||{}),Ca=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ca||{});function Rb(t){let e=w.useContext(sh);return e||je(!1),e}function Ab(t){let e=w.useContext(Sb);return e||je(!1),e}function Ob(t){let e=w.useContext(tr);return e||je(!1),e}function Cv(t){let e=Ob(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function Lb(){var t;let e=w.useContext(bv),n=Ab(Ca.UseRouteError),r=Cv(Ca.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Ib(){let{router:t}=Rb(Ev.UseNavigateStable),e=Cv(Ca.UseNavigateStable),n=w.useRef(!1);return kv(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Di({fromRouteId:e},i)))},[t,e])}const dp={};function Db(t,e,n){!e&&!dp[t]&&(dp[t]=!0)}function Ub(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Fb(t){let{to:e,replace:n,state:r,relative:s}=t;Es()||je(!1);let{future:i,static:o}=w.useContext(er),{matches:a}=w.useContext(tr),{pathname:l}=Sn(),u=Ze(),d=rh(e,nh(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:s}),[u,h,s,n,r]),null}function Ie(t){je(!1)}function Bb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ln.Pop,navigator:i,static:o=!1,future:a}=t;Es()&&je(!1);let l=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:l,navigator:i,static:o,future:Di({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=js(r));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:m="default"}=r,v=w.useMemo(()=>{let S=th(d,l);return S==null?null:{location:{pathname:S,search:h,hash:f,state:g,key:m},navigationType:s}},[l,d,h,f,g,m,s]);return v==null?null:w.createElement(er.Provider,{value:u},w.createElement(nl.Provider,{children:n,value:v}))}function $b(t){let{children:e,location:n}=t;return kb(ku(e),n)}new Promise(()=>{});function ku(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let i=[...e,s];if(r.type===w.Fragment){n.push.apply(n,ku(r.props.children,i));return}r.type!==Ie&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ku(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ju.apply(this,arguments)}function Mb(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Vb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zb(t,e){return t.button===0&&(!e||e==="_self")&&!Vb(t)}function Eu(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Hb(t,e){let n=Eu(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Wb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qb="6";try{window.__reactRouterVersion=qb}catch{}const Gb="startTransition",hp=Fx[Gb];function Kb(t){let{basename:e,children:n,future:r,window:s}=t,i=w.useRef();i.current==null&&(i.current=Q_({window:s,v5Compat:!0}));let o=i.current,[a,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=w.useCallback(h=>{u&&hp?hp(()=>l(h)):l(h)},[l,u]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>Ub(r),[r]),w.createElement(Bb,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Jb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rc=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=Mb(e,Wb),{basename:g}=w.useContext(er),m,v=!1;if(typeof u=="string"&&Qb.test(u)&&(m=u,Jb))try{let p=new URL(window.location.href),_=u.startsWith("//")?new URL(p.protocol+u):new URL(u),b=th(_.pathname,g);_.origin===p.origin&&b!=null?u=b+_.search+_.hash:v=!0}catch{}let S=_b(u,{relative:s}),x=Yb(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function y(p){r&&r(p),p.defaultPrevented||x(p)}return w.createElement("a",ju({},f,{href:m||S,onClick:v||i?r:y,ref:n,target:l}))});var fp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fp||(fp={}));var pp;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pp||(pp={}));function Yb(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=Ze(),u=Sn(),d=jv(t,{relative:o});return w.useCallback(h=>{if(zb(h,n)){h.preventDefault();let f=r!==void 0?r:Ea(u)===Ea(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,d,r,s,n,t,i,o,a])}function ih(t){let e=w.useRef(Eu(t)),n=w.useRef(!1),r=Sn(),s=w.useMemo(()=>Hb(r.search,n.current?null:e.current),[r.search]),i=Ze(),o=w.useCallback((a,l)=>{const u=Eu(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}w.createContext(void 0);const Xb={"--primary-bg":"#0f0f1e","--secondary-bg":"#1a1a2e","--card-bg":"#16213e","--primary-color":"#e94560","--secondary-color":"#00d9ff","--accent-color":"#ff6b6b","--text-primary":"#ffffff","--text-secondary":"#a8a8a8","--neon-glow":"0 0 20px rgba(0, 217, 255, 0.8)","--card-shadow":"0 10px 30px rgba(0, 0, 0, 0.5)"},Zb=({children:t})=>(w.useEffect(()=>{const e=document.documentElement;Object.entries(Xb).forEach(([n,r])=>{e.style.setProperty(n,r)}),document.body.classList.add("theme-default")},[]),c.jsx(c.Fragment,{children:t})),tn=Object.create(null);tn.open="0";tn.close="1";tn.ping="2";tn.pong="3";tn.message="4";tn.upgrade="5";tn.noop="6";const Wo=Object.create(null);Object.keys(tn).forEach(t=>{Wo[tn[t]]=t});const Cu={type:"error",data:"parser error"},Pv=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Tv=typeof ArrayBuffer=="function",Nv=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,oh=({type:t,data:e},n,r)=>Pv&&e instanceof Blob?n?r(e):mp(e,r):Tv&&(e instanceof ArrayBuffer||Nv(e))?n?r(e):mp(new Blob([e]),r):r(tn[t]+(e||"")),mp=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function gp(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let sc;function ek(t,e){if(Pv&&t.data instanceof Blob)return t.data.arrayBuffer().then(gp).then(e);if(Tv&&(t.data instanceof ArrayBuffer||Nv(t.data)))return e(gp(t.data));oh(t,!1,n=>{sc||(sc=new TextEncoder),e(sc.encode(n))})}const yp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<yp.length;t++)Zs[yp.charCodeAt(t)]=t;const tk=t=>{let e=t.length*.75,n=t.length,r,s=0,i,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)i=Zs[t.charCodeAt(r)],o=Zs[t.charCodeAt(r+1)],a=Zs[t.charCodeAt(r+2)],l=Zs[t.charCodeAt(r+3)],d[s++]=i<<2|o>>4,d[s++]=(o&15)<<4|a>>2,d[s++]=(a&3)<<6|l&63;return u},nk=typeof ArrayBuffer=="function",ah=(t,e)=>{if(typeof t!="string")return{type:"message",data:Rv(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:rk(t.substring(1),e)}:Wo[n]?t.length>1?{type:Wo[n],data:t.substring(1)}:{type:Wo[n]}:Cu},rk=(t,e)=>{if(nk){const n=tk(t);return Rv(n,e)}else return{base64:!0,data:t}},Rv=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Av=String.fromCharCode(30),sk=(t,e)=>{const n=t.length,r=new Array(n);let s=0;t.forEach((i,o)=>{oh(i,!1,a=>{r[o]=a,++s===n&&e(r.join(Av))})})},ik=(t,e)=>{const n=t.split(Av),r=[];for(let s=0;s<n.length;s++){const i=ah(n[s],e);if(r.push(i),i.type==="error")break}return r};function ok(){return new TransformStream({transform(t,e){ek(t,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let ic;function xo(t){return t.reduce((e,n)=>e+n.length,0)}function So(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)n[s]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function ak(t,e){ic||(ic=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(r===0){if(xo(n)<1)break;const l=So(n,1);i=(l[0]&128)===128,s=l[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(xo(n)<2)break;const l=So(n,2);s=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(r===2){if(xo(n)<8)break;const l=So(n,8),u=new DataView(l.buffer,l.byteOffset,l.length),d=u.getUint32(0);if(d>Math.pow(2,53-32)-1){a.enqueue(Cu);break}s=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(xo(n)<s)break;const l=So(n,s);a.enqueue(ah(i?l:ic.decode(l),e)),r=0}if(s===0||s>t){a.enqueue(Cu);break}}}})}const Ov=4;function Te(t){if(t)return lk(t)}function lk(t){for(var e in Te.prototype)t[e]=Te.prototype[e];return t}Te.prototype.on=Te.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Te.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Te.prototype.off=Te.prototype.removeListener=Te.prototype.removeAllListeners=Te.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===e||r.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Te.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,e)}return this};Te.prototype.emitReserved=Te.prototype.emit;Te.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Te.prototype.hasListeners=function(t){return!!this.listeners(t).length};const rl=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Ct=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),ck="arraybuffer";function Lv(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const uk=Ct.setTimeout,dk=Ct.clearTimeout;function sl(t,e){e.useNativeTimers?(t.setTimeoutFn=uk.bind(Ct),t.clearTimeoutFn=dk.bind(Ct)):(t.setTimeoutFn=Ct.setTimeout.bind(Ct),t.clearTimeoutFn=Ct.clearTimeout.bind(Ct))}const hk=1.33;function fk(t){return typeof t=="string"?pk(t):Math.ceil((t.byteLength||t.size)*hk)}function pk(t){let e=0,n=0;for(let r=0,s=t.length;r<s;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Iv(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mk(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function gk(t){let e={},n=t.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class yk extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class lh extends Te{constructor(e){super(),this.writable=!1,sl(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new yk(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=ah(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=mk(e);return n.length?"?"+n:""}}class vk extends lh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};ik(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,sk(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Iv()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Dv=!1;try{Dv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wk=Dv;function xk(){}class Sk extends vk{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let cs=class qo extends Te{constructor(e,n,r){super(),this.createRequest=e,sl(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=Lv(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=qo.requestsCount++,qo.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=xk,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qo.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};cs.requestsCount=0;cs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",vp);else if(typeof addEventListener=="function"){const t="onpagehide"in Ct?"pagehide":"unload";addEventListener(t,vp,!1)}}function vp(){for(let t in cs.requests)cs.requests.hasOwnProperty(t)&&cs.requests[t].abort()}const _k=function(){const t=Uv({xdomain:!1});return t&&t.responseType!==null}();class bk extends Sk{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=_k&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new cs(Uv,this.uri(),e)}}function Uv(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||wk))return new XMLHttpRequest}catch{}if(!e)try{return new Ct[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Fv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class kk extends lh{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=Fv?{}:Lv(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;oh(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&rl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Iv()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const oc=Ct.WebSocket||Ct.MozWebSocket;class jk extends kk{createSocket(e,n,r){return Fv?new oc(e,n,r):n?new oc(e,n):new oc(e)}doWrite(e,n){this.ws.send(n)}}class Ek extends lh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=ak(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),s=ok();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:l})=>{a||(this.onPacket(l),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],s=n===e.length-1;this._writer.write(r).then(()=>{s&&rl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Ck={websocket:jk,webtransport:Ek,polling:bk},Pk=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Tk=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Pu(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let s=Pk.exec(t||""),i={},o=14;for(;o--;)i[Tk[o]]=s[o]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Nk(i,i.path),i.queryKey=Rk(i,i.query),i}function Nk(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Rk(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Tu=typeof addEventListener=="function"&&typeof removeEventListener=="function",Go=[];Tu&&addEventListener("offline",()=>{Go.forEach(t=>t())},!1);class Hn extends Te{constructor(e,n){if(super(),this.binaryType=ck,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=Pu(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Pu(n.host).host);sl(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gk(this.opts.query)),Tu&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Go.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Ov,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Hn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Hn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=fk(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,rl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(Hn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Tu&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Go.indexOf(this._offlineEventListener);r!==-1&&Go.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}Hn.protocol=Ov;class Ak extends Hn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;Hn.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!r)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Hn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,d(),n.close(),n=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function u(h){n&&h.name!==n.name&&i()}const d=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",u)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Ok=class extends Ak{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>Ck[s]).filter(s=>!!s)),super(e,r)}};function Lk(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=Pu(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Ik=typeof ArrayBuffer=="function",Dk=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Bv=Object.prototype.toString,Uk=typeof Blob=="function"||typeof Blob<"u"&&Bv.call(Blob)==="[object BlobConstructor]",Fk=typeof File=="function"||typeof File<"u"&&Bv.call(File)==="[object FileConstructor]";function ch(t){return Ik&&(t instanceof ArrayBuffer||Dk(t))||Uk&&t instanceof Blob||Fk&&t instanceof File}function Ko(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Ko(t[n]))return!0;return!1}if(ch(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Ko(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Ko(t[n]))return!0;return!1}function Bk(t){const e=[],n=t.data,r=t;return r.data=Nu(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Nu(t,e){if(!t)return t;if(ch(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=Nu(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=Nu(t[r],e));return n}return t}function $k(t,e){return t.data=Ru(t.data,e),delete t.attachments,t}function Ru(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=Ru(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=Ru(t[n],e));return t}const Mk=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Vk=5;var te;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(te||(te={}));class zk{constructor(e){this.replacer=e}encode(e){return(e.type===te.EVENT||e.type===te.ACK)&&Ko(e)?this.encodeAsBinary({type:e.type===te.EVENT?te.BINARY_EVENT:te.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===te.BINARY_EVENT||e.type===te.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Bk(e),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function wp(t){return Object.prototype.toString.call(t)==="[object Object]"}class uh extends Te{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===te.BINARY_EVENT;r||n.type===te.BINARY_ACK?(n.type=r?te.EVENT:te.ACK,this.reconstructor=new Hk(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(ch(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(te[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===te.BINARY_EVENT||r.type===te.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(i,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(uh.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case te.CONNECT:return wp(n);case te.DISCONNECT:return n===void 0;case te.CONNECT_ERROR:return typeof n=="string"||wp(n);case te.EVENT:case te.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Mk.indexOf(n[0])===-1);case te.ACK:case te.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Hk{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=$k(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Wk=Object.freeze(Object.defineProperty({__proto__:null,Decoder:uh,Encoder:zk,get PacketType(){return te},protocol:Vk},Symbol.toStringTag,{value:"Module"}));function $t(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const qk=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class $v extends Te{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$t(e,"open",this.onopen.bind(this)),$t(e,"packet",this.onpacket.bind(this)),$t(e,"error",this.onerror.bind(this)),$t(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,s,i;if(qk.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:te.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,h=n.pop();this._registerAckCallback(d,h),o.id=d}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...n){return new Promise((r,s)=>{const i=(o,a)=>o?s(o):r(a);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case te.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case te.EVENT:case te.BINARY_EVENT:this.onevent(e);break;case te.ACK:case te.BINARY_ACK:this.onack(e);break;case te.DISCONNECT:this.ondisconnect();break;case te.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:te.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Cs(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Cs.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Cs.prototype.reset=function(){this.attempts=0};Cs.prototype.setMin=function(t){this.ms=t};Cs.prototype.setMax=function(t){this.max=t};Cs.prototype.setJitter=function(t){this.jitter=t};class Au extends Te{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,sl(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Cs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||Wk;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ok(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=$t(n,"open",function(){r.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=$t(n,"error",i);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($t(e,"ping",this.onping.bind(this)),$t(e,"data",this.ondata.bind(this)),$t(e,"error",this.onerror.bind(this)),$t(e,"close",this.onclose.bind(this)),$t(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){rl(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new $v(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const zs={};function Jo(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Lk(t,e.path||"/socket.io"),r=n.source,s=n.id,i=n.path,o=zs[s]&&i in zs[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new Au(r,e):(zs[s]||(zs[s]=new Au(r,e)),l=zs[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Jo,{Manager:Au,Socket:$v,io:Jo,connect:Jo});const Mv=w.createContext(void 0),nr=()=>{const t=w.useContext(Mv);if(!t)throw new Error("useSocket must be used within a LazySocketProvider");return t},Gk=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(null),[i,o]=w.useState(!1),[a,l]=w.useState(!1),u=w.useRef(null),d=w.useRef(0),h=3,f=w.useRef(null),g=w.useRef(!1),m=w.useRef(null),v=w.useRef(null),S=w.useCallback(()=>{const T={}.REACT_APP_SERVER_URL||{}.REACT_APP_GAMEBUDDIES_API_URL;return T||(typeof window<"u"&&(window.location.hostname==="gamebuddies.io"||window.location.hostname.includes("gamebuddies-client")||window.location.hostname.includes("onrender.com")||window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1")||typeof window<"u"?window.location.origin:"http://localhost:3033")},[]),x=w.useCallback(T=>{T?(console.log(" [LazySocketProvider] Storing room info for auto-rejoin:",T.roomCode),m.current=T):(console.log(" [LazySocketProvider] Clearing stored room info"),m.current=null)},[]),y=w.useCallback(()=>{m.current=null},[]),p=w.useCallback(T=>{var A;T&&(v.current=T,(A=f.current)!=null&&A.connected&&(console.log(" [LazySocketProvider] Identifying user to server:",T),f.current.emit("user:identify",T)))},[]),_=w.useCallback(()=>{v.current=null},[]),b=w.useCallback(()=>{if(d.current>=h){console.log(" [LazySocketProvider] Max reconnection attempts reached. Stopping reconnection."),l(!1);return}d.current++;const T=Math.pow(2,d.current)*1e3;console.log(` [LazySocketProvider] Reconnection attempt ${d.current}/${h} in ${T}ms`),u.current=setTimeout(()=>{f.current&&!f.current.connected&&!i&&(console.log(" [LazySocketProvider] Attempting reconnection..."),f.current.connect())},T)},[i]),k=w.useCallback(()=>{var N;if(g.current||(N=f.current)!=null&&N.connected)return console.log(" [LazySocketProvider] Already connecting/connected, returning existing socket"),f.current;g.current=!0;const T=S();console.log(" [LazySocketProvider] Connecting to server:",T),l(!0);const A=({}.REACT_APP_SOCKET_TRANSPORTS||"").split(",").map(R=>R.trim()).filter(Boolean),j=Jo(T,{transports:A.length?A:["polling","websocket"],timeout:2e4,reconnection:!1,forceNew:!1,autoConnect:!1});return j.on("connect",()=>{console.log(" [LazySocketProvider] Connected to server. Socket ID:",j.id),g.current=!1,n(j),s(j.id??null),o(!0),l(!1);const R=d.current>0;d.current=0,u.current&&(clearTimeout(u.current),u.current=null),v.current&&(console.log(" [LazySocketProvider] Auto-identifying user on connect:",v.current),j.emit("user:identify",v.current)),R&&m.current&&(console.log(" [LazySocketProvider] Auto-rejoining room after reconnect:",m.current.roomCode),j.emit("joinRoom",{roomCode:m.current.roomCode,playerName:m.current.playerName,customLobbyName:m.current.customLobbyName,supabaseUserId:m.current.supabaseUserId}))}),j.on("disconnect",R=>{console.log(" [LazySocketProvider] Disconnected from server. Reason:",R),g.current=!1,o(!1),l(!1),R==="io server disconnect"?(console.log(" [LazySocketProvider] Server initiated disconnect, attempting reconnection..."),b()):(R==="transport close"||R==="transport error")&&(console.log(" [LazySocketProvider] Transport issue, attempting reconnection..."),b())}),j.on("connect_error",R=>{console.error(" [LazySocketProvider] Connection error:",R),g.current=!1,o(!1),l(!1),b()}),f.current=j,j.connect(),j},[S,i,b]),C=w.useCallback(T=>{var j;if(!T)return null;v.current=T;const A=(j=f.current)!=null&&j.connected?f.current:k();return A!=null&&A.connected&&(console.log(" [LazySocketProvider] connectForUser - Already connected, identifying:",T),A.emit("user:identify",T)),A},[k]),E=w.useCallback(()=>{f.current&&(console.log(" [LazySocketProvider] Disconnecting socket"),u.current&&(clearTimeout(u.current),u.current=null),m.current=null,f.current.disconnect(),f.current=null,n(null),s(null),o(!1),l(!1),g.current=!1,d.current=0)},[]);w.useEffect(()=>()=>{console.log(" [LazySocketProvider] Component unmounting, cleaning up..."),E()},[E]);const O=w.useMemo(()=>({socket:e,socketRef:f,socketId:r,isConnected:i,isConnecting:a,connectSocket:k,disconnectSocket:E,setLastRoom:x,clearLastRoom:y,connectForUser:C,identifyUser:p,clearAuthenticatedUser:_}),[e,r,i,a,k,E,x,y,C,p,_]);return c.jsx(Mv.Provider,{value:O,children:t})},Vv=w.createContext(void 0),il=()=>{const t=w.useContext(Vv);if(!t)throw new Error("useNotification must be used within NotificationProvider");return t},Kk=({children:t})=>{const[e,n]=w.useState(null),r=w.useRef(null),s=w.useCallback((a,l="info")=>{r.current&&clearTimeout(r.current),n({message:a,type:l}),r.current=setTimeout(()=>{n(null),r.current=null},5e3)},[]),i=w.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null),n(null)},[]);w.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]);const o=w.useMemo(()=>({notification:e,addNotification:s,clearNotification:i}),[e,s,i]);return c.jsx(Vv.Provider,{value:o,children:t})},Jk="modulepreload",Qk=function(t){return"/"+t},xp={},qi=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Qk(i),i in xp)return;xp[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Jk,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Yk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class dh extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Xk extends dh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Zk extends dh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class e1 extends dh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ou;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ou||(Ou={}));var t1=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class n1{constructor(e,{headers:n={},customFetch:r,region:s=Ou.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=Yk(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return t1(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(m=>{throw new Xk(m)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Zk(d);if(!d.ok)throw new e1(d);let f=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield d.json():f==="application/octet-stream"?g=yield d.blob():f==="text/event-stream"?g=d:f==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var lt={},hh={},ol={},Gi={},al={},ll={},r1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},vs=r1();const s1=vs.fetch,zv=vs.fetch.bind(vs),Hv=vs.Headers,i1=vs.Request,o1=vs.Response,Ps=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hv,Request:i1,Response:o1,default:zv,fetch:s1},Symbol.toStringTag,{value:"Module"})),a1=_x(Ps);var cl={};Object.defineProperty(cl,"__esModule",{value:!0});let l1=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};cl.default=l1;var Wv=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});const c1=Wv(a1),u1=Wv(cl);let d1=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=c1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,h=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),S=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");v&&S&&S.length>1&&(h=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,g="OK")}catch{i.status===404&&v===""?(f=204,g="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,g="OK"),u&&this.shouldThrowOnError)throw new u1.default(u)}return{error:u,data:d,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ll.default=d1;var h1=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(al,"__esModule",{value:!0});const f1=h1(ll);let p1=class extends f1.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};al.default=p1;var m1=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});const g1=m1(al);let y1=class extends g1.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Gi.default=y1;var v1=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ol,"__esModule",{value:!0});const Hs=v1(Gi);let w1=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new Hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Hs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Hs.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new Hs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Hs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ol.default=w1;var ul={},dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.version=void 0;dl.version="0.0.0-automated";Object.defineProperty(ul,"__esModule",{value:!0});ul.DEFAULT_HEADERS=void 0;const x1=dl;ul.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${x1.version}`};var qv=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hh,"__esModule",{value:!0});const S1=qv(ol),_1=qv(Gi),b1=ul;let k1=class Gv{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},b1.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new S1.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Gv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new _1.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};hh.default=k1;var Ts=Nt&&Nt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lt,"__esModule",{value:!0});lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const Kv=Ts(hh);lt.PostgrestClient=Kv.default;const Jv=Ts(ol);lt.PostgrestQueryBuilder=Jv.default;const Qv=Ts(Gi);lt.PostgrestFilterBuilder=Qv.default;const Yv=Ts(al);lt.PostgrestTransformBuilder=Yv.default;const Xv=Ts(ll);lt.PostgrestBuilder=Xv.default;const Zv=Ts(cl);lt.PostgrestError=Zv.default;var j1=lt.default={PostgrestClient:Kv.default,PostgrestQueryBuilder:Jv.default,PostgrestFilterBuilder:Qv.default,PostgrestTransformBuilder:Yv.default,PostgrestBuilder:Xv.default,PostgrestError:Zv.default};const{PostgrestClient:E1,PostgrestQueryBuilder:GA,PostgrestFilterBuilder:KA,PostgrestTransformBuilder:JA,PostgrestBuilder:QA,PostgrestError:YA}=j1;let Lu;typeof window>"u"?Lu=require("ws"):Lu=window.WebSocket;const C1=Lu,P1="2.11.10",T1={"X-Client-Info":`realtime-js/${P1}`},N1="1.0.0",e0=1e4,R1=1e3;var us;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(us||(us={}));var et;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(et||(et={}));var Mt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Mt||(Mt={}));var Iu;(function(t){t.websocket="websocket"})(Iu||(Iu={}));var mr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(mr||(mr={}));class A1{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class t0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ae||(ae={}));const Sp=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=O1(o,t,e,s),i),{})},O1=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?n0(i,o):Du(o)},n0=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return U1(e,n)}switch(t){case ae.bool:return L1(e);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return I1(e);case ae.json:case ae.jsonb:return D1(e);case ae.timestamp:return F1(e);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return Du(e);default:return Du(e)}},Du=t=>t,L1=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I1=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},D1=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},U1=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>n0(e,a))}return t},F1=t=>typeof t=="string"?t.replace(" ","T"):t,r0=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ac{constructor(e,n,r={},s=e0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _p;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_p||(_p={}));class di{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=di.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=di.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=di.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(S=>S.presence_ref),g=h.map(S=>S.presence_ref),m=d.filter(S=>g.indexOf(S.presence_ref)<0),v=h.filter(S=>f.indexOf(S.presence_ref)<0);m.length>0&&(a[u]=m),v.length>0&&(l[u]=v)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bp;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bp||(bp={}));var kp;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(kp||(kp={}));var an;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(an||(an={}));class fh{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ac(this,Mt.join,this.params,this.timeout),this.rejoinTimer=new t0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new di(this),this.broadcastEndpointURL=r0(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(an.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(an.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(an.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,g=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,m=[];for(let v=0;v<g;v++){const S=f[v],{filter:{event:x,schema:y,table:p,filter:_}}=S,b=d&&d[v];if(b&&b.event===x&&b.schema===y&&b.table===p&&b.filter===_)m.push(Object.assign(Object.assign({},S),{id:b.id}));else{this.unsubscribe(),this.state=et.errored,e==null||e(an.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(an.SUBSCRIBED);return}}).receive("error",d=>{this.state=et.errored,e==null||e(an.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(an.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new ac(this,Mt.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ac(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Mt;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var m,v,S;return((m=g.filter)===null||m===void 0?void 0:m.event)==="*"||((S=(v=g.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(g=>g.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var m,v,S,x,y,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const _=g.id,b=(m=g.filter)===null||m===void 0?void 0:m.event;return _&&((v=n.ids)===null||v===void 0?void 0:v.includes(_))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const _=(y=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return _==="*"||_===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:v,table:S,commit_timestamp:x,type:y,errors:p}=m;f=Object.assign(Object.assign({},{schema:v,table:S,commit_timestamp:x,eventType:y,new:{},old:{},errors:p}),this._getPayloadRecords(m))}g.callback(f,r)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&fh.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mt.close,{},e)}_onError(e){this._on(Mt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Sp(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Sp(e.columns,e.old_record)),n}}const jp=()=>{},B1=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $1{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=T1,this.params={},this.timeout=e0,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jp,this.ref=0,this.logger=jp,this.conn=null,this.sendBuffer=[],this.serializer=new A1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>qi(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Iu.websocket}`,this.httpEndpoint=r0(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new t0(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=C1),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new M1(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:N1}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case us.connecting:return mr.Connecting;case us.open:return mr.Open;case us.closing:return mr.Closing;default:return mr.Closed}}isConnected(){return this.connectionState()===mr.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new fh(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Mt.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(R1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([B1],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class M1{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=us.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class ph extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function De(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class V1 extends ph{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Uu extends ph{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var z1=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const s0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},H1=()=>z1(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qi(()=>Promise.resolve().then(()=>Ps),void 0)).Response:Response}),Fu=t=>{if(Array.isArray(t))return t.map(n=>Fu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Fu(r)}),e};var Rr=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const lc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),W1=(t,e,n)=>Rr(void 0,void 0,void 0,function*(){const r=yield H1();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new V1(lc(s),t.status||500))}).catch(s=>{e(new Uu(lc(s),s))}):e(new Uu(lc(t),t))}),q1=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Ki(t,e,n,r,s,i){return Rr(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,q1(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>W1(l,a,r))})})}function Pa(t,e,n,r){return Rr(this,void 0,void 0,function*(){return Ki(t,"GET",e,n,r)})}function Cn(t,e,n,r,s){return Rr(this,void 0,void 0,function*(){return Ki(t,"POST",e,r,s,n)})}function G1(t,e,n,r,s){return Rr(this,void 0,void 0,function*(){return Ki(t,"PUT",e,r,s,n)})}function K1(t,e,n,r){return Rr(this,void 0,void 0,function*(){return Ki(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function i0(t,e,n,r,s){return Rr(this,void 0,void 0,function*(){return Ki(t,"DELETE",e,r,s,n)})}var ot=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const J1={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ep={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Q1{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=s0(s)}uploadOrUpdate(e,n,r,s){return ot(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ep),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(De(i))return{data:null,error:i};throw i}})}upload(e,n,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ot(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Ep.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(De(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return ot(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Cn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ph("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}update(e,n,r){return ot(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ot(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ot(this,void 0,void 0,function*(){try{return{data:{path:(yield Cn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ot(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Cn(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ot(this,void 0,void 0,function*(){try{const s=yield Cn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}download(e,n){return ot(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Pa(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}})}info(e){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Pa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Fu(r),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}exists(e){return ot(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield K1(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(De(r)&&r instanceof Uu){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return ot(this,void 0,void 0,function*(){try{return{data:yield i0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}list(e,n,r){return ot(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},J1),n),{prefix:e||""});return{data:yield Cn(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(De(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Y1="2.7.1",X1={"X-Client-Info":`storage-js/${Y1}`};var Ir=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Z1{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},X1),n),this.fetch=s0(r)}listBuckets(){return Ir(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(De(e))return{data:null,error:e};throw e}})}getBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ir(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ir(this,void 0,void 0,function*(){try{return{data:yield G1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(De(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield Cn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ir(this,void 0,void 0,function*(){try{return{data:yield i0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(De(n))return{data:null,error:n};throw n}})}}class ej extends Z1{constructor(e,n={},r){super(e,n,r)}from(e){return new Q1(this.url,this.headers,e,this.fetch)}}const tj="2.50.0";let ei="";typeof Deno<"u"?ei="deno":typeof document<"u"?ei="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ei="react-native":ei="node";const nj={"X-Client-Info":`supabase-js-${ei}/${tj}`},rj={headers:nj},sj={schema:"public"},ij={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oj={};var aj=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const lj=t=>{let e;return t?e=t:typeof fetch>"u"?e=zv:e=fetch,(...n)=>e(...n)},cj=()=>typeof Headers>"u"?Hv:Headers,uj=(t,e,n)=>{const r=lj(n),s=cj();return(i,o)=>aj(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var dj=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function hj(t){return t.endsWith("/")?t:t+"/"}function fj(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>dj(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const o0="2.70.0",Br=30*1e3,Bu=3,cc=Bu*Br,pj="http://localhost:9999",mj="supabase.auth.token",gj={"X-Client-Info":`gotrue-js/${o0}`},$u="X-Supabase-Api-Version",a0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vj=6e5;class mh extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class wj extends mh{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function xj(t){return Q(t)&&t.name==="AuthApiError"}class l0 extends mh{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class rr extends mh{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class bn extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sj(t){return Q(t)&&t.name==="AuthSessionMissingError"}class _o extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bo extends rr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ko extends rr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _j(t){return Q(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cp extends rr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mu extends rr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function uc(t){return Q(t)&&t.name==="AuthRetryableFetchError"}class Pp extends rr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class hi extends rr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ta="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tp=` 	
\r=`.split(""),bj=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Tp.length;e+=1)t[Tp[e].charCodeAt(0)]=-2;for(let e=0;e<Ta.length;e+=1)t[Ta[e].charCodeAt(0)]=e;return t})();function Np(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ta[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ta[r]),e.queuedBits-=6}}function c0(t,e,n){const r=bj[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Rp(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Ej(o,r,n)};for(let o=0;o<t.length;o+=1)c0(t.charCodeAt(o),s,i);return e.join("")}function kj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function jj(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}kj(r,e)}}function Ej(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Cj(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)c0(t.charCodeAt(s),n,r);return new Uint8Array(e)}function Pj(t){const e=[];return jj(t,n=>e.push(n)),new Uint8Array(e)}function Tj(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>Np(s,n,r)),Np(null,n,r),e.join("")}function Nj(t){return Math.round(Date.now()/1e3)+t}function Rj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ut=()=>typeof window<"u"&&typeof document<"u",or={tested:!1,writable:!1},fi=()=>{if(!Ut())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(or.tested)return or.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),or.tested=!0,or.writable=!0}catch{or.tested=!0,or.writable=!1}return or.writable};function Aj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const u0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qi(()=>Promise.resolve().then(()=>Ps),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Oj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",d0=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},jo=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Eo=async(t,e)=>{await t.removeItem(e)};class hl{constructor(){this.promise=new hl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}hl.promiseConstructor=Promise;function dc(t){const e=t.split(".");if(e.length!==3)throw new hi("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!yj.test(e[r]))throw new hi("JWT not in base64url format");return{header:JSON.parse(Rp(e[0])),payload:JSON.parse(Rp(e[1])),signature:Cj(e[2]),raw:{header:e[0],payload:e[1]}}}async function Lj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Ij(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Dj(t){return("0"+t.toString(16)).substr(-2)}function Uj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Dj).join("")}async function Fj(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Bj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Fj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(t,e,n=!1){const r=Uj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await d0(t,`${e}-code-verifier`,s);const i=await Bj(r);return[i,r===i?"plain":"s256"]}const $j=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mj(t){const e=t.headers.get($u);if(!e||!e.match($j))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Vj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function zj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Hj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ur(t){if(!Hj.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var Wj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const dr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),qj=[502,503,504];async function Ap(t){var e;if(!Oj(t))throw new Mu(dr(t),0);if(qj.includes(t.status))throw new Mu(dr(t),t.status);let n;try{n=await t.json()}catch(i){throw new l0(dr(i),i)}let r;const s=Mj(t);if(s&&s.getTime()>=a0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pp(dr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Pp(dr(n),t.status,n.weak_password.reasons);throw new wj(dr(n),t.status||500,r)}const Gj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function X(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[$u]||(i[$u]=a0["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Kj(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Kj(t,e,n,r,s,i){const o=Gj(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Mu(dr(l),0)}if(a.ok||await Ap(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ap(l)}}function sn(t){var e;let n=null;Xj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Nj(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Op(t){const e=sn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Jj(t){return{data:t,error:null}}function Qj(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=Wj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Yj(t){return t}function Xj(t){return t.access_token&&t.refresh_token&&t.expires_in}const hc=["global","local","others"];var Zj=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class eE{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=u0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=hc[0]){if(hc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${hc.join(", ")}`);try{return await X(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await X(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Zj(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await X(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Qj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Q(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await X(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await X(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Yj});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(m=>{const v=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(m.split(";")[1].split("=")[1]);u[`${S}Page`]=v}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Q(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ur(e);try{return await X(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rn})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ur(e);try{return await X(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ur(e);try{return await X(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rn})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ur(e.userId);try{const{data:n,error:r}=await X(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ur(e.userId),Ur(e.id);try{return{data:await X(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}const tE={getItem:t=>fi()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{fi()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{fi()&&globalThis.localStorage.removeItem(t)}};function Lp(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function nE(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fr={debug:!!(globalThis&&fi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class h0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class rE extends h0{}async function sE(t,e,n){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new rE(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}nE();const iE={url:pj,storageKey:mj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ip(t,e,n){return await n()}class Ui{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ui.nextInstanceID,Ui.nextInstanceID+=1,this.instanceID>0&&Ut()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},iE),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new eE({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=u0(s.fetch),this.lock=s.lock||Ip,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ut()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=sE:this.lock=Ip,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:fi()?this.storage=tE:(this.memoryStorage={},this.storage=Lp(this.memoryStorage)):(this.memoryStorage={},this.storage=Lp(this.memoryStorage)),Ut()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${o0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Aj(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ut()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_j(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Q(n)?{error:n}:{error:new l0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:sn}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await Dr(this.storage,this.storageKey)),i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:m},xform:sn})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await X(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:sn})}else throw new bo("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Op})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await X(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Op})}else throw new bo("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _o}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,d,h,f,g;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:S,wallet:x,statement:y,options:p}=e;let _;if(Ut())if(typeof x=="object")_=x;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))_=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const b=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in _&&_.signIn){const k=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),y?{statement:y}:null));let C;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")C=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)C=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)m=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),v=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${b.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(r=p==null?void 0:p.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((h=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...p.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const k=await _.signMessage(new TextEncoder().encode(m),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:S,error:x}=await X(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Tj(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:sn});if(x)throw x;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new _o}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:x})}catch(S){if(Q(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(e){const n=await jo(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await X(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:sn});if(await Eo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new _o}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await X(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:sn}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new _o}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Dr(this.storage,this.storageKey));const{error:h}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await X(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new bo("You must provide either an email or phone number.")}catch(a){if(Q(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:sn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Dr(this.storage,this.storageKey)),await X(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Jj})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new bn;const{error:s}=await X(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Q(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await X(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await X(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new bo("You must provide either an email or phone number and a type")}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await jo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<cc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rn}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bn}:await X(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rn})})}catch(n){if(Q(n))return Sj(n)&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new bn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Dr(this.storage,this.storageKey));const{data:u,error:d}=await X(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Rn});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=dc(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Q(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bn;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Q(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ut())throw new ko("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ko(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cp("No code detected.");const{data:y,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new ko("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const g=f-d;g*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);const{data:v,error:S}=await this._getUser(i);if(S)throw S;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Q(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await jo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(xj(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Eo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Rj(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Dr(this.storage,this.storageKey,!0));try{return await X(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:h,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await X(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ut()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Q(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await X(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Ij(async s=>(s>0&&await Lj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await X(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:sn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&uc(i)&&Date.now()+o-r<Br})}catch(r){if(this._debug(n,"error",r),Q(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ut()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await jo(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<cc;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${cc}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),uc(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new bn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new hl;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new bn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return uc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await d0(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Eo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ut()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Br}ms, refresh threshold is ${Bu} ticks`),s<=Bu&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof h0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ut()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Dr(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await X(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await X(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Q(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=dc(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+vj>Date.now()))return r;const{data:s,error:i}=await X(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new hi("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new hi("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:g,error:m}=await this.getSession();if(m||!g.session)return{data:null,error:m};r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=dc(r);if(Vj(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const u=zj(s.alg),d=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Pj(`${a}.${l}`)))throw new hi("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}Ui.nextInstanceID=0;const oE=Ui;class aE extends oE{constructor(e){super(e)}}var lE=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class cE{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=hj(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:sj,realtime:oj,auth:Object.assign(Object.assign({},ij),{storageKey:u}),global:rj},h=fj(r??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=uj(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new E1(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new n1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ej(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return lE(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aE({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $1(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const uE=(t,e,n)=>new cE(t,e,n),dE=async()=>{const t=Date.now();try{console.log(" [SUPABASE] Fetching config from server...",{timestamp:new Date().toISOString()});const e=await fetch("/api/supabase-config");if(!e.ok)throw new Error("Failed to fetch Supabase config");const n=await e.json();return console.log(" [SUPABASE] Config fetched successfully",{took:`${Date.now()-t}ms`,hasUrl:!!(n!=null&&n.url),hasKey:!!(n!=null&&n.anonKey)}),n}catch(e){return console.error(" Failed to get Supabase config from server:",e,{took:`${Date.now()-t}ms`}),null}};let Xr=null,Co=null;const hE=async()=>Xr||Co||(Co=(async()=>{try{const t=await dE();return!t||!t.url||!t.anonKey?(console.error(" Cannot initialize Supabase client - invalid config:",t),null):(Xr=uE(t.url,t.anonKey,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"gamebuddies-auth",flowType:"pkce"},realtime:{params:{eventsPerSecond:10}}}),console.log(" Supabase client initialized for frontend"),Xr)}catch(t){return console.error(" Error initializing Supabase client:",t),null}})(),Co),Be=async()=>(Xr||await hE(),Xr),f0=w.createContext(void 0),fE=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(null),[i,o]=w.useState(!0),a=w.useRef(0),l=w.useRef(null),u=async(g,m)=>{const v=Date.now();if(g===l.current&&v-a.current<2e3){console.log(" [AUTH] Skipping redundant user fetch (throttled)");return}a.current=v,l.current=g;try{if(console.log(" [AUTH] Fetching user from database:",g),!m)throw console.error(" [AUTH] No access token provided to fetchUser"),new Error("No authentication token");const S=`/api/users/${g}`,x=await fetch(S,{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});if(!x.ok){const p=await x.json().catch(()=>({error:"Unknown error"}));if(console.error(" [AUTH] Fetch user failed:",x.status,p),x.status===401){console.warn(" [AUTH] Token invalid/expired, clearing session..."),localStorage.removeItem("gamebuddies-auth"),s(null),n(null);return}throw new Error(p.error||"Failed to fetch user")}const y=await x.json();console.log(" [AUTH] User data loaded:",{id:y.user.id,username:y.user.username,premium:y.user.premium_tier}),n(y.user)}catch(S){console.error(" [AUTH] Failed to fetch user:",S)}};w.useEffect(()=>{const g=async()=>{try{console.log(" [AUTH] Initializing auth...");const S=await Be(),x="gamebuddies-auth",y=localStorage.getItem(x);if(y)try{const _=JSON.parse(y);_!=null&&_.access_token&&(_!=null&&_.user)&&(console.log(" [AUTH] Found cached session in localStorage"),s(_),await u(_.user.id,_.access_token))}catch{console.warn(" [AUTH] Failed to parse cached session")}const{data:{subscription:p}}=S.auth.onAuthStateChange((_,b)=>{console.log(" [AUTH] State changed:",_,b?"authenticated":"guest"),s(b),b?u(b.user.id,b.access_token):n(null),o(!1)});return o(!1),S.auth.getSession().then(({data:{session:_},error:b})=>{b?console.error(" [AUTH] Session validation error:",b):(s(_),_?u(_.user.id,_.access_token):n(null))}).catch(_=>{console.error(" [AUTH] getSession failed:",_)}),()=>{p.unsubscribe()}}catch(S){console.error(" [AUTH] Init error:",S),o(!1)}},m=()=>{sessionStorage.getItem("gamebuddies-session-temp")&&(localStorage.removeItem("gamebuddies-auth"),console.log(" [AUTH] Cleared temporary session on browser close"))};window.addEventListener("beforeunload",m);let v;return g().then(S=>{v=S}),()=>{window.removeEventListener("beforeunload",m),v&&v()}},[]);const d=w.useCallback(async()=>{try{console.log(" [AUTH] Signing out..."),n(null),s(null),localStorage.removeItem("gamebuddies-auth");const g=await Be(),{error:m}=await g.auth.signOut();m&&console.error(" [AUTH] Sign out error:",m),console.log(" [AUTH] Signed out successfully")}catch(g){console.error(" [AUTH] Sign out failed:",g)}},[]),h=w.useCallback(async()=>{r&&await u(r.user.id,r.access_token)},[r]),f={user:e,session:r,loading:i,signOut:d,refreshUser:h,isAuthenticated:!!r,isGuest:!r,isPremium:!!(e&&e.premium_tier&&e.premium_tier!=="free"),supabaseUser:(r==null?void 0:r.user)||null};return c.jsx(f0.Provider,{value:f,children:t})},Ot=()=>{const t=w.useContext(f0);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},p0=w.createContext(void 0),pE=({children:t})=>{const{user:e,session:n}=Ot(),{socket:r,connectForUser:s}=nr(),[i,o]=w.useState({roomCode:null,gameName:null,gameThumbnail:null}),a=!!i.roomCode,l=i.roomCode,u=i.gameName||"Current Game",d=i.gameThumbnail,h=w.useCallback((R,F=null,U=null)=>{o(W=>W.roomCode===R&&W.gameName===F&&W.gameThumbnail===U?W:{roomCode:R,gameName:F,gameThumbnail:U})},[]),[f,g]=w.useState([]),[m,v]=w.useState([]),[S,x]=w.useState(new Set),[y,p]=w.useState(!1),[_,b]=w.useState([]),k=w.useCallback(async()=>{if(!(!e||!n)){p(!0);try{const R={Authorization:`Bearer ${n.access_token}`,"Content-Type":"application/json"},[F,U]=await Promise.all([fetch("/api/friends",{headers:R}),fetch("/api/friends/pending",{headers:R})]);if(F.ok){const W=await F.json();g(W.friends||[])}if(U.ok){const W=await U.json();v(W.pending||[])}}catch(R){console.error(" [FRIENDS] Fetch error:",R)}finally{p(!1)}}},[e,n]);w.useEffect(()=>{if(!e){g([]),v([]),x(new Set);return}if(s(e.id),!r)return;const R=({onlineUserIds:V})=>{console.log(" [FRIENDS] Received online list:",V),x(new Set(V))},F=({userId:V})=>{console.log(" [FRIENDS] Friend came online:",V),x($=>{const G=new Set($);return G.add(V),G})},U=({userId:V})=>{console.log(" [FRIENDS] Friend went offline:",V),x($=>{const G=new Set($);return G.delete(V),G})},W=V=>{console.log(" [FRIENDS] Game invite received:",V),b($=>[...$,{...V,id:Date.now()}])},L=()=>{k()},M=()=>{k()};return r.on("friend:list-online",R),r.on("friend:online",F),r.on("friend:offline",U),r.on("game:invite_received",W),r.on("friend:request_received",L),r.on("friend:accepted",M),k(),()=>{r.off("friend:list-online",R),r.off("friend:online",F),r.off("friend:offline",U),r.off("game:invite_received",W),r.off("friend:request_received",L),r.off("friend:accepted",M)}},[e,r,s,k]);const C=async R=>{try{const F=await fetch("/api/friends/request",{method:"POST",headers:{Authorization:`Bearer ${n==null?void 0:n.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({username:R})}),U=await F.json();if(!F.ok)throw new Error(U.error);return k(),{success:!0,message:U.message}}catch(F){return{success:!1,error:F.message}}},E=async R=>{try{const F=await fetch(`/api/friends/${R}/accept`,{method:"PUT",headers:{Authorization:`Bearer ${n==null?void 0:n.access_token}`}}),U=await F.json();if(!F.ok)throw new Error(U.error);return k(),{success:!0}}catch(F){return{success:!1,error:F.message}}},O=async R=>{try{const F=await fetch(`/api/friends/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${n==null?void 0:n.access_token}`}}),U=await F.json();if(!F.ok)throw new Error(U.error);return k(),{success:!0}}catch(F){return{success:!1,error:F.message}}},N={friends:f,pendingRequests:m,onlineFriends:S,loading:y,gameInvites:_,sendFriendRequest:C,acceptFriendRequest:E,rejectFriendRequest:O,removeFriend:async R=>O(R),inviteFriend:(R,F,U,W=null)=>{if(console.log(" [FRIENDS] inviteFriend called:",{friendId:R,roomId:F,gameName:U,gameThumbnail:W}),!r){console.warn(" [FRIENDS] Cannot send invite - socket not connected");return}const L={targetUserId:R,roomCode:F,gameName:U||"Unknown Game",gameThumbnail:W||void 0};console.log(" [FRIENDS] Emitting game:invite with data:",L),r.emit("game:invite",L)},dismissInvite:R=>{b(F=>F.filter(U=>U.id!==R))},fetchFriends:k,isCurrentlyInLobby:a,currentRoomCode:l,currentLobbyGameName:u,currentLobbyThumbnail:d,updateLobbyInfo:h};return c.jsx(p0.Provider,{value:N,children:t})},fl=()=>{const t=w.useContext(p0);if(!t)throw new Error("useFriends must be used within FriendProvider");return t};const mE=()=>{const{notification:t,clearNotification:e}=il();if(!t)return null;const{message:n,type:r}=t;return c.jsxs("div",{className:`notification-banner notification-${r}`,children:[c.jsx("span",{className:"notification-message",children:n}),c.jsx("button",{onClick:e,className:"notification-close-btn",children:""})]})},m0=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),pl=w.createContext({}),ml=w.createContext(null),gl=typeof document<"u",gh=gl?w.useLayoutEffect:w.useEffect,g0=w.createContext({strict:!1}),yh=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),gE="framerAppearId",y0="data-"+yh(gE);function yE(t,e,n,r){const{visualElement:s}=w.useContext(pl),i=w.useContext(g0),o=w.useContext(ml),a=w.useContext(m0).reducedMotion,l=w.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;w.useInsertionEffect(()=>{u&&u.update(n,o)});const d=w.useRef(!!(n[y0]&&!window.HandoffComplete));return gh(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),w.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Zr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vE(t,e,n){return w.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zr(n)&&(n.current=r))},[e])}function Fi(t){return typeof t=="string"||Array.isArray(t)}function yl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const vh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wh=["initial",...vh];function vl(t){return yl(t.animate)||wh.some(e=>Fi(t[e]))}function v0(t){return!!(vl(t)||t.variants)}function wE(t,e){if(vl(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fi(n)?n:void 0,animate:Fi(r)?r:void 0}}return t.inherit!==!1?e:{}}function xE(t){const{initial:e,animate:n}=wE(t,w.useContext(pl));return w.useMemo(()=>({initial:e,animate:n}),[Dp(e),Dp(n)])}function Dp(t){return Array.isArray(t)?t.join(" "):t}const Up={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bi={};for(const t in Up)Bi[t]={isEnabled:e=>Up[t].some(n=>!!e[n])};function SE(t){for(const e in t)Bi[e]={...Bi[e],...t[e]}}const xh=w.createContext({}),w0=w.createContext({}),_E=Symbol.for("motionComponentSymbol");function bE({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&SE(t);function i(a,l){let u;const d={...w.useContext(m0),...a,layoutId:kE(a)},{isStatic:h}=d,f=xE(a),g=r(a,h);if(!h&&gl){f.visualElement=yE(s,g,d,e);const m=w.useContext(w0),v=w.useContext(g0).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,v,t,m))}return w.createElement(pl.Provider,{value:f},u&&f.visualElement?w.createElement(u,{visualElement:f.visualElement,...d}):null,n(s,a,vE(g,f.visualElement,l),g,h,f.visualElement))}const o=w.forwardRef(i);return o[_E]=s,o}function kE({layoutId:t}){const e=w.useContext(xh).id;return e&&t!==void 0?e+"-"+t:t}function jE(t){function e(r,s={}){return bE(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const EE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sh(t){return typeof t!="string"||t.includes("-")?!1:!!(EE.indexOf(t)>-1||/[A-Z]/.test(t))}const Na={};function CE(t){Object.assign(Na,t)}const Ji=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ar=new Set(Ji);function x0(t,{layout:e,layoutId:n}){return Ar.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Na[t]||t==="opacity")}const pt=t=>!!(t&&t.getVelocity),PE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TE=Ji.length;function NE(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<TE;o++){const a=Ji[o];if(t[a]!==void 0){const l=PE[a]||a;i+=`${l}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const S0=t=>e=>typeof e=="string"&&e.startsWith(t),_0=S0("--"),Vu=S0("var(--"),RE=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,AE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Jn=(t,e,n)=>Math.min(Math.max(n,t),e),Or={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},pi={...Or,transform:t=>Jn(0,1,t)},Po={...Or,default:1},mi=t=>Math.round(t*1e5)/1e5,wl=/(-)?([\d]*\.?[\d])+/g,b0=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,OE=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qi(t){return typeof t=="string"}const Yi=t=>({test:e=>Qi(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kn=Yi("deg"),en=Yi("%"),q=Yi("px"),LE=Yi("vh"),IE=Yi("vw"),Fp={...en,parse:t=>en.parse(t)/100,transform:t=>en.transform(t*100)},Bp={...Or,transform:Math.round},k0={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,size:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,rotate:kn,rotateX:kn,rotateY:kn,rotateZ:kn,scale:Po,scaleX:Po,scaleY:Po,scaleZ:Po,skew:kn,skewX:kn,skewY:kn,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:pi,originX:Fp,originY:Fp,originZ:q,zIndex:Bp,fillOpacity:pi,strokeOpacity:pi,numOctaves:Bp};function _h(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let l=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(_0(h)){i[h]=f;continue}const g=k0[h],m=AE(f,g);if(Ar.has(h)){if(l=!0,o[h]=m,!d)continue;f!==(g.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=m):s[h]=m}if(e.transform||(l||r?s.transform=NE(t.transform,n,d,r):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=a;s.transformOrigin=`${h} ${f} ${g}`}}const bh=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function j0(t,e,n){for(const r in e)!pt(e[r])&&!x0(r,n)&&(t[r]=e[r])}function DE({transformTemplate:t},e,n){return w.useMemo(()=>{const r=bh();return _h(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function UE(t,e,n){const r=t.style||{},s={};return j0(s,r,t),Object.assign(s,DE(t,e,n)),t.transformValues?t.transformValues(s):s}function FE(t,e,n){const r={},s=UE(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const BE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ra(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BE.has(t)}let E0=t=>!Ra(t);function $E(t){t&&(E0=e=>e.startsWith("on")?!Ra(e):t(e))}try{$E(require("@emotion/is-prop-valid").default)}catch{}function ME(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(E0(s)||n===!0&&Ra(s)||!e&&!Ra(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function $p(t,e,n){return typeof t=="string"?t:q.transform(e+n*t)}function VE(t,e,n){const r=$p(e,t.x,t.width),s=$p(n,t.y,t.height);return`${r} ${s}`}const zE={offset:"stroke-dashoffset",array:"stroke-dasharray"},HE={offset:"strokeDashoffset",array:"strokeDasharray"};function WE(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?zE:HE;t[i.offset]=q.transform(-r);const o=q.transform(e),a=q.transform(n);t[i.array]=`${o} ${a}`}function kh(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h,f){if(_h(t,u,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:m,dimensions:v}=t;g.transform&&(v&&(m.transform=g.transform),delete g.transform),v&&(s!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=VE(v,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&WE(g,o,a,l,!1)}const C0=()=>({...bh(),attrs:{}}),jh=t=>typeof t=="string"&&t.toLowerCase()==="svg";function qE(t,e,n,r){const s=w.useMemo(()=>{const i=C0();return kh(i,e,{enableHardwareAcceleration:!1},jh(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};j0(i,t.style,t),s.style={...i,...s.style}}return s}function GE(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(Sh(n)?qE:FE)(r,i,o,n),d={...ME(r,typeof n=="string",t),...l,ref:s},{children:h}=r,f=w.useMemo(()=>pt(h)?h.get():h,[h]);return w.createElement(n,{...d,children:f})}}function P0(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const T0=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function N0(t,e,n,r){P0(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(T0.has(s)?s:yh(s),e.attrs[s])}function Eh(t,e){const{style:n}=t,r={};for(const s in n)(pt(n[s])||e.style&&pt(e.style[s])||x0(s,t))&&(r[s]=n[s]);return r}function R0(t,e){const n=Eh(t,e);for(const r in t)if(pt(t[r])||pt(e[r])){const s=Ji.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Ch(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function A0(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const Aa=t=>Array.isArray(t),KE=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),JE=t=>Aa(t)?t[t.length-1]||0:t;function Qo(t){const e=pt(t)?t.get():t;return KE(e)?e.toValue():e}function QE({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:YE(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const O0=t=>(e,n)=>{const r=w.useContext(pl),s=w.useContext(ml),i=()=>QE(t,e,r,s);return n?i():A0(i)};function YE(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=Qo(i[f]);let{initial:o,animate:a}=t;const l=vl(t),u=v0(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!yl(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const m=Ch(t,g);if(!m)return;const{transitionEnd:v,transition:S,...x}=m;for(const y in x){let p=x[y];if(Array.isArray(p)){const _=d?p.length-1:0;p=p[_]}p!==null&&(s[y]=p)}for(const y in v)s[y]=v[y]}),s}const _e=t=>t;class Mp{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function XE(t){let e=new Mp,n=new Mp,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const h=d&&s,f=h?e:n;return u&&o.add(l),f.add(l)&&h&&s&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),t())}s=!1,i&&(i=!1,a.process(l))}};return a}const To=["prepare","read","update","preRender","render","postRender"],ZE=40;function eC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=To.reduce((h,f)=>(h[f]=XE(()=>n=!0),h),{}),o=h=>i[h].process(s),a=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,ZE),1),s.timestamp=h,s.isProcessing=!0,To.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:To.reduce((h,f)=>{const g=i[f];return h[f]=(m,v=!1,S=!1)=>(n||l(),g.schedule(m,v,S)),h},{}),cancel:h=>To.forEach(f=>i[f].cancel(h)),state:s,steps:i}}const{schedule:ce,cancel:wn,state:Ke,steps:fc}=eC(typeof requestAnimationFrame<"u"?requestAnimationFrame:_e,!0),tC={useVisualState:O0({scrapeMotionValuesFromProps:R0,createRenderState:C0,onMount:(t,e,{renderState:n,latestValues:r})=>{ce.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{kh(n,r,{enableHardwareAcceleration:!1},jh(e.tagName),t.transformTemplate),N0(e,n)})}})},nC={useVisualState:O0({scrapeMotionValuesFromProps:Eh,createRenderState:bh})};function rC(t,{forwardMotionProps:e=!1},n,r){return{...Sh(t)?tC:nC,preloadedFeatures:n,useRender:GE(e),createVisualElement:r,Component:t}}function dn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const L0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function xl(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const sC=t=>e=>L0(e)&&t(e,xl(e));function fn(t,e,n,r){return dn(t,e,sC(n),r)}const iC=(t,e)=>n=>e(t(n)),Wn=(...t)=>t.reduce(iC);function I0(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const Vp=I0("dragHorizontal"),zp=I0("dragVertical");function D0(t){let e=!1;if(t==="y")e=zp();else if(t==="x")e=Vp();else{const n=Vp(),r=zp();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function U0(){const t=D0(!0);return t?(t(),!1):!0}class sr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Hp(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||U0())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&ce.update(()=>a[r](i,o))};return fn(t.current,n,s,{passive:!t.getProps()[r]})}class oC extends sr{mount(){this.unmount=Wn(Hp(this.node,!0),Hp(this.node,!1))}unmount(){}}class aC extends sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wn(dn(this.node.current,"focus",()=>this.onFocus()),dn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const F0=(t,e)=>e?t===e?!0:F0(t,e.parentElement):!1;function pc(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,xl(n))}class lC extends sr{constructor(){super(...arguments),this.removeStartListeners=_e,this.removeEndListeners=_e,this.removeAccessibleListeners=_e,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=fn(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();ce.update(()=>{!h&&!F0(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=fn(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Wn(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||pc("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&ce.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=dn(this.node.current,"keyup",o),pc("down",(a,l)=>{this.startPress(a,l)})},n=dn(this.node.current,"keydown",e),r=()=>{this.isPressing&&pc("cancel",(i,o)=>this.cancelPress(i,o))},s=dn(this.node.current,"blur",r);this.removeAccessibleListeners=Wn(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ce.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!U0()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ce.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=fn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=dn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const zu=new WeakMap,mc=new WeakMap,cC=t=>{const e=zu.get(t.target);e&&e(t)},uC=t=>{t.forEach(cC)};function dC({root:t,...e}){const n=t||document;mc.has(n)||mc.set(n,{});const r=mc.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(uC,{root:t,...e})),r[s]}function hC(t,e,n){const r=dC(e);return zu.set(t,n),r.observe(t),()=>{zu.delete(t),r.unobserve(t)}}const fC={some:0,all:1};class pC extends sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:fC[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return hC(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(mC(e,n))&&this.startObserver()}unmount(){}}function mC({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const gC={inView:{Feature:pC},tap:{Feature:lC},focus:{Feature:aC},hover:{Feature:oC}};function B0(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function yC(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function vC(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Sl(t,e,n){const r=t.getProps();return Ch(r,e,n!==void 0?n:r.custom,yC(t),vC(t))}let wC=_e,Ph=_e;const qn=t=>t*1e3,pn=t=>t/1e3,xC={current:!1},$0=t=>Array.isArray(t)&&typeof t[0]=="number";function M0(t){return!!(!t||typeof t=="string"&&V0[t]||$0(t)||Array.isArray(t)&&t.every(M0))}const ti=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,V0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ti([0,.65,.55,1]),circOut:ti([.55,0,1,.45]),backIn:ti([.31,.01,.66,-.59]),backOut:ti([.33,1.53,.69,.99])};function z0(t){if(t)return $0(t)?ti(t):Array.isArray(t)?t.map(z0):V0[t]}function SC(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=z0(a);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function _C(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const H0=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,bC=1e-7,kC=12;function jC(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=H0(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>bC&&++a<kC);return o}function Xi(t,e,n,r){if(t===e&&n===r)return _e;const s=i=>jC(i,0,1,t,n);return i=>i===0||i===1?i:H0(s(i),e,r)}const EC=Xi(.42,0,1,1),CC=Xi(0,0,.58,1),W0=Xi(.42,0,.58,1),PC=t=>Array.isArray(t)&&typeof t[0]!="number",q0=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,G0=t=>e=>1-t(1-e),Th=t=>1-Math.sin(Math.acos(t)),K0=G0(Th),TC=q0(Th),J0=Xi(.33,1.53,.69,.99),Nh=G0(J0),NC=q0(Nh),RC=t=>(t*=2)<1?.5*Nh(t):.5*(2-Math.pow(2,-10*(t-1))),AC={linear:_e,easeIn:EC,easeInOut:W0,easeOut:CC,circIn:Th,circInOut:TC,circOut:K0,backIn:Nh,backInOut:NC,backOut:J0,anticipate:RC},Wp=t=>{if(Array.isArray(t)){Ph(t.length===4);const[e,n,r,s]=t;return Xi(e,n,r,s)}else if(typeof t=="string")return AC[t];return t},Rh=(t,e)=>n=>!!(Qi(n)&&OE.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Q0=(t,e,n)=>r=>{if(!Qi(r))return r;const[s,i,o,a]=r.match(wl);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OC=t=>Jn(0,255,t),gc={...Or,transform:t=>Math.round(OC(t))},wr={test:Rh("rgb","red"),parse:Q0("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gc.transform(t)+", "+gc.transform(e)+", "+gc.transform(n)+", "+mi(pi.transform(r))+")"};function LC(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Hu={test:Rh("#"),parse:LC,transform:wr.transform},es={test:Rh("hsl","hue"),parse:Q0("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+en.transform(mi(e))+", "+en.transform(mi(n))+", "+mi(pi.transform(r))+")"},tt={test:t=>wr.test(t)||Hu.test(t)||es.test(t),parse:t=>wr.test(t)?wr.parse(t):es.test(t)?es.parse(t):Hu.parse(t),transform:t=>Qi(t)?t:t.hasOwnProperty("red")?wr.transform(t):es.transform(t)},ye=(t,e,n)=>-n*t+n*e+t;function yc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IC({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=yc(l,a,t+1/3),i=yc(l,a,t),o=yc(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const vc=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},DC=[Hu,wr,es],UC=t=>DC.find(e=>e.test(t));function qp(t){const e=UC(t);let n=e.parse(t);return e===es&&(n=IC(n)),n}const Y0=(t,e)=>{const n=qp(t),r=qp(e),s={...n};return i=>(s.red=vc(n.red,r.red,i),s.green=vc(n.green,r.green,i),s.blue=vc(n.blue,r.blue,i),s.alpha=ye(n.alpha,r.alpha,i),wr.transform(s))};function FC(t){var e,n;return isNaN(t)&&Qi(t)&&(((e=t.match(wl))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(b0))===null||n===void 0?void 0:n.length)||0)>0}const X0={regex:RE,countKey:"Vars",token:"${v}",parse:_e},Z0={regex:b0,countKey:"Colors",token:"${c}",parse:tt.parse},ew={regex:wl,countKey:"Numbers",token:"${n}",parse:Or.parse};function wc(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function Oa(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&wc(n,X0),wc(n,Z0),wc(n,ew),n}function tw(t){return Oa(t).values}function nw(t){const{values:e,numColors:n,numVars:r,tokenised:s}=Oa(t),i=e.length;return o=>{let a=s;for(let l=0;l<i;l++)l<r?a=a.replace(X0.token,o[l]):l<r+n?a=a.replace(Z0.token,tt.transform(o[l])):a=a.replace(ew.token,mi(o[l]));return a}}const BC=t=>typeof t=="number"?0:t;function $C(t){const e=tw(t);return nw(t)(e.map(BC))}const Qn={test:FC,parse:tw,createTransformer:nw,getAnimatableNone:$C},rw=(t,e)=>n=>`${n>0?e:t}`;function sw(t,e){return typeof t=="number"?n=>ye(t,e,n):tt.test(t)?Y0(t,e):t.startsWith("var(")?rw(t,e):ow(t,e)}const iw=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>sw(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},MC=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=sw(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},ow=(t,e)=>{const n=Qn.createTransformer(e),r=Oa(t),s=Oa(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Wn(iw(r.values,s.values),n):rw(t,e)},$i=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Gp=(t,e)=>n=>ye(t,e,n);function VC(t){return typeof t=="number"?Gp:typeof t=="string"?tt.test(t)?Y0:ow:Array.isArray(t)?iw:typeof t=="object"?MC:Gp}function zC(t,e,n){const r=[],s=n||VC(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||_e:e;a=Wn(l,a)}r.push(a)}return r}function aw(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Ph(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=zC(e,r,s),a=o.length,l=u=>{let d=0;if(a>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=$i(t[d],t[d+1],u);return o[d](h)};return n?u=>l(Jn(t[0],t[i-1],u)):l}function HC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=$i(0,e,r);t.push(ye(n,1,s))}}function WC(t){const e=[0];return HC(e,t.length-1),e}function qC(t,e){return t.map(n=>n*e)}function GC(t,e){return t.map(()=>e||W0).splice(0,t.length-1)}function La({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=PC(r)?r.map(Wp):Wp(r),i={done:!1,value:e[0]},o=qC(n&&n.length===e.length?n:WC(e),t),a=aw(o,e,{ease:Array.isArray(s)?s:GC(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}function lw(t,e){return e?t*(1e3/e):0}const KC=5;function cw(t,e,n){const r=Math.max(e-KC,0);return lw(n-t(r),e-r)}const xc=.001,JC=.01,Kp=10,QC=.05,YC=1;function XC({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;wC(t<=qn(Kp));let o=1-e;o=Jn(QC,YC,o),t=Jn(JC,Kp,pn(t)),o<1?(s=u=>{const d=u*o,h=d*t,f=d-n,g=Wu(u,o),m=Math.exp(-h);return xc-f/g*m},i=u=>{const h=u*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,m=Math.exp(-h),v=Wu(Math.pow(u,2),o);return(-s(u)+xc>0?-1:1)*((f-g)*m)/v}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-xc+d*h},i=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,l=eP(s,i,a);if(t=qn(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const ZC=12;function eP(t,e,n){let r=n;for(let s=1;s<ZC;s++)r=r-t(r)/e(r);return r}function Wu(t,e){return t*Math.sqrt(1-e*e)}const tP=["duration","bounce"],nP=["stiffness","damping","mass"];function Jp(t,e){return e.some(n=>t[n]!==void 0)}function rP(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Jp(t,nP)&&Jp(t,tP)){const n=XC(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function uw({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=rP({...r,velocity:-pn(r.velocity||0)}),g=h||0,m=l/(2*Math.sqrt(a*u)),v=i-s,S=pn(Math.sqrt(a/u)),x=Math.abs(v)<5;n||(n=x?.01:2),e||(e=x?.005:.5);let y;if(m<1){const p=Wu(S,m);y=_=>{const b=Math.exp(-m*S*_);return i-b*((g+m*S*v)/p*Math.sin(p*_)+v*Math.cos(p*_))}}else if(m===1)y=p=>i-Math.exp(-S*p)*(v+(g+S*v)*p);else{const p=S*Math.sqrt(m*m-1);y=_=>{const b=Math.exp(-m*S*_),k=Math.min(p*_,300);return i-b*((g+m*S*v)*Math.sinh(k)+p*v*Math.cosh(k))/p}}return{calculatedDuration:f&&d||null,next:p=>{const _=y(p);if(f)o.done=p>=d;else{let b=g;p!==0&&(m<1?b=cw(y,p,_):b=0);const k=Math.abs(b)<=n,C=Math.abs(i-_)<=e;o.done=k&&C}return o.value=o.done?i:_,o}}}function Qp({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},g=E=>a!==void 0&&E<a||l!==void 0&&E>l,m=E=>a===void 0?l:l===void 0||Math.abs(a-E)<Math.abs(l-E)?a:l;let v=n*e;const S=h+v,x=o===void 0?S:o(S);x!==S&&(v=x-h);const y=E=>-v*Math.exp(-E/r),p=E=>x+y(E),_=E=>{const O=y(E),T=p(E);f.done=Math.abs(O)<=u,f.value=f.done?x:T};let b,k;const C=E=>{g(f.value)&&(b=E,k=uw({keyframes:[f.value,m(f.value)],velocity:cw(p,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:E=>{let O=!1;return!k&&b===void 0&&(O=!0,_(E),C(E)),b!==void 0&&E>b?k.next(E-b):(!O&&_(E),f)}}}const sP=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ce.update(e,!0),stop:()=>wn(e),now:()=>Ke.isProcessing?Ke.timestamp:performance.now()}},Yp=2e4;function Xp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Yp;)e+=n,r=t.next(e);return e>=Yp?1/0:e}const iP={decay:Qp,inertia:Qp,tween:La,keyframes:La,spring:uw};function Ia({autoplay:t=!0,delay:e=0,driver:n=sP,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...f}){let g=1,m=!1,v,S;const x=()=>{S=new Promise($=>{v=$})};x();let y;const p=iP[s]||La;let _;p!==La&&typeof r[0]!="number"&&(_=aw([0,100],r,{clamp:!1}),r=[0,100]);const b=p({...f,keyframes:r});let k;a==="mirror"&&(k=p({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",E=null,O=null,T=null;b.calculatedDuration===null&&i&&(b.calculatedDuration=Xp(b));const{calculatedDuration:A}=b;let j=1/0,N=1/0;A!==null&&(j=A+o,N=j*(i+1)-o);let R=0;const F=$=>{if(O===null)return;g>0&&(O=Math.min(O,$)),g<0&&(O=Math.min($-N/g,O)),E!==null?R=E:R=Math.round($-O)*g;const G=R-e*(g>=0?1:-1),Le=g>=0?G<0:G>N;R=Math.max(G,0),C==="finished"&&E===null&&(R=N);let ie=R,He=b;if(i){const oe=Math.min(R,N)/j;let ee=Math.floor(oe),pe=oe%1;!pe&&oe>=1&&(pe=1),pe===1&&ee--,ee=Math.min(ee,i+1),!!(ee%2)&&(a==="reverse"?(pe=1-pe,o&&(pe-=o/j)):a==="mirror"&&(He=k)),ie=Jn(0,1,pe)*j}const B=Le?{done:!1,value:r[0]}:He.next(ie);_&&(B.value=_(B.value));let{done:K}=B;!Le&&A!==null&&(K=g>=0?R>=N:R<=0);const Ee=E===null&&(C==="finished"||C==="running"&&K);return h&&h(B.value),Ee&&L(),B},U=()=>{y&&y.stop(),y=void 0},W=()=>{C="idle",U(),v(),x(),O=T=null},L=()=>{C="finished",d&&d(),U(),v()},M=()=>{if(m)return;y||(y=n(F));const $=y.now();l&&l(),E!==null?O=$-E:(!O||C==="finished")&&(O=$),C==="finished"&&x(),T=O,E=null,C="running",y.start()};t&&M();const V={then($,G){return S.then($,G)},get time(){return pn(R)},set time($){$=qn($),R=$,E!==null||!y||g===0?E=$:O=y.now()-$/g},get duration(){const $=b.calculatedDuration===null?Xp(b):b.calculatedDuration;return pn($)},get speed(){return g},set speed($){$===g||!y||(g=$,V.time=pn(R))},get state(){return C},play:M,pause:()=>{C="paused",E=R},stop:()=>{m=!0,C!=="idle"&&(C="idle",u&&u(),W())},cancel:()=>{T!==null&&F(T),W()},complete:()=>{C="finished"},sample:$=>(O=0,F($))};return V}function oP(t){let e;return()=>(e===void 0&&(e=t()),e)}const aP=oP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lP=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),No=10,cP=2e4,uP=(t,e)=>e.type==="spring"||t==="backgroundColor"||!M0(e.ease);function dP(t,e,{onUpdate:n,onComplete:r,...s}){if(!(aP()&&lP.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(p=>{a=p})};d();let{keyframes:h,duration:f=300,ease:g,times:m}=s;if(uP(e,s)){const p=Ia({...s,repeat:0,delay:0});let _={done:!1,value:h[0]};const b=[];let k=0;for(;!_.done&&k<cP;)_=p.sample(k),b.push(_.value),k+=No;m=void 0,h=b,f=k-No,g="linear"}const v=SC(t.owner.current,e,h,{...s,duration:f,ease:g,times:m}),S=()=>{u=!1,v.cancel()},x=()=>{u=!0,ce.update(S),a(),d()};return v.onfinish=()=>{u||(t.set(_C(h,s)),r&&r(),x())},{then(p,_){return l.then(p,_)},attachTimeline(p){return v.timeline=p,v.onfinish=null,_e},get time(){return pn(v.currentTime||0)},set time(p){v.currentTime=qn(p)},get speed(){return v.playbackRate},set speed(p){v.playbackRate=p},get duration(){return pn(f)},play:()=>{o||(v.play(),wn(S))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:p}=v;if(p){const _=Ia({...s,autoplay:!1});t.setWithVelocity(_.sample(p-No).value,_.sample(p).value,No)}x()},complete:()=>{u||v.finish()},cancel:x}}function hP({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:_e,pause:_e,stop:_e,then:i=>(i(),Promise.resolve()),cancel:_e,complete:_e});return e?Ia({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const fP={type:"spring",stiffness:500,damping:25,restSpeed:10},pP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),mP={type:"keyframes",duration:.8},gP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yP=(t,{keyframes:e})=>e.length>2?mP:Ar.has(t)?t.startsWith("scale")?pP(e[1]):fP:gP,qu=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qn.test(e)||e==="0")&&!e.startsWith("url(")),vP=new Set(["brightness","contrast","saturate","opacity"]);function wP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(wl)||[];if(!r)return t;const s=n.replace(r,"");let i=vP.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const xP=/([a-z-]*)\(.*?\)/g,Gu={...Qn,getAnimatableNone:t=>{const e=t.match(xP);return e?e.map(wP).join(" "):t}},SP={...k0,color:tt,backgroundColor:tt,outlineColor:tt,fill:tt,stroke:tt,borderColor:tt,borderTopColor:tt,borderRightColor:tt,borderBottomColor:tt,borderLeftColor:tt,filter:Gu,WebkitFilter:Gu},Ah=t=>SP[t];function dw(t,e){let n=Ah(t);return n!==Gu&&(n=Qn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hw=t=>/^0[^.\s]+$/.test(t);function _P(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||hw(t)}function bP(t,e,n,r){const s=qu(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),_P(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];i[d]=dw(e,a)}return i}function kP({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function Oh(t,e){return t[e]||t.default||t}const jP={skipAnimations:!1},Lh=(t,e,n,r={})=>s=>{const i=Oh(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-qn(o);const l=bP(e,t,n,i),u=l[0],d=l[l.length-1],h=qu(t,u),f=qu(t,d);let g={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:m=>{e.set(m),i.onUpdate&&i.onUpdate(m)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(kP(i)||(g={...g,...yP(t,g)}),g.duration&&(g.duration=qn(g.duration)),g.repeatDelay&&(g.repeatDelay=qn(g.repeatDelay)),!h||!f||xC.current||i.type===!1||jP.skipAnimations)return hP(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const m=dP(e,t,g);if(m)return m}return Ia(g)};function Da(t){return!!(pt(t)&&t.add)}const fw=t=>/^\-?\d*\.?\d+$/.test(t);function Ih(t,e){t.indexOf(e)===-1&&t.push(e)}function Dh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Uh{constructor(){this.subscriptions=[]}add(e){return Ih(this.subscriptions,e),()=>Dh(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const EP=t=>!isNaN(parseFloat(t));class CP{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Ke;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=EP(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Uh);const r=this.events[e].add(n);return e==="change"?()=>{r(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?lw(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ws(t,e){return new CP(t,e)}const pw=t=>e=>e.test(t),PP={test:t=>t==="auto",parse:t=>t},mw=[Or,q,en,kn,IE,LE,PP],Ws=t=>mw.find(pw(t)),TP=[...mw,tt,Qn],NP=t=>TP.find(pw(t));function RP(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ws(n))}function AP(t,e){const n=Sl(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=JE(i[o]);RP(t,o,a)}}function OP(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&s!==void 0?s:e[l]),d!=null&&(typeof d=="string"&&(fw(d)||hw(d))?d=parseFloat(d):!NP(d)&&Qn.test(u)&&(d=dw(l,u)),t.addValue(l,ws(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function LP(t,e){return e?(e[t]||e.default||e).from:void 0}function IP(t,e,n){const r={};for(const s in t){const i=LP(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function DP({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function UP(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function gw(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(i=r);const u=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const f=t.getValue(h),g=a[h];if(!f||g===void 0||d&&DP(d,h))continue;const m={delay:n,elapsed:0,...Oh(i||{},h)};if(window.HandoffAppearAnimations){const x=t.getProps()[y0];if(x){const y=window.HandoffAppearAnimations(x,h,f,ce);y!==null&&(m.elapsed=y,m.isHandoff=!0)}}let v=!m.isHandoff&&!UP(f,g);if(m.type==="spring"&&(f.getVelocity()||m.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(Lh(h,f,g,t.shouldReduceMotion&&Ar.has(h)?{type:!1}:m));const S=f.animation;Da(l)&&(l.add(h),S.then(()=>l.remove(h))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&AP(t,o)}),u}function Ku(t,e,n={}){const r=Sl(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(gw(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return FP(t,e,u+l,d,h,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function FP(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(BP).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Ku(u,e,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function BP(t,e){return t.sortNodePosition(e)}function $P(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Ku(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Ku(t,e,n);else{const s=typeof e=="function"?Sl(t,e,n.custom):e;r=Promise.all(gw(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const MP=[...vh].reverse(),VP=vh.length;function zP(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$P(t,n,r)))}function HP(t){let e=zP(t);const n=qP();let r=!0;const s=(l,u)=>{const d=Sl(t,u);if(d){const{transition:h,transitionEnd:f,...g}=d;l={...l,...g,...f}}return l};function i(l){e=l(t)}function o(l,u){const d=t.getProps(),h=t.getVariantContext(!0)||{},f=[],g=new Set;let m={},v=1/0;for(let x=0;x<VP;x++){const y=MP[x],p=n[y],_=d[y]!==void 0?d[y]:h[y],b=Fi(_),k=y===u?p.isActive:null;k===!1&&(v=x);let C=_===h[y]&&_!==d[y]&&b;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),p.protectedKeys={...m},!p.isActive&&k===null||!_&&!p.prevProp||yl(_)||typeof _=="boolean")continue;let O=WP(p.prevProp,_)||y===u&&p.isActive&&!C&&b||x>v&&b,T=!1;const A=Array.isArray(_)?_:[_];let j=A.reduce(s,{});k===!1&&(j={});const{prevResolvedValues:N={}}=p,R={...N,...j},F=U=>{O=!0,g.has(U)&&(T=!0,g.delete(U)),p.needsAnimating[U]=!0};for(const U in R){const W=j[U],L=N[U];if(m.hasOwnProperty(U))continue;let M=!1;Aa(W)&&Aa(L)?M=!B0(W,L):M=W!==L,M?W!==void 0?F(U):g.add(U):W!==void 0&&g.has(U)?F(U):p.protectedKeys[U]=!0}p.prevProp=_,p.prevResolvedValues=j,p.isActive&&(m={...m,...j}),r&&t.blockInitialAnimation&&(O=!1),O&&(!C||T)&&f.push(...A.map(U=>({animation:U,options:{type:y,...l}})))}if(g.size){const x={};g.forEach(y=>{const p=t.getBaseTarget(y);p!==void 0&&(x[y]=p)}),f.push({animation:x})}let S=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(f):Promise.resolve()}function a(l,u,d){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(g=>{var m;return(m=g.animationState)===null||m===void 0?void 0:m.setActive(l,u)}),n[l].isActive=u;const f=o(d,l);for(const g in n)n[g].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function WP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!B0(e,t):!1}function ar(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qP(){return{animate:ar(!0),whileInView:ar(),whileHover:ar(),whileTap:ar(),whileDrag:ar(),whileFocus:ar(),exit:ar()}}class GP extends sr{constructor(e){super(e),e.animationState||(e.animationState=HP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),yl(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let KP=0;class JP extends sr{constructor(){super(...arguments),this.id=KP++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const QP={animation:{Feature:GP},exit:{Feature:JP}},Zp=(t,e)=>Math.abs(t-e);function YP(t,e){const n=Zp(t.x,e.x),r=Zp(t.y,e.y);return Math.sqrt(n**2+r**2)}class yw{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=_c(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=YP(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:m}=h,{timestamp:v}=Ke;this.history.push({...m,timestamp:v});const{onStart:S,onMove:x}=this.handlers;f||(S&&S(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Sc(f,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:m,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=_c(h.type==="pointercancel"?this.lastMoveEventInfo:Sc(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,S),m&&m(h,S)},!L0(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=xl(e),a=Sc(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Ke;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,_c(a,this.history)),this.removeListeners=Wn(fn(this.contextWindow,"pointermove",this.handlePointerMove),fn(this.contextWindow,"pointerup",this.handlePointerUp),fn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wn(this.updatePoint)}}function Sc(t,e){return e?{point:e(t.point)}:t}function em(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _c({point:t},e){return{point:t,delta:em(t,vw(e)),offset:em(t,XP(e)),velocity:ZP(e,.1)}}function XP(t){return t[0]}function vw(t){return t[t.length-1]}function ZP(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=vw(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>qn(e)));)n--;if(!r)return{x:0,y:0};const i=pn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xt(t){return t.max-t.min}function Ju(t,e=0,n=.01){return Math.abs(t-e)<=n}function tm(t,e,n,r=.5){t.origin=r,t.originPoint=ye(e.min,e.max,t.origin),t.scale=xt(n)/xt(e),(Ju(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ye(n.min,n.max,t.origin)-t.originPoint,(Ju(t.translate)||isNaN(t.translate))&&(t.translate=0)}function gi(t,e,n,r){tm(t.x,e.x,n.x,r?r.originX:void 0),tm(t.y,e.y,n.y,r?r.originY:void 0)}function nm(t,e,n){t.min=n.min+e.min,t.max=t.min+xt(e)}function eT(t,e,n){nm(t.x,e.x,n.x),nm(t.y,e.y,n.y)}function rm(t,e,n){t.min=e.min-n.min,t.max=t.min+xt(e)}function yi(t,e,n){rm(t.x,e.x,n.x),rm(t.y,e.y,n.y)}function tT(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ye(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ye(n,t,r.max):Math.min(t,n)),t}function sm(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function nT(t,{top:e,left:n,bottom:r,right:s}){return{x:sm(t.x,n,s),y:sm(t.y,e,r)}}function im(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function rT(t,e){return{x:im(t.x,e.x),y:im(t.y,e.y)}}function sT(t,e){let n=.5;const r=xt(t),s=xt(e);return s>r?n=$i(e.min,e.max-r,t.min):r>s&&(n=$i(t.min,t.max-s,e.min)),Jn(0,1,n)}function iT(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Qu=.35;function oT(t=Qu){return t===!1?t=0:t===!0&&(t=Qu),{x:om(t,"left","right"),y:om(t,"top","bottom")}}function om(t,e,n){return{min:am(t,e),max:am(t,n)}}function am(t,e){return typeof t=="number"?t:t[e]||0}const lm=()=>({translate:0,scale:1,origin:0,originPoint:0}),ts=()=>({x:lm(),y:lm()}),cm=()=>({min:0,max:0}),Ce=()=>({x:cm(),y:cm()});function kt(t){return[t("x"),t("y")]}function ww({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function aT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lT(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function bc(t){return t===void 0||t===1}function Yu({scale:t,scaleX:e,scaleY:n}){return!bc(t)||!bc(e)||!bc(n)}function hr(t){return Yu(t)||xw(t)||t.z||t.rotate||t.rotateX||t.rotateY}function xw(t){return um(t.x)||um(t.y)}function um(t){return t&&t!=="0%"}function Ua(t,e,n){const r=t-n,s=e*r;return n+s}function dm(t,e,n,r,s){return s!==void 0&&(t=Ua(t,s,r)),Ua(t,n,r)+e}function Xu(t,e=0,n=1,r,s){t.min=dm(t.min,e,n,r,s),t.max=dm(t.max,e,n,r,s)}function Sw(t,{x:e,y:n}){Xu(t.x,e.translate,e.scale,e.originPoint),Xu(t.y,n.translate,n.scale,n.originPoint)}function cT(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ns(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Sw(t,o)),r&&hr(i.latestValues)&&ns(t,i.latestValues))}e.x=hm(e.x),e.y=hm(e.y)}function hm(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Pn(t,e){t.min=t.min+e,t.max=t.max+e}function fm(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ye(t.min,t.max,i);Xu(t,e[n],e[r],o,e.scale)}const uT=["x","scaleX","originX"],dT=["y","scaleY","originY"];function ns(t,e){fm(t.x,e,uT),fm(t.y,e,dT)}function _w(t,e){return ww(lT(t.getBoundingClientRect(),e))}function hT(t,e,n){const r=_w(t,n),{scroll:s}=e;return s&&(Pn(r.x,s.offset.x),Pn(r.y,s.offset.y)),r}const bw=({current:t})=>t?t.ownerDocument.defaultView:null,fT=new WeakMap;class pT{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xl(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:g,onDragStart:m}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=D0(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kt(S=>{let x=this.getAxisMotionValue(S).get()||0;if(en.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const p=y.layout.layoutBox[S];p&&(x=xt(p)*(parseFloat(x)/100))}}this.originPoint[S]=x}),m&&ce.update(()=>m(d,h),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:m,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=h;if(g&&this.currentDirection===null){this.currentDirection=mT(S),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,S),this.updateAxis("y",h.point,S),this.visualElement.render(),v&&v(d,h)},a=(d,h)=>this.stop(d,h),l=()=>kt(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new yw(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:bw(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ce.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Ro(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=tT(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Zr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=nT(s.layoutBox,n):this.constraints=!1,this.elastic=oT(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&kt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=iT(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zr(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=hT(r,s.root,this.visualElement.getTransformPagePoint());let o=rT(s.layout.layoutBox,i);if(n){const a=n(aT(o));this.hasMutatedConstraints=!!a,a&&(o=ww(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=kt(d=>{if(!Ro(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Lh(e,r,0,n))}stopAnimation(){kt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){kt(n=>{const{drag:r}=this.getProps();if(!Ro(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ye(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};kt(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();s[o]=sT({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kt(o=>{if(!Ro(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(ye(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;fT.set(this.visualElement,this);const e=this.visualElement.current,n=fn(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Zr(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=dn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(kt(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Qu,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ro(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function mT(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gT extends sr{constructor(e){super(e),this.removeGroupControls=_e,this.removeListeners=_e,this.controls=new pT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_e}unmount(){this.removeGroupControls(),this.removeListeners()}}const pm=t=>(e,n)=>{t&&ce.update(()=>t(e,n))};class yT extends sr{constructor(){super(...arguments),this.removePointerDownListener=_e}onPointerDown(e){this.session=new yw(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bw(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:pm(e),onStart:pm(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ce.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=fn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function vT(){const t=w.useContext(ml);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=w.useId();return w.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Yo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mm(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(q.test(t))t=parseFloat(t);else return t;const n=mm(t,e.target.x),r=mm(t,e.target.y);return`${n}% ${r}%`}},wT={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Qn.parse(t);if(s.length>5)return r;const i=Qn.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const u=ye(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class xT extends ud.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;CE(ST),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Yo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kw(t){const[e,n]=vT(),r=w.useContext(xh);return ud.createElement(xT,{...t,layoutGroup:r,switchLayoutGroup:w.useContext(w0),isPresent:e,safeToRemove:n})}const ST={borderRadius:{...qs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qs,borderTopRightRadius:qs,borderBottomLeftRadius:qs,borderBottomRightRadius:qs,boxShadow:wT},jw=["TopLeft","TopRight","BottomLeft","BottomRight"],_T=jw.length,gm=t=>typeof t=="string"?parseFloat(t):t,ym=t=>typeof t=="number"||q.test(t);function bT(t,e,n,r,s,i){s?(t.opacity=ye(0,n.opacity!==void 0?n.opacity:1,kT(r)),t.opacityExit=ye(e.opacity!==void 0?e.opacity:1,0,jT(r))):i&&(t.opacity=ye(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<_T;o++){const a=`border${jw[o]}Radius`;let l=vm(e,a),u=vm(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||ym(l)===ym(u)?(t[a]=Math.max(ye(gm(l),gm(u),r),0),(en.test(u)||en.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ye(e.rotate||0,n.rotate||0,r))}function vm(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kT=Ew(0,.5,K0),jT=Ew(.5,.95,_e);function Ew(t,e,n){return r=>r<t?0:r>e?1:n($i(t,e,r))}function wm(t,e){t.min=e.min,t.max=e.max}function bt(t,e){wm(t.x,e.x),wm(t.y,e.y)}function xm(t,e,n,r,s){return t-=e,t=Ua(t,1/n,r),s!==void 0&&(t=Ua(t,1/s,r)),t}function ET(t,e=0,n=1,r=.5,s,i=t,o=t){if(en.test(e)&&(e=parseFloat(e),e=ye(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ye(i.min,i.max,r);t===i&&(a-=e),t.min=xm(t.min,e,n,a,s),t.max=xm(t.max,e,n,a,s)}function Sm(t,e,[n,r,s],i,o){ET(t,e[n],e[r],e[s],e.scale,i,o)}const CT=["x","scaleX","originX"],PT=["y","scaleY","originY"];function _m(t,e,n,r){Sm(t.x,e,CT,n?n.x:void 0,r?r.x:void 0),Sm(t.y,e,PT,n?n.y:void 0,r?r.y:void 0)}function bm(t){return t.translate===0&&t.scale===1}function Cw(t){return bm(t.x)&&bm(t.y)}function TT(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Pw(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function km(t){return xt(t.x)/xt(t.y)}class NT{constructor(){this.members=[]}add(e){Ih(this.members,e),e.scheduleRender()}remove(e){if(Dh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jm(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const RT=(t,e)=>t.depth-e.depth;class AT{constructor(){this.children=[],this.isDirty=!1}add(e){Ih(this.children,e),this.isDirty=!0}remove(e){Dh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RT),this.isDirty=!1,this.children.forEach(e)}}function OT(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(wn(r),t(i-e))};return ce.read(r,!0),()=>wn(r)}function LT(t){window.MotionDebug&&window.MotionDebug.record(t)}function IT(t){return t instanceof SVGElement&&t.tagName!=="svg"}function DT(t,e,n){const r=pt(t)?t:ws(t);return r.start(Lh("",r,e,n)),r.animation}const Em=["","X","Y","Z"],UT={visibility:"hidden"},Cm=1e3;let FT=0;const fr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Tw({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=FT++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,fr.totalNodes=fr.resolvedTargetDeltas=fr.recalculatedProjection=0,this.nodes.forEach(MT),this.nodes.forEach(qT),this.nodes.forEach(GT),this.nodes.forEach(VT),LT(fr)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new AT)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Uh),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=IT(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=OT(f,250),Yo.hasAnimatedSinceResize&&(Yo.hasAnimatedSinceResize=!1,this.nodes.forEach(Tm))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||XT,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=d.getProps(),y=!this.targetLayout||!Pw(this.targetLayout,m)||g,p=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||p||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,p);const _={...Oh(v,"layout"),onPlay:S,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||Tm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(KT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pm);return}this.isUpdating||this.nodes.forEach(HT),this.isUpdating=!1,this.nodes.forEach(WT),this.nodes.forEach(BT),this.nodes.forEach($T),this.clearAllSnapshots();const a=performance.now();Ke.delta=Jn(0,1e3/60,a-Ke.timestamp),Ke.timestamp=a,Ke.isProcessing=!0,fc.update.process(Ke),fc.preRender.process(Ke),fc.render.process(Ke),Ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(zT),this.sharedNodes.forEach(JT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Cw(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||hr(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ZT(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ce();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Pn(a.x,l.offset.x),Pn(a.y,l.offset.y)),a}removeElementScroll(o){const a=Ce();bt(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){bt(a,o);const{scroll:f}=this.root;f&&(Pn(a.x,-f.offset.x),Pn(a.y,-f.offset.y))}Pn(a.x,d.offset.x),Pn(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Ce();bt(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ns(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),hr(d.latestValues)&&ns(l,d.latestValues)}return hr(this.latestValues)&&ns(l,this.latestValues),l}removeTransform(o){const a=Ce();bt(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!hr(u.latestValues))continue;Yu(u.latestValues)&&u.updateSnapshot();const d=Ce(),h=u.measurePageBox();bt(d,h),_m(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return hr(this.latestValues)&&_m(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ke.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),yi(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),bt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),eT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bt(this.target,this.layout.layoutBox),Sw(this.target,this.targetDelta)):bt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),yi(this.relativeTargetOrigin,this.target,g.target),bt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}fr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Yu(this.parent.latestValues)||xw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ke.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;bt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;cT(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:m}=a;if(!m){this.projectionTransform&&(this.projectionDelta=ts(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ts(),this.projectionDeltaWithTransform=ts());const v=this.projectionTransform;gi(this.projectionDelta,this.layoutCorrected,m,this.latestValues),this.projectionTransform=jm(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),fr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=ts();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Ce(),g=l?l.source:void 0,m=this.layout?this.layout.source:void 0,v=g!==m,S=this.getStack(),x=!S||S.members.length<=1,y=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(YT));this.animationProgress=0;let p;this.mixTargetDelta=_=>{const b=_/1e3;Nm(h.x,o.x,b),Nm(h.y,o.y,b),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yi(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QT(this.relativeTarget,this.relativeTargetOrigin,f,b),p&&TT(this.relativeTarget,p)&&(this.isProjectionDirty=!1),p||(p=Ce()),bt(p,this.relativeTarget)),v&&(this.animationValues=d,bT(d,u,this.latestValues,b,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{Yo.hasAnimatedSinceResize=!0,this.currentAnimation=DT(0,Cm,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Cm),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Nw(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ce();const h=xt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=xt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}bt(a,l),ns(a,d),gi(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new NT),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<Em.length;d++){const h="rotate"+Em[d];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return UT;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Qo(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Qo(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hr(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=jm(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:g,y:m}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${m.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Na){if(f[v]===void 0)continue;const{correct:S,applyTo:x}=Na[v],y=u.transform==="none"?f[v]:S(f[v],h);if(x){const p=x.length;for(let _=0;_<p;_++)u[x[_]]=y}else u[v]=y}return this.options.layoutId&&(u.pointerEvents=h===this?Qo(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Pm),this.root.sharedNodes.clear()}}}function BT(t){t.updateLayout()}function $T(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?kt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=xt(f);f.min=r[h].min,f.max=f.min+g}):Nw(i,n.layoutBox,r)&&kt(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=xt(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=ts();gi(a,r,n.layoutBox);const l=ts();o?gi(l,t.applyTransform(s,!0),n.measuredBox):gi(l,r,n.layoutBox);const u=!Cw(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const m=Ce();yi(m,n.layoutBox,f.layoutBox);const v=Ce();yi(v,r,g.layoutBox),Pw(m,v)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function MT(t){fr.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function VT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zT(t){t.clearSnapshot()}function Pm(t){t.clearMeasurements()}function HT(t){t.isLayoutDirty=!1}function WT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Tm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qT(t){t.resolveTargetDelta()}function GT(t){t.calcProjection()}function KT(t){t.resetRotation()}function JT(t){t.removeLeadSnapshot()}function Nm(t,e,n){t.translate=ye(e.translate,0,n),t.scale=ye(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Rm(t,e,n,r){t.min=ye(e.min,n.min,r),t.max=ye(e.max,n.max,r)}function QT(t,e,n,r){Rm(t.x,e.x,n.x,r),Rm(t.y,e.y,n.y,r)}function YT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XT={duration:.45,ease:[.4,0,.1,1]},Am=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Om=Am("applewebkit/")&&!Am("chrome/")?Math.round:_e;function Lm(t){t.min=Om(t.min),t.max=Om(t.max)}function ZT(t){Lm(t.x),Lm(t.y)}function Nw(t,e,n){return t==="position"||t==="preserve-aspect"&&!Ju(km(e),km(n),.2)}const eN=Tw({attachResizeListener:(t,e)=>dn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kc={current:void 0},Rw=Tw({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kc.current){const t=new eN({});t.mount(window),t.setOptions({layoutScroll:!0}),kc.current=t}return kc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tN={pan:{Feature:yT},drag:{Feature:gT,ProjectionNode:Rw,MeasureLayout:kw}},nN=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function rN(t){const e=nN.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Zu(t,e,n=1){const[r,s]=rN(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return fw(o)?parseFloat(o):o}else return Vu(s)?Zu(s,e,n+1):s}function sN(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Vu(i))return;const o=Zu(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Vu(i))continue;const o=Zu(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const iN=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Aw=t=>iN.has(t),oN=t=>Object.keys(t).some(Aw),Im=t=>t===Or||t===q,Dm=(t,e)=>parseFloat(t.split(", ")[e]),Um=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Dm(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?Dm(i[1],t):0}},aN=new Set(["x","y","z"]),lN=Ji.filter(t=>!aN.has(t));function cN(t){const e=[];return lN.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const xs={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Um(4,13),y:Um(5,14)};xs.translateX=xs.x;xs.translateY=xs.y;const uN=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=xs[u](r,i)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),t[u]=xs[u](l,i)}),t},dN=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(Aw);let i=[],o=!1;const a=[];if(s.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=Ws(d);const f=e[l];let g;if(Aa(f)){const m=f.length,v=f[0]===null?1:0;d=f[v],h=Ws(d);for(let S=v;S<m&&f[S]!==null;S++)g?Ph(Ws(f[S])===g):g=Ws(f[S])}else g=Ws(f);if(h!==g)if(Im(h)&&Im(g)){const m=u.get();typeof m=="string"&&u.set(parseFloat(m)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&g===q&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(d===0||f===0)?d===0?u.set(g.transform(d)):e[l]=h.transform(f):(o||(i=cN(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=uN(e,t,a);return i.length&&i.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),gl&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function hN(t,e,n,r){return oN(e)?dN(t,e,n,r):{target:e,transitionEnd:r}}const fN=(t,e,n,r)=>{const s=sN(t,e,r);return e=s.target,r=s.transitionEnd,hN(t,e,n,r)},ed={current:null},Ow={current:!1};function pN(){if(Ow.current=!0,!!gl)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ed.current=t.matches;t.addListener(e),e()}else ed.current=!1}function mN(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(pt(i))t.addValue(s,i),Da(r)&&r.add(s);else if(pt(o))t.addValue(s,ws(i,{owner:t})),Da(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,ws(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Fm=new WeakMap,Lw=Object.keys(Bi),gN=Lw.length,Bm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yN=wh.length;class vN{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ce.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=vl(n),this.isVariantNode=v0(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];a[h]!==void 0&&pt(f)&&(f.set(a[h],!1),Da(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Fm.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Ow.current||pN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ed.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Fm.delete(this.current),this.projection&&this.projection.unmount(),wn(this.notifyUpdate),wn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ar.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ce.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let l=0;l<gN;l++){const u=Lw[l],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:g}=Bi[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:g}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||h&&Zr(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Bm.length;r++){const s=Bm[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=mN(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<yN;r++){const s=wh[r],i=this.props[s];(Fi(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ws(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Ch(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!pt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Uh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Iw extends vN{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=IP(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){OP(this,r,o);const a=fN(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function wN(t){return window.getComputedStyle(t)}class xN extends Iw{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ar.has(n)){const r=Ah(n);return r&&r.default||0}else{const r=wN(e),s=(_0(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _w(e,n)}build(e,n,r,s){_h(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Eh(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){P0(e,n,r,s)}}class SN extends Iw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ar.has(n)){const r=Ah(n);return r&&r.default||0}return n=T0.has(n)?n:yh(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ce()}scrapeMotionValuesFromProps(e,n){return R0(e,n)}build(e,n,r,s){kh(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){N0(e,n,r,s)}mount(e){this.isSVGTag=jh(e.tagName),super.mount(e)}}const _N=(t,e)=>Sh(t)?new SN(e,{enableHardwareAcceleration:!1}):new xN(e,{enableHardwareAcceleration:!0}),bN={layout:{ProjectionNode:Rw,MeasureLayout:kw}},kN={...QP,...gC,...tN,...bN},Je=jE((t,e)=>rC(t,e,kN,_N));function Dw(){const t=w.useRef(!1);return gh(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function jN(){const t=Dw(),[e,n]=w.useState(0),r=w.useCallback(()=>{t.current&&n(e+1)},[e]);return[w.useCallback(()=>ce.postRender(r),[r]),e]}class EN extends w.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function CN({children:t,isPresent:e}){const n=w.useId(),r=w.useRef(null),s=w.useRef({width:0,height:0,top:0,left:0});return w.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),w.createElement(EN,{isPresent:e,childRef:r,sizeRef:s},w.cloneElement(t,{ref:r}))}const jc=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=A0(PN),l=w.useId(),u=w.useMemo(()=>({id:l,initial:e,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[n]);return w.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),w.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=w.createElement(CN,{isPresent:n},t)),w.createElement(ml.Provider,{value:u},t)};function PN(){return new Map}function TN(t){return w.useEffect(()=>()=>t(),[])}const pr=t=>t.key||"";function NN(t,e){t.forEach(n=>{const r=pr(n);e.set(r,n)})}function RN(t){const e=[];return w.Children.forEach(t,n=>{w.isValidElement(n)&&e.push(n)}),e}const AN=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=w.useContext(xh).forceRender||jN()[0],l=Dw(),u=RN(t);let d=u;const h=w.useRef(new Map).current,f=w.useRef(d),g=w.useRef(new Map).current,m=w.useRef(!0);if(gh(()=>{m.current=!1,NN(u,g),f.current=d}),TN(()=>{m.current=!0,g.clear(),h.clear()}),m.current)return w.createElement(w.Fragment,null,d.map(y=>w.createElement(jc,{key:pr(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},y)));d=[...d];const v=f.current.map(pr),S=u.map(pr),x=v.length;for(let y=0;y<x;y++){const p=v[y];S.indexOf(p)===-1&&!h.has(p)&&h.set(p,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((y,p)=>{if(S.indexOf(p)!==-1)return;const _=g.get(p);if(!_)return;const b=v.indexOf(p);let k=y;if(!k){const C=()=>{h.delete(p);const E=Array.from(g.keys()).filter(O=>!S.includes(O));if(E.forEach(O=>g.delete(O)),f.current=u.filter(O=>{const T=pr(O);return T===p||E.includes(T)}),!h.size){if(l.current===!1)return;a(),r&&r()}};k=w.createElement(jc,{key:pr(_),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:i,mode:o},_),h.set(p,k)}d.splice(b,0,k)}),d=d.map(y=>{const p=y.key;return h.has(p)?y:w.createElement(jc,{key:pr(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),w.createElement(w.Fragment,null,h.size?d:d.map(y=>w.cloneElement(y)))};const $m=[{level:1,xp:0},{level:2,xp:500},{level:3,xp:1500},{level:4,xp:3500},{level:5,xp:7500},{level:6,xp:15e3},{level:7,xp:25e3},{level:8,xp:4e4},{level:9,xp:65e3},{level:10,xp:1e5}],ON=({onNavigateHome:t,onNavigateGames:e,isInLobby:n})=>{var y;const r=Ze(),s=Sn(),{user:i,isAuthenticated:o,loading:a,session:l,signOut:u}=Ot(),[d,h]=w.useState(!1),f=()=>{var T,A;if(!(i!=null&&i.level))return{percent:0,currentLevelXp:0,nextLevelXp:500};const p=i.level,_=i.xp||0,b=((T=$m.find(j=>j.level===p))==null?void 0:T.xp)||0,k=(A=$m.find(j=>j.level===p+1))==null?void 0:A.xp;if(k===void 0)return{percent:100,currentLevelXp:_,nextLevelXp:_};const C=_-b,E=k-b;return{percent:Math.min(100,Math.floor(C/E*100)),currentLevelXp:_,nextLevelXp:k}},{percent:g,nextLevelXp:m}=f();console.log(" [HEADER] Rendering with auth state:",{loading:a,isAuthenticated:o,hasUser:!!i,hasSession:!!l,userName:(i==null?void 0:i.username)||(i==null?void 0:i.display_name),timestamp:new Date().toISOString()});const v=p=>{if(n&&t){p.preventDefault(),t();return}s.pathname==="/"&&(p.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}))},S=p=>{if(p.preventDefault(),n&&e)e();else{const _=document.getElementById("games-section");_?_.scrollIntoView({behavior:"smooth"}):(r("/",{replace:!0}),setTimeout(()=>{const b=document.getElementById("games-section");b&&b.scrollIntoView({behavior:"smooth"})},100))}},x=async()=>{if(!d){h(!0),console.log(" [HEADER] Logging out...");try{await u(),console.log(" [HEADER] Logged out successfully"),sessionStorage.removeItem("gamebuddies-session-temp"),r("/")}catch(p){console.error(" [HEADER] Logout exception:",p),alert("An error occurred during logout.")}finally{h(!1)}}};return c.jsx(c.Fragment,{children:c.jsx(Je.header,{className:"header",initial:{y:-100},animate:{y:0},transition:{duration:.5},children:c.jsx("div",{className:"container",children:c.jsxs("div",{className:"header-content",children:[c.jsxs(rc,{to:"/",className:"logo",onClick:v,children:[c.jsx("span",{className:"logo-text",children:"Game"}),c.jsx("span",{className:"logo-text accent",children:"Buddies"}),c.jsx("span",{className:"logo-dot",children:".io"})]}),c.jsxs("div",{className:"header-right",children:[c.jsxs("nav",{className:"nav",children:[c.jsx(rc,{to:"/",className:"nav-link",onClick:v,children:"Home"}),c.jsx("button",{className:"nav-link nav-button",onClick:S,children:"Games"})]}),c.jsx("div",{className:"auth-section",children:o&&i?c.jsxs("div",{className:"user-section",children:[c.jsxs("div",{className:"level-container",title:`Level ${i.level||1} (${i.xp||0} / ${m} XP)`,children:[c.jsx("div",{className:"level-badge",children:c.jsxs("span",{children:["Lvl ",i.level||1]})}),c.jsx("div",{className:"xp-bar-container",children:c.jsx("div",{className:"xp-bar-fill",style:{width:`${g}%`}})})]}),c.jsx("button",{onClick:()=>r("/account"),className:"user-info user-info-button",title:"View Account Settings",children:i.is_guest?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"user-icon",children:""}),c.jsx("span",{className:"user-name",children:"Guest"})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"user-icon",children:i.premium_tier==="lifetime"?"":i.premium_tier==="monthly"?"":""}),c.jsx("span",{className:"user-name",children:i.display_name||i.username||((y=i.email)==null?void 0:y.split("@")[0])}),i.role==="admin"?c.jsx("span",{className:"premium-badge lifetime",children:" ADMIN"}):i.premium_tier==="lifetime"?c.jsx("span",{className:"premium-badge lifetime",children:"PREMIUM"}):i.premium_tier==="monthly"?c.jsx("span",{className:"premium-badge monthly",children:"PRO"}):null]})}),c.jsx("button",{onClick:x,className:"logout-button",disabled:d,children:d?"Logging out...":"Logout"})]}):c.jsx(rc,{to:"/login",className:"login-link",children:a?"Loading...":"Login"})})]})]})})})})};const LN=()=>{const t=new Date().getFullYear();return c.jsx("footer",{className:"app-footer",children:c.jsxs("div",{className:"footer-content",children:[c.jsx("div",{className:"footer-section",children:c.jsxs("p",{className:"footer-copyright",children:[" ",t," GameBuddies.io - All rights reserved"]})}),c.jsx("div",{className:"footer-section",children:c.jsxs("nav",{className:"footer-nav",children:[c.jsx("a",{href:"/legal#impressum",className:"footer-link",children:"Impressum"}),c.jsx("span",{className:"footer-separator",children:"|"}),c.jsx("a",{href:"/legal#privacy",className:"footer-link",children:"Privacy"}),c.jsx("span",{className:"footer-separator",children:"|"}),c.jsx("a",{href:"/legal#terms",className:"footer-link",children:"Terms"})]})}),c.jsx("div",{className:"footer-section",children:c.jsx("p",{className:"footer-tagline",children:"Play together, compete together"})})]})})};function Uw(t,e){return function(){return t.apply(e,arguments)}}const{toString:IN}=Object.prototype,{getPrototypeOf:Fh}=Object,{iterator:_l,toStringTag:Fw}=Symbol,bl=(t=>e=>{const n=IN.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Gt=t=>(t=t.toLowerCase(),e=>bl(e)===t),kl=t=>e=>typeof e===t,{isArray:Ns}=Array,Ss=kl("undefined");function Zi(t){return t!==null&&!Ss(t)&&t.constructor!==null&&!Ss(t.constructor)&&ft(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bw=Gt("ArrayBuffer");function DN(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bw(t.buffer),e}const UN=kl("string"),ft=kl("function"),$w=kl("number"),eo=t=>t!==null&&typeof t=="object",FN=t=>t===!0||t===!1,Xo=t=>{if(bl(t)!=="object")return!1;const e=Fh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Fw in t)&&!(_l in t)},BN=t=>{if(!eo(t)||Zi(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},$N=Gt("Date"),MN=Gt("File"),VN=Gt("Blob"),zN=Gt("FileList"),HN=t=>eo(t)&&ft(t.pipe),WN=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ft(t.append)&&((e=bl(t))==="formdata"||e==="object"&&ft(t.toString)&&t.toString()==="[object FormData]"))},qN=Gt("URLSearchParams"),[GN,KN,JN,QN]=["ReadableStream","Request","Response","Headers"].map(Gt),YN=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function to(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ns(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Zi(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function Mw(t,e){if(Zi(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const xr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Vw=t=>!Ss(t)&&t!==xr;function td(){const{caseless:t,skipUndefined:e}=Vw(this)&&this||{},n={},r=(s,i)=>{const o=t&&Mw(n,i)||i;Xo(n[o])&&Xo(s)?n[o]=td(n[o],s):Xo(s)?n[o]=td({},s):Ns(s)?n[o]=s.slice():(!e||!Ss(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&to(arguments[s],r);return n}const XN=(t,e,n,{allOwnKeys:r}={})=>(to(e,(s,i)=>{n&&ft(s)?t[i]=Uw(s,n):t[i]=s},{allOwnKeys:r}),t),ZN=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eR=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},tR=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Fh(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},nR=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},rR=t=>{if(!t)return null;if(Ns(t))return t;let e=t.length;if(!$w(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},sR=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Fh(Uint8Array)),iR=(t,e)=>{const r=(t&&t[_l]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},oR=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},aR=Gt("HTMLFormElement"),lR=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Mm=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cR=Gt("RegExp"),zw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};to(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},uR=t=>{zw(t,(e,n)=>{if(ft(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ft(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dR=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ns(t)?r(t):r(String(t).split(e)),n},hR=()=>{},fR=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function pR(t){return!!(t&&ft(t.append)&&t[Fw]==="FormData"&&t[_l])}const mR=t=>{const e=new Array(10),n=(r,s)=>{if(eo(r)){if(e.indexOf(r)>=0)return;if(Zi(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Ns(r)?[]:{};return to(r,(o,a)=>{const l=n(o,s+1);!Ss(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},gR=Gt("AsyncFunction"),yR=t=>t&&(eo(t)||ft(t))&&ft(t.then)&&ft(t.catch),Hw=((t,e)=>t?setImmediate:e?((n,r)=>(xr.addEventListener("message",({source:s,data:i})=>{s===xr&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),xr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ft(xr.postMessage)),vR=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||Hw,wR=t=>t!=null&&ft(t[_l]),P={isArray:Ns,isArrayBuffer:Bw,isBuffer:Zi,isFormData:WN,isArrayBufferView:DN,isString:UN,isNumber:$w,isBoolean:FN,isObject:eo,isPlainObject:Xo,isEmptyObject:BN,isReadableStream:GN,isRequest:KN,isResponse:JN,isHeaders:QN,isUndefined:Ss,isDate:$N,isFile:MN,isBlob:VN,isRegExp:cR,isFunction:ft,isStream:HN,isURLSearchParams:qN,isTypedArray:sR,isFileList:zN,forEach:to,merge:td,extend:XN,trim:YN,stripBOM:ZN,inherits:eR,toFlatObject:tR,kindOf:bl,kindOfTest:Gt,endsWith:nR,toArray:rR,forEachEntry:iR,matchAll:oR,isHTMLForm:aR,hasOwnProperty:Mm,hasOwnProp:Mm,reduceDescriptors:zw,freezeMethods:uR,toObjectSet:dR,toCamelCase:lR,noop:hR,toFiniteNumber:fR,findKey:Mw,global:xr,isContextDefined:Vw,isSpecCompliantForm:pR,toJSONObject:mR,isAsyncFn:gR,isThenable:yR,setImmediate:Hw,asap:vR,isIterable:wR};function Y(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}P.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const Ww=Y.prototype,qw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qw[t]={value:t}});Object.defineProperties(Y,qw);Object.defineProperty(Ww,"isAxiosError",{value:!0});Y.from=(t,e,n,r,s,i)=>{const o=Object.create(Ww);P.toFlatObject(t,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return Y.call(o,a,l,n,r,s),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const xR=null;function nd(t){return P.isPlainObject(t)||P.isArray(t)}function Gw(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function Vm(t,e,n){return t?t.concat(e).map(function(s,i){return s=Gw(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SR(t){return P.isArray(t)&&!t.some(nd)}const _R=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function jl(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,S){return!P.isUndefined(S[v])});const r=n.metaTokens,s=n.visitor||d,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(s))throw new TypeError("visitor must be a function");function u(m){if(m===null)return"";if(P.isDate(m))return m.toISOString();if(P.isBoolean(m))return m.toString();if(!l&&P.isBlob(m))throw new Y("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(m)||P.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function d(m,v,S){let x=m;if(m&&!S&&typeof m=="object"){if(P.endsWith(v,"{}"))v=r?v:v.slice(0,-2),m=JSON.stringify(m);else if(P.isArray(m)&&SR(m)||(P.isFileList(m)||P.endsWith(v,"[]"))&&(x=P.toArray(m)))return v=Gw(v),x.forEach(function(p,_){!(P.isUndefined(p)||p===null)&&e.append(o===!0?Vm([v],_,i):o===null?v:v+"[]",u(p))}),!1}return nd(m)?!0:(e.append(Vm(S,v,i),u(m)),!1)}const h=[],f=Object.assign(_R,{defaultVisitor:d,convertValue:u,isVisitable:nd});function g(m,v){if(!P.isUndefined(m)){if(h.indexOf(m)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(m),P.forEach(m,function(x,y){(!(P.isUndefined(x)||x===null)&&s.call(e,x,P.isString(y)?y.trim():y,v,f))===!0&&g(x,v?v.concat(y):[y])}),h.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return g(t),e}function zm(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Bh(t,e){this._pairs=[],t&&jl(t,this,e)}const Kw=Bh.prototype;Kw.append=function(e,n){this._pairs.push([e,n])};Kw.toString=function(e){const n=e?function(r){return e.call(this,r,zm)}:zm;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function bR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Jw(t,e,n){if(!e)return t;const r=n&&n.encode||bR;P.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=P.isURLSearchParams(e)?e.toString():new Bh(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class kR{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Hm=kR,Qw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jR=typeof URLSearchParams<"u"?URLSearchParams:Bh,ER=typeof FormData<"u"?FormData:null,CR=typeof Blob<"u"?Blob:null,PR={isBrowser:!0,classes:{URLSearchParams:jR,FormData:ER,Blob:CR},protocols:["http","https","file","blob","url","data"]},$h=typeof window<"u"&&typeof document<"u",rd=typeof navigator=="object"&&navigator||void 0,TR=$h&&(!rd||["ReactNative","NativeScript","NS"].indexOf(rd.product)<0),NR=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),RR=$h&&window.location.href||"http://localhost",AR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$h,hasStandardBrowserEnv:TR,hasStandardBrowserWebWorkerEnv:NR,navigator:rd,origin:RR},Symbol.toStringTag,{value:"Module"})),Ye={...AR,...PR};function OR(t,e){return jl(t,new Ye.classes.URLSearchParams,{visitor:function(n,r,s,i){return Ye.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function LR(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function IR(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Yw(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&P.isArray(s)?s.length:o,l?(P.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!P.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&P.isArray(s[o])&&(s[o]=IR(s[o])),!a)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,s)=>{e(LR(r),s,n,0)}),n}return null}function DR(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Mh={transitional:Qw,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=P.isObject(e);if(i&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return s?JSON.stringify(Yw(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e)||P.isReadableStream(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return OR(e,this.formSerializer).toString();if((a=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return jl(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),DR(e)):e}],transformResponse:[function(e){const n=this.transitional||Mh.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(P.isResponse(e)||P.isReadableStream(e))return e;if(e&&P.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?Y.from(a,Y.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ye.classes.FormData,Blob:Ye.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Mh.headers[t]={}});const Vh=Mh,UR=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FR=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&UR[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Wm=Symbol("internals");function Gs(t){return t&&String(t).trim().toLowerCase()}function Zo(t){return t===!1||t==null?t:P.isArray(t)?t.map(Zo):String(t)}function BR(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const $R=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ec(t,e,n,r,s){if(P.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function MR(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function VR(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class El{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,u){const d=Gs(l);if(!d)throw new Error("header name must be a non-empty string");const h=P.findKey(s,d);(!h||s[h]===void 0||u===!0||u===void 0&&s[h]!==!1)&&(s[h||l]=Zo(a))}const o=(a,l)=>P.forEach(a,(u,d)=>i(u,d,l));if(P.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(P.isString(e)&&(e=e.trim())&&!$R(e))o(FR(e),n);else if(P.isObject(e)&&P.isIterable(e)){let a={},l,u;for(const d of e){if(!P.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[u=d[0]]=(l=a[u])?P.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Gs(e),e){const r=P.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return BR(s);if(P.isFunction(n))return n.call(this,s,r);if(P.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Gs(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ec(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Gs(o),o){const a=P.findKey(r,o);a&&(!n||Ec(r,r[a],a,n))&&(delete r[a],s=!0)}}return P.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Ec(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return P.forEach(this,(s,i)=>{const o=P.findKey(r,i);if(o){n[o]=Zo(s),delete n[i];return}const a=e?MR(i):String(i).trim();a!==i&&delete n[i],n[a]=Zo(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[Wm]=this[Wm]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Gs(o);r[a]||(VR(s,o),r[a]=!0)}return P.isArray(e)?e.forEach(i):i(e),this}}El.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(El.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});P.freezeMethods(El);const Wt=El;function Cc(t,e){const n=this||Vh,r=e||n,s=Wt.from(r.headers);let i=r.data;return P.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Xw(t){return!!(t&&t.__CANCEL__)}function Rs(t,e,n){Y.call(this,t??"canceled",Y.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Rs,Y,{__CANCEL__:!0});function Zw(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zR(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function HR(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=r[i];o||(o=u),n[s]=l,r[s]=u;let h=i,f=0;for(;h!==s;)f+=n[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const g=d&&u-d;return g?Math.round(f*1e3/g):void 0}}function WR(t,e){let n=0,r=1e3/e,s,i;const o=(u,d=Date.now())=>{n=d,s=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=r?o(u,d):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-h)))},()=>s&&o(s)]}const Fa=(t,e,n=3)=>{let r=0;const s=HR(50,250);return WR(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-r,u=s(l),d=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},qm=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},Gm=t=>(...e)=>P.asap(()=>t(...e)),qR=Ye.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Ye.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Ye.origin),Ye.navigator&&/(msie|trident)/i.test(Ye.navigator.userAgent)):()=>!0,GR=Ye.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const a=[`${t}=${encodeURIComponent(e)}`];P.isNumber(n)&&a.push(`expires=${new Date(n).toUTCString()}`),P.isString(r)&&a.push(`path=${r}`),P.isString(s)&&a.push(`domain=${s}`),i===!0&&a.push("secure"),P.isString(o)&&a.push(`SameSite=${o}`),document.cookie=a.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function KR(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function JR(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ex(t,e,n){let r=!KR(e);return t&&(r||n==!1)?JR(t,e):e}const Km=t=>t instanceof Wt?{...t}:t;function Pr(t,e){e=e||{};const n={};function r(u,d,h,f){return P.isPlainObject(u)&&P.isPlainObject(d)?P.merge.call({caseless:f},u,d):P.isPlainObject(d)?P.merge({},d):P.isArray(d)?d.slice():d}function s(u,d,h,f){if(P.isUndefined(d)){if(!P.isUndefined(u))return r(void 0,u,h,f)}else return r(u,d,h,f)}function i(u,d){if(!P.isUndefined(d))return r(void 0,d)}function o(u,d){if(P.isUndefined(d)){if(!P.isUndefined(u))return r(void 0,u)}else return r(void 0,d)}function a(u,d,h){if(h in e)return r(u,d);if(h in t)return r(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d,h)=>s(Km(u),Km(d),h,!0)};return P.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||s,f=h(t[d],e[d],d);P.isUndefined(f)&&h!==a||(n[d]=f)}),n}const tx=t=>{const e=Pr({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;if(e.headers=o=Wt.from(o),e.url=Jw(ex(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),P.isFormData(n)){if(Ye.hasStandardBrowserEnv||Ye.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(P.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(Ye.hasStandardBrowserEnv&&(r&&P.isFunction(r)&&(r=r(e)),r||r!==!1&&qR(e.url))){const l=s&&i&&GR.read(i);l&&o.set(s,l)}return e},QR=typeof XMLHttpRequest<"u",YR=QR&&function(t){return new Promise(function(n,r){const s=tx(t);let i=s.data;const o=Wt.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,d,h,f,g,m;function v(){g&&g(),m&&m(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function x(){if(!S)return;const p=Wt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:p,config:t,request:S};Zw(function(C){n(C),v()},function(C){r(C),v()},b),S=null}"onloadend"in S?S.onloadend=x:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(x)},S.onabort=function(){S&&(r(new Y("Request aborted",Y.ECONNABORTED,t,S)),S=null)},S.onerror=function(_){const b=_&&_.message?_.message:"Network Error",k=new Y(b,Y.ERR_NETWORK,t,S);k.event=_||null,r(k),S=null},S.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const b=s.transitional||Qw;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),r(new Y(_,b.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,S)),S=null},i===void 0&&o.setContentType(null),"setRequestHeader"in S&&P.forEach(o.toJSON(),function(_,b){S.setRequestHeader(b,_)}),P.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),a&&a!=="json"&&(S.responseType=s.responseType),u&&([f,m]=Fa(u,!0),S.addEventListener("progress",f)),l&&S.upload&&([h,g]=Fa(l),S.upload.addEventListener("progress",h),S.upload.addEventListener("loadend",g)),(s.cancelToken||s.signal)&&(d=p=>{S&&(r(!p||p.type?new Rs(null,t,S):p),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const y=zR(s.url);if(y&&Ye.protocols.indexOf(y)===-1){r(new Y("Unsupported protocol "+y+":",Y.ERR_BAD_REQUEST,t));return}S.send(i||null)})},XR=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const d=u instanceof Error?u:this.reason;r.abort(d instanceof Y?d:new Rs(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new Y(`timeout ${e} of ms exceeded`,Y.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=r;return l.unsubscribe=()=>P.asap(a),l}},ZR=XR,eA=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},tA=async function*(t,e){for await(const n of nA(t))yield*eA(n,e)},nA=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},Jm=(t,e,n,r)=>{const s=tA(t,e);let i=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await s.next();if(u){a(),l.close();return}let h=d.byteLength;if(n){let f=i+=h;n(f)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Qm=64*1024,{isFunction:Ao}=P,rA=(({Request:t,Response:e})=>({Request:t,Response:e}))(P.global),{ReadableStream:Ym,TextEncoder:Xm}=P.global,Zm=(t,...e)=>{try{return!!t(...e)}catch{return!1}},sA=t=>{t=P.merge.call({skipUndefined:!0},rA,t);const{fetch:e,Request:n,Response:r}=t,s=e?Ao(e):typeof fetch=="function",i=Ao(n),o=Ao(r);if(!s)return!1;const a=s&&Ao(Ym),l=s&&(typeof Xm=="function"?(m=>v=>m.encode(v))(new Xm):async m=>new Uint8Array(await new n(m).arrayBuffer())),u=i&&a&&Zm(()=>{let m=!1;const v=new n(Ye.origin,{body:new Ym,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!v}),d=o&&a&&Zm(()=>P.isReadableStream(new r("").body)),h={stream:d&&(m=>m.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!h[m]&&(h[m]=(v,S)=>{let x=v&&v[m];if(x)return x.call(v);throw new Y(`Response type '${m}' is not supported`,Y.ERR_NOT_SUPPORT,S)})});const f=async m=>{if(m==null)return 0;if(P.isBlob(m))return m.size;if(P.isSpecCompliantForm(m))return(await new n(Ye.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(P.isArrayBufferView(m)||P.isArrayBuffer(m))return m.byteLength;if(P.isURLSearchParams(m)&&(m=m+""),P.isString(m))return(await l(m)).byteLength},g=async(m,v)=>{const S=P.toFiniteNumber(m.getContentLength());return S??f(v)};return async m=>{let{url:v,method:S,data:x,signal:y,cancelToken:p,timeout:_,onDownloadProgress:b,onUploadProgress:k,responseType:C,headers:E,withCredentials:O="same-origin",fetchOptions:T}=tx(m),A=e||fetch;C=C?(C+"").toLowerCase():"text";let j=ZR([y,p&&p.toAbortSignal()],_),N=null;const R=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let F;try{if(k&&u&&S!=="get"&&S!=="head"&&(F=await g(E,x))!==0){let $=new n(v,{method:"POST",body:x,duplex:"half"}),G;if(P.isFormData(x)&&(G=$.headers.get("content-type"))&&E.setContentType(G),$.body){const[Le,ie]=qm(F,Fa(Gm(k)));x=Jm($.body,Qm,Le,ie)}}P.isString(O)||(O=O?"include":"omit");const U=i&&"credentials"in n.prototype,W={...T,signal:j,method:S.toUpperCase(),headers:E.normalize().toJSON(),body:x,duplex:"half",credentials:U?O:void 0};N=i&&new n(v,W);let L=await(i?A(N,T):A(v,W));const M=d&&(C==="stream"||C==="response");if(d&&(b||M&&R)){const $={};["status","statusText","headers"].forEach(He=>{$[He]=L[He]});const G=P.toFiniteNumber(L.headers.get("content-length")),[Le,ie]=b&&qm(G,Fa(Gm(b),!0))||[];L=new r(Jm(L.body,Qm,Le,()=>{ie&&ie(),R&&R()}),$)}C=C||"text";let V=await h[P.findKey(h,C)||"text"](L,m);return!M&&R&&R(),await new Promise(($,G)=>{Zw($,G,{data:V,headers:Wt.from(L.headers),status:L.status,statusText:L.statusText,config:m,request:N})})}catch(U){throw R&&R(),U&&U.name==="TypeError"&&/Load failed|fetch/i.test(U.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,m,N),{cause:U.cause||U}):Y.from(U,U&&U.code,m,N)}}},iA=new Map,nx=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,a=o,l,u,d=iA;for(;a--;)l=i[a],u=d.get(l),u===void 0&&d.set(l,u=a?new Map:sA(e)),d=u;return u};nx();const zh={http:xR,xhr:YR,fetch:{get:nx}};P.forEach(zh,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const eg=t=>`- ${t}`,oA=t=>P.isFunction(t)||t===null||t===!1;function aA(t,e){t=P.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let a;if(s=r,!oA(r)&&(s=zh[(a=String(r)).toLowerCase()],s===void 0))throw new Y(`Unknown adapter '${a}'`);if(s&&(P.isFunction(s)||(s=s.get(e))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(eg).join(`
`):" "+eg(o[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s}const rx={getAdapter:aA,adapters:zh};function Pc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Rs(null,t)}function tg(t){return Pc(t),t.headers=Wt.from(t.headers),t.data=Cc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),rx.getAdapter(t.adapter||Vh.adapter,t)(t).then(function(r){return Pc(t),r.data=Cc.call(t,t.transformResponse,r),r.headers=Wt.from(r.headers),r},function(r){return Xw(r)||(Pc(t),r&&r.response&&(r.response.data=Cc.call(t,t.transformResponse,r.response),r.response.headers=Wt.from(r.response.headers))),Promise.reject(r)})}const sx="1.13.2",Cl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Cl[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ng={};Cl.transitional=function(e,n,r){function s(i,o){return"[Axios v"+sx+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new Y(s(o," has been removed"+(n?" in "+n:"")),Y.ERR_DEPRECATED);return n&&!ng[o]&&(ng[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};Cl.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function lA(t,e,n){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Y("option "+i+" must be "+l,Y.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Y("Unknown option "+i,Y.ERR_BAD_OPTION)}}const ea={assertOptions:lA,validators:Cl},Jt=ea.validators;class Ba{constructor(e){this.defaults=e||{},this.interceptors={request:new Hm,response:new Hm}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Pr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ea.assertOptions(r,{silentJSONParsing:Jt.transitional(Jt.boolean),forcedJSONParsing:Jt.transitional(Jt.boolean),clarifyTimeoutError:Jt.transitional(Jt.boolean)},!1),s!=null&&(P.isFunction(s)?n.paramsSerializer={serialize:s}:ea.assertOptions(s,{encode:Jt.function,serialize:Jt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ea.assertOptions(n,{baseUrl:Jt.spelling("baseURL"),withXsrfToken:Jt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&P.merge(i.common,i[n.method]);i&&P.forEach(["delete","get","head","post","put","patch","common"],m=>{delete i[m]}),n.headers=Wt.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let d,h=0,f;if(!l){const m=[tg.bind(this),void 0];for(m.unshift(...a),m.push(...u),f=m.length,d=Promise.resolve(n);h<f;)d=d.then(m[h++],m[h++]);return d}f=a.length;let g=n;for(;h<f;){const m=a[h++],v=a[h++];try{g=m(g)}catch(S){v.call(this,S);break}}try{d=tg.call(this,g)}catch(m){return Promise.reject(m)}for(h=0,f=u.length;h<f;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=Pr(this.defaults,e);const n=ex(e.baseURL,e.url,e.allowAbsoluteUrls);return Jw(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){Ba.prototype[e]=function(n,r){return this.request(Pr(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Pr(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ba.prototype[e]=n(),Ba.prototype[e+"Form"]=n(!0)});const ta=Ba;class Hh{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Rs(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Hh(function(s){e=s}),cancel:e}}}const cA=Hh;function uA(t){return function(n){return t.apply(null,n)}}function dA(t){return P.isObject(t)&&t.isAxiosError===!0}const sd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(sd).forEach(([t,e])=>{sd[e]=t});const hA=sd;function ix(t){const e=new ta(t),n=Uw(ta.prototype.request,e);return P.extend(n,ta.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return ix(Pr(t,s))},n}const Ne=ix(Vh);Ne.Axios=ta;Ne.CanceledError=Rs;Ne.CancelToken=cA;Ne.isCancel=Xw;Ne.VERSION=sx;Ne.toFormData=jl;Ne.AxiosError=Y;Ne.Cancel=Ne.CanceledError;Ne.all=function(e){return Promise.all(e)};Ne.spread=uA;Ne.isAxiosError=dA;Ne.mergeConfig=Pr;Ne.AxiosHeaders=Wt;Ne.formToJSON=t=>Yw(P.isHTMLForm(t)?new FormData(t):t);Ne.getAdapter=rx.getAdapter;Ne.HttpStatusCode=hA;Ne.default=Ne;const fA=Ne;const pA=w.memo(({game:t})=>{const[e,n]=w.useState(!1),r=t.screenshot||t.thumbnailUrl,s=()=>{n(!0)};return c.jsx("a",{href:t.path,className:"game-card-link",children:c.jsxs(Je.div,{className:"game-card",whileHover:{y:-10},transition:{duration:.3},children:[c.jsxs("div",{className:"game-card-image-container",children:[r&&!e?c.jsx("img",{src:t.screenshot||t.thumbnailUrl,alt:t.name,className:"game-card-image",onError:s}):c.jsxs("div",{className:"game-card-placeholder",children:[c.jsx("div",{className:"placeholder-icon",children:t.icon||""}),c.jsx("div",{className:"placeholder-text",children:t.name})]}),c.jsx("div",{className:"game-card-overlay",children:c.jsx("div",{className:"play-button",children:"PLAY NOW"})})]}),c.jsxs("div",{className:"game-card-content",children:[c.jsx("h3",{className:"game-card-title",children:t.name}),c.jsx("p",{className:"game-card-description",children:t.description}),c.jsx("div",{className:"game-card-footer",children:c.jsx("div",{className:"play-button-small",children:"Play"})})]})]})})},(t,e)=>t.game.id===e.game.id&&t.game.available===e.game.available);const mA=1e3,gA=({onRoomCreated:t,onCancel:e})=>{const[n,r]=w.useState(""),[s,i]=w.useState(!1),[o,a]=w.useState(!0),[l,u]=w.useState(!1),[d,h]=w.useState(""),{socket:f,isConnected:g,connectSocket:m}=nr(),{user:v,session:S}=Ot(),x=w.useRef(0),y=!!(S!=null&&S.user),p=async _=>{var k,C;_.preventDefault();const b=Date.now();if(!(b-x.current<mA)){if(x.current=b,!y&&!n.trim()){h("Please enter your name");return}if(n.trim()&&n.trim().length<2){h("Name must be at least 2 characters long");return}if(n.trim()&&n.trim().length>20){h("Name must be less than 20 characters");return}u(!0),h("");try{const E=y?n.trim()||(v==null?void 0:v.display_name)||(v==null?void 0:v.username)||"User":n.trim(),O=y&&n.trim()?n.trim():null;console.log(" Creating room:",{playerName:E,customLobbyName:O,isAuthenticated:y});const T=f||m();if(!T)throw new Error("Failed to establish socket connection");g||(console.log(" Waiting for socket connection..."),await new Promise((R,F)=>{const U=setTimeout(()=>{F(new Error("Connection timeout"))},1e4),W=()=>{clearTimeout(U),T.off("connect",W),T.off("connect_error",L),R()},L=M=>{clearTimeout(U),T.off("connect",W),T.off("connect_error",L),F(M)};T.connected?(clearTimeout(U),R()):(T.on("connect",W),T.on("connect_error",L))})),console.log(" [CLIENT] Connected to server, creating room..."),console.log(" [CLIENT DEBUG] Socket ID:",T.id),console.log(" [CLIENT DEBUG] Player name:",E.trim());const A=()=>{T.off("roomCreated",j),T.off("error",N)},j=R=>{console.log(" [CLIENT] Room created successfully:",R),A(),t&&t({roomCode:R.roomCode,playerName:E.trim(),isHost:!0,room:R.room}),u(!1)},N=R=>{console.error(" [CLIENT] Room creation error:",R),A(),h(R.message||"Failed to create room. Please try again."),u(!1)};T.on("roomCreated",j),T.on("error",N),T.emit("createRoom",{playerName:E,customLobbyName:O,streamerMode:s,isPublic:o,supabaseUserId:((k=S==null?void 0:S.user)==null?void 0:k.id)||null}),console.log(" [CLIENT] createRoom event sent",{playerName:E,customLobbyName:O,streamerMode:s,isPublic:o,isAuthenticated:y,supabaseUserId:(C=S==null?void 0:S.user)==null?void 0:C.id}),setTimeout(()=>{l&&(A(),h("Room creation timed out. Please try again."),u(!1))},15e3)}catch(E){console.error(" Unexpected error:",E),h("An unexpected error occurred. Please try again later."),u(!1)}}};return c.jsx("div",{className:"create-room-overlay",children:c.jsxs("div",{className:"create-room-modal",children:[c.jsx("h2",{className:"create-room-title",children:"Create Game Room"}),c.jsxs("form",{onSubmit:p,className:"create-room-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"displayName",children:y?"Display Name (Optional)":"Your Name"}),c.jsx("input",{type:"text",id:"displayName",value:n,onChange:_=>r(_.target.value),placeholder:y?`Leave blank to use ${(v==null?void 0:v.username)||"your account name"}`:"Enter your name",maxLength:20,disabled:l,autoFocus:!0}),y&&c.jsx("small",{children:"Customize how your name appears in this lobby"})]}),c.jsx("div",{className:"form-group checkbox-group",children:c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:o,onChange:_=>a(_.target.checked),disabled:l}),c.jsxs("span",{className:"checkbox-text",children:[" Public Room",c.jsx("small",{children:"Let other players discover and join your room"})]})]})}),c.jsx("div",{className:"form-group checkbox-group",children:c.jsxs("label",{className:"checkbox-label",children:[c.jsx("input",{type:"checkbox",checked:s,onChange:_=>i(_.target.checked),disabled:l}),c.jsxs("span",{className:"checkbox-text",children:[" Streamer Mode",c.jsx("small",{children:"Hide room code from other players"})]})]})}),d&&c.jsx("div",{className:"error-message",children:d}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:e,className:"cancel-button",disabled:l,children:"Cancel"}),c.jsx("button",{type:"submit",className:"create-button",disabled:l,children:l?"Creating...":"Create Room"})]})]})]})})};const yA=1e3,vA=({initialRoomCode:t="",initialPlayerName:e="",autoJoin:n=!1,onRoomJoined:r,onCancel:s})=>{const[i,o]=w.useState(t),[a,l]=w.useState(e||""),[u,d]=w.useState(!1),[h,f]=w.useState(""),g=!!t,{user:m,session:v}=Ot(),{socket:S,connectSocket:x,isConnected:y}=nr(),p=w.useRef(0),_=w.useRef(!1),b=!!(v!=null&&v.user),k=async E=>{E&&E.preventDefault&&E.preventDefault();const O=Date.now();if(O-p.current<yA)return;if(p.current=O,!i.trim()){f("Please enter a room code");return}if(i.trim().length!==6){f("Room code must be 6 characters long");return}if(!b&&!a.trim()){f("Please enter your name");return}if(a.trim()&&a.trim().length<2){f("Name must be at least 2 characters long");return}if(a.trim()&&a.trim().length>20){f("Name must be less than 20 characters");return}d(!0),f("");const T=b?(m==null?void 0:m.display_name)||"Player":a.trim(),A=b&&a.trim()?a.trim():null;console.log(" [JOIN DEBUG] Starting room join process:",{roomCode:i.trim().toUpperCase(),playerName:T,customLobbyName:A,isAuthenticated:b,timestamp:new Date().toISOString(),isInitialRoomCode:!!t,currentURL:window.location.href});try{console.log(" [JOIN DEBUG] Joining room:",i.trim().toUpperCase());let j=S;(!S||!y)&&(console.log(" [JOIN DEBUG] Socket not connected, connecting..."),j=x());const N=()=>{var U,W;console.log(" [CLIENT] Connected to server, joining room..."),console.log(" [CLIENT DEBUG] Socket ID:",j==null?void 0:j.id),console.log(" [CLIENT DEBUG] Room code:",i.trim().toUpperCase()),console.log(" [CLIENT DEBUG] Player name:",T),console.log(" [JOIN DEBUG] Connected, sending joinRoom event");const R=new URLSearchParams(window.location.search),F=R.get("ishost")==="true"||R.get("role")==="gm";j==null||j.emit("joinRoom",{roomCode:i.trim().toUpperCase(),playerName:T,customLobbyName:A,supabaseUserId:((U=v==null?void 0:v.user)==null?void 0:U.id)||null,isHostHint:F}),console.log(" [CLIENT] joinRoom event sent",{playerName:T,customLobbyName:A,isAuthenticated:b,supabaseUserId:(W=v==null?void 0:v.user)==null?void 0:W.id})};if(!_.current&&j){_.current=!0;const R=U=>{var W;console.log(" [CLIENT] Room joined successfully:",U),console.log(" [CLIENT DEBUG] Join data:",{roomCode:U.roomCode,isHost:U.isHost,playerCount:((W=U.players)==null?void 0:W.length)||0}),console.log(" [JOIN DEBUG] Join successful, transitioning to lobby"),j==null||j.off("roomJoined",R),j==null||j.off("error",F),_.current=!1,r&&r({roomCode:U.roomCode,playerName:T,isHost:!!U.isHost,players:U.players,room:U.room})},F=U=>{console.error(" [JOIN DEBUG] Join room error:",{error:U.message||U,code:U.code,debug:U.debug,roomCode:i.trim().toUpperCase(),playerName:T,timestamp:new Date().toISOString()}),j==null||j.off("roomJoined",R),j==null||j.off("error",F),_.current=!1;let W=U.message;switch(U.code){case"ROOM_NOT_FOUND":W="Room not found. Please check the room code and try again.",console.error(" [JOIN DEBUG] Room not found - may have been cleaned up");break;case"ROOM_FULL":W="This room is full. Please try joining a different room.";break;case"ROOM_NOT_ACCEPTING":W="This room is no longer accepting new players.";break;case"DUPLICATE_PLAYER":W="A player with this name is already in the room. Please choose a different name.";break;default:W=W||"Failed to join room. Please try again."}f(W),d(!1)};j.on("roomJoined",R),j.on("error",F)}j!=null&&j.connected?N():j==null||j.once("connect",N),setTimeout(()=>{u&&(f("Join request timed out. Please try again."),d(!1),_.current=!1)},15e3)}catch(j){console.error(" Unexpected error:",j),f("An unexpected error occurred. Please try again."),d(!1),_.current=!1}};w.useEffect(()=>{if(n&&t&&e&&!u){const E=setTimeout(()=>k(),200);return()=>clearTimeout(E)}},[n,t,e]);const C=E=>{const O=E.target.value.toUpperCase().replace(/[^A-Z0-9]/g,"");O.length<=6&&o(O)};return c.jsx("div",{className:"join-room-overlay",children:c.jsxs("div",{className:"join-room-modal",children:[c.jsx("h2",{className:"join-room-title",children:"Join Room"}),c.jsxs("form",{onSubmit:k,className:"join-room-form",children:[g?c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"roomCode",children:"ROOM CODE"}),c.jsx("div",{className:"invite-link-indicator",children:" Joining via invite link"}),c.jsx("small",{children:"Room code hidden for privacy"})]}):c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"roomCode",children:"ROOM CODE"}),c.jsx("input",{type:"text",id:"roomCode",value:i,onChange:C,placeholder:"4AJ5XQ",disabled:u,maxLength:6,autoFocus:!0,className:"room-code-input"}),c.jsx("small",{children:"Ask the room host for the 6-character room code"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"displayName",children:b?"DISPLAY NAME (Optional)":"YOUR NAME"}),c.jsx("input",{type:"text",id:"displayName",value:a,onChange:E=>l(E.target.value),placeholder:b?`Leave blank to use ${(m==null?void 0:m.username)||"your account name"}`:"Enter your name",disabled:u,maxLength:20}),b?c.jsx("small",{children:"Customize how your name appears in this lobby"}):c.jsx("small",{children:"This will be your display name in the room"})]}),h&&c.jsx("div",{className:"error-message",children:h}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:s,className:"cancel-button",disabled:u,children:"Cancel"}),c.jsx("button",{type:"submit",className:"join-button",disabled:u||!i.trim()||!b&&!a.trim(),children:u?"JOINING ROOM...":"JOIN ROOM"})]})]}),c.jsxs("div",{className:"join-info",children:[c.jsx("h3",{children:"Joining a Room"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Get the room code from your friend"}),c.jsx("li",{children:"Enter your name (must be unique in the room)"}),c.jsx("li",{children:"Wait for the host to select and start a game"})]})]})]})})};const wA=({onRoomSelected:t,onCancel:e})=>{const[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,a]=w.useState(""),[l,u]=w.useState("all"),[d,h]=w.useState([]),[f,g]=w.useState(""),[m,v]=w.useState(!1),S=w.useRef(null),{socket:x,connectSocket:y}=nr(),p=d.find(j=>j.id===l);w.useEffect(()=>{const j=N=>{S.current&&!S.current.contains(N.target)&&v(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const _=j=>d.find(N=>N.id===j),b=j=>{var W,L,M,V,$,G,Le,ie,He;const N=(W=j.members)==null?void 0:W.find(B=>B.user_id===j.host_id),R=(N==null?void 0:N.custom_lobby_name)||((L=N==null?void 0:N.user)==null?void 0:L.display_name)||((M=N==null?void 0:N.user)==null?void 0:M.username)||((V=j.host)==null?void 0:V.display_name)||(($=j.host)==null?void 0:$.username)||"Unknown Host",F=((G=N==null?void 0:N.user)==null?void 0:G.premium_tier)||((Le=j.host)==null?void 0:Le.premium_tier)||"free",U=((ie=N==null?void 0:N.user)==null?void 0:ie.role)||((He=j.host)==null?void 0:He.role)||"user";return{name:R,premiumTier:F,role:U}},k=()=>{if(!f.trim())return n;const j=f.toLowerCase();return n.filter(N=>{const R=b(N);return N.room_code.toLowerCase().includes(j)||R.name.toLowerCase().includes(j)})};w.useEffect(()=>{(async()=>{try{const R=await(await fetch("/api/games")).json();R.success&&R.games&&h(R.games)}catch(N){console.error("Failed to fetch games:",N)}})()},[]),w.useEffect(()=>{C();const j=setInterval(()=>{C()},5e3);return()=>clearInterval(j)},[l]);const C=async()=>{try{const j=x||y();if(!j){a("Failed to connect to server"),i(!1);return}j.emit("getPublicRooms",{gameType:l});const N=F=>{console.log(" [BROWSER DEBUG] Received rooms list:",F),F.rooms&&F.rooms.length>0&&console.log(" [BROWSER DEBUG] First room host data:",{host:F.rooms[0].host,members:F.rooms[0].members}),r(F.rooms||[]),i(!1),a(""),j.off("publicRoomsList",N)},R=F=>{a(F.message||"Failed to load rooms"),i(!1),j.off("error",R)};j.on("publicRoomsList",N),j.on("error",R)}catch{a("Failed to load rooms"),i(!1)}},E=j=>{t&&t({roomCode:j.room_code})},O=j=>j.status==="in_game"?c.jsx("span",{className:"status-badge in-game",children:"In Game"}):j.status==="lobby"?c.jsx("span",{className:"status-badge lobby",children:"Waiting"}):c.jsx("span",{className:"status-badge",children:j.status}),T=j=>{var R;return`${((R=j.members)==null?void 0:R.filter(F=>F.is_connected).length)||0}/${j.max_players}`},A=(j,N)=>N==="admin"?c.jsx("span",{className:"host-premium-badge lifetime",title:"Administrator",children:""}):j==="lifetime"?c.jsx("span",{className:"host-premium-badge lifetime",title:"Lifetime Premium",children:""}):j==="monthly"?c.jsx("span",{className:"host-premium-badge monthly",title:"Pro Member",children:""}):null;return c.jsx("div",{className:"browse-rooms-overlay",children:c.jsxs("div",{className:"browse-rooms-modal",children:[c.jsxs("div",{className:"browse-header",children:[c.jsx("h2",{children:" Browse Public Rooms"}),c.jsx("button",{className:"close-button",onClick:e,children:""})]}),c.jsxs("div",{className:"browse-filters",children:[c.jsx("input",{type:"text",placeholder:" Search room code or host...",value:f,onChange:j=>g(j.target.value),className:"search-input"}),c.jsxs("div",{className:"game-filter-dropdown",ref:S,children:[c.jsxs("button",{className:"game-filter-trigger",onClick:()=>v(!m),type:"button",children:[l==="all"?c.jsxs("span",{className:"trigger-content",children:[c.jsx("span",{className:"dropdown-icon",children:""}),c.jsx("span",{children:"All Games"})]}):c.jsxs("span",{className:"trigger-content",children:[p!=null&&p.thumbnailUrl?c.jsx("img",{src:p.thumbnailUrl,alt:"",className:"dropdown-thumbnail"}):c.jsx("span",{className:"dropdown-icon",children:(p==null?void 0:p.icon)||""}),c.jsx("span",{children:(p==null?void 0:p.name)||"Select Game"})]}),c.jsx("span",{className:"dropdown-arrow",children:m?"":""})]}),m&&c.jsxs("div",{className:"game-filter-menu",children:[c.jsxs("div",{className:`game-filter-option ${l==="all"?"selected":""}`,onClick:()=>{u("all"),v(!1)},children:[c.jsx("span",{className:"dropdown-icon",children:""}),c.jsx("span",{children:"All Games"})]}),d.map(j=>c.jsxs("div",{className:`game-filter-option ${l===j.id?"selected":""}`,onClick:()=>{u(j.id),v(!1)},children:[j.thumbnailUrl?c.jsx("img",{src:j.thumbnailUrl,alt:"",className:"dropdown-thumbnail"}):c.jsx("span",{className:"dropdown-icon",children:j.icon||""}),c.jsx("span",{children:j.name})]},j.id))]})]}),c.jsx("button",{className:"refresh-button",onClick:C,children:""})]}),s&&c.jsxs("div",{className:"loading-state",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading rooms..."})]}),o&&c.jsx("div",{className:"error-message",children:o}),!s&&!o&&n.length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("p",{children:" No public rooms available"}),c.jsx("p",{className:"empty-hint",children:"Be the first to create a public room!"})]}),!s&&!o&&n.length>0&&k().length===0&&c.jsxs("div",{className:"empty-state",children:[c.jsx("p",{children:" No rooms match your search"}),c.jsx("p",{className:"empty-hint",children:"Try a different room code or host name"})]}),!s&&!o&&k().length>0&&c.jsx("div",{className:"rooms-list",children:k().map(j=>{const N=_(j.current_game);return c.jsxs("div",{className:`room-card ${j.status}`,children:[c.jsx("div",{className:"room-card-header",children:c.jsxs("div",{className:"game-section",children:[N!=null&&N.thumbnailUrl?c.jsx("img",{src:N.thumbnailUrl,alt:(N==null?void 0:N.name)||j.current_game,className:"game-thumbnail"}):c.jsx("div",{className:"game-icon-box",children:(N==null?void 0:N.icon)||""}),c.jsxs("div",{className:"game-info",children:[c.jsx("span",{className:"game-title",children:(N==null?void 0:N.name)||"No Game Selected"}),c.jsxs("div",{className:"room-meta",children:[c.jsx("span",{className:"room-code",children:j.room_code}),O(j)]})]})]})}),c.jsxs("div",{className:"room-details",children:[c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-icon",children:""}),c.jsxs("span",{className:"detail-text",children:["Host: ",b(j).name," ",A(b(j).premiumTier,b(j).role)]})]}),c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-icon",children:""}),c.jsxs("span",{className:"detail-text",children:["Players: ",T(j)]})]}),j.streamer_mode&&c.jsxs("div",{className:"detail-item",children:[c.jsx("span",{className:"detail-icon",children:""}),c.jsx("span",{className:"detail-text",children:"Streamer Mode"})]})]}),c.jsx("div",{className:"room-actions",children:c.jsx("button",{className:"join-room-button",onClick:()=>E(j),disabled:j.status==="in_game",children:j.status==="in_game"?"Game in Progress":"Join Room"})})]},j.id)})}),c.jsx("div",{className:"browse-footer",children:c.jsx("button",{className:"cancel-button",onClick:e,children:"Close"})})]})})};const xA=({onGameSelect:t,isHost:e,disabled:n})=>{const[r,s]=w.useState([]),[i,o]=w.useState(!0),[a,l]=w.useState(null);return w.useEffect(()=>{(async()=>{try{console.log("[GamePicker]  Fetching games from /api/games...");const d=await fetch("/api/games");console.log("[GamePicker]  Response status:",d.status);const h=await d.json();if(console.log("[GamePicker]  API response:",h),h.success&&h.games)console.log("[GamePicker]  Successfully loaded",h.games.length,"games"),console.log("[GamePicker]  Game IDs:",h.games.map(f=>f.id)),s(h.games);else throw console.error("[GamePicker]  Invalid response format:",h),new Error("Failed to load games")}catch(d){console.error("[GamePicker]  Error loading games:",d),console.error("[GamePicker]  Error details:",d.message),l("Failed to load games. Please refresh the page."),s([{id:"ddf",name:"Der dmmste fliegt",icon:"",description:"Quiz game where the worst player gets eliminated",maxPlayers:8},{id:"schooled",name:"Schooled!",icon:"",description:"Educational quiz game for students",maxPlayers:10},{id:"susd",name:"SUS'D",icon:"",description:"Imposter game - find who's acting suspicious!",maxPlayers:10},{id:"bingo",name:"Bingo Buddies",icon:"",description:"Fast-paced multiplayer bingo with custom cards and power-ups.",maxPlayers:12},{id:"cluescale",name:"ClueScale",icon:"",description:"A mystery-solving game where players follow clues to scale the challenge!",maxPlayers:10}])}finally{o(!1)}})()},[]),e?i?c.jsxs("div",{className:"game-picker",children:[c.jsx("h3",{className:"picker-title",children:"Loading Games..."}),c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]}):(console.log("[GamePicker]  Rendering with",r.length,"games:",r.map(u=>({id:u.id,name:u.name}))),c.jsxs("div",{className:"game-picker",children:[a&&c.jsx("div",{className:"error-message",style:{color:"#ff6b6b",marginBottom:"1rem",padding:"0.5rem",background:"rgba(255, 107, 107, 0.1)",borderRadius:"4px"},children:a}),c.jsx("h3",{className:"picker-title",children:"Select a Game"}),c.jsx("div",{className:"games-grid",children:r.map(u=>(console.log("[GamePicker]  Rendering game:",u.id,u.name),c.jsxs(Je.button,{className:"game-option",onClick:()=>t(u.id),disabled:n,whileHover:{scale:n?1:1.05},whileTap:{scale:n?1:.95},children:[c.jsx("div",{className:"game-icon",children:u.thumbnailUrl?c.jsx("img",{src:u.thumbnailUrl,alt:u.name}):u.icon||""}),c.jsx("h4",{className:"game-name",children:u.name}),c.jsx("p",{className:"game-description",children:u.description}),c.jsx("div",{className:"game-meta",children:c.jsxs("span",{className:"max-players",children:[u.min_players||2,"-",u.max_players||u.maxPlayers," Players"]})})]},u.id)))})]})):c.jsx("div",{className:"game-picker",children:c.jsxs("div",{className:"waiting-for-host",children:[c.jsx("h3",{children:"Waiting for Host"}),c.jsx("p",{children:"The host will select a game to play"}),c.jsxs("div",{className:"loading-dots",children:[c.jsx("span",{}),c.jsx("span",{}),c.jsx("span",{})]})]})})};const SA=({messages:t,onSendMessage:e,currentPlayerName:n})=>{const[r,s]=w.useState(""),i=w.useRef(null),o=a=>{a.preventDefault(),r.trim()&&(e(r.trim()),s(""))};return c.jsxs("div",{className:"chat-window",children:[c.jsx("div",{className:"chat-header",children:c.jsx("h3",{children:"Lobby Chat"})}),c.jsxs("div",{className:"chat-messages",children:[t.map((a,l)=>{const u=a.playerName===n,d=a.type==="system";return c.jsxs("div",{className:`chat-message ${u?"me":""} ${d?"system":""}`,children:[!d&&c.jsx("span",{className:"chat-sender",children:a.playerName}),c.jsx("span",{className:"chat-text",children:a.message})]},a.id||l)}),c.jsx("div",{ref:i})]}),c.jsxs("form",{className:"chat-input-form",onSubmit:o,children:[c.jsx("input",{type:"text",placeholder:"Type a message...",value:r,onChange:a=>s(a.target.value),maxLength:200}),c.jsx("button",{type:"submit",disabled:!r.trim(),children:"Send"})]})]})};const _A=({playerName:t})=>{const{socket:e,socketRef:n}=nr(),r=e||(n==null?void 0:n.current),[s,i]=w.useState({position:50,redWins:0,blueWins:0}),[o,a]=w.useState(null),[l,u]=w.useState(!1),[d,h]=w.useState(null);w.useEffect(()=>{if(!r)return;const g=v=>{i({position:v.position,redWins:v.redWins,blueWins:v.blueWins}),v.winner&&(a(v.winner),setTimeout(()=>a(null),2e3))},m=v=>{v.team&&h(v.team)};return r.on("tugOfWar:update",g),r.on("tugOfWar:yourTeam",m),()=>{r.off("tugOfWar:update",g),r.off("tugOfWar:yourTeam",m)}},[r]);const f=g=>{g.type==="touchstart"&&g.preventDefault(),r&&(u(!0),setTimeout(()=>u(!1),100),r.emit("tugOfWar:pull",{team:d,playerName:t}))};return c.jsxs("div",{className:`tug-of-war ${d}-team`,children:[c.jsxs("div",{className:"tow-header",children:[c.jsx("h3",{children:" Team Battle"}),c.jsxs("div",{className:"tow-scores",children:[c.jsx("span",{className:"score red",title:"Red Team Wins",children:s.redWins}),c.jsx("span",{className:"vs",children:"VS"}),c.jsx("span",{className:"score blue",title:"Blue Team Wins",children:s.blueWins})]})]}),c.jsxs("div",{className:"tow-arena",children:[c.jsxs("div",{className:"rope-track",children:[c.jsx("div",{className:"center-marker"}),c.jsx("div",{className:"knot",style:{left:`${s.position}%`},children:c.jsx("div",{className:"knot-marker"})}),c.jsx("div",{className:"territory red",style:{width:`${s.position}%`}}),c.jsx("div",{className:"territory blue",style:{width:`${100-s.position}%`}})]}),o&&c.jsx("div",{className:`winner-overlay ${o}`,children:o==="red"?" RED WINS!":" BLUE WINS!"})]}),c.jsxs("div",{className:"tow-controls",children:[c.jsx("div",{className:"team-indicator",children:d?c.jsxs(c.Fragment,{children:["You are on ",c.jsx("span",{className:`team-name ${d}`,children:d.toUpperCase()})," team"]}):c.jsx(c.Fragment,{children:"Click PULL to join a team!"})}),c.jsx("button",{className:`pull-btn ${d||"neutral"} ${l?"pulling":""}`,onMouseDown:f,onTouchStart:f,disabled:!r,children:d?"PULL!":"JOIN & PULL!"})]})]})},lr={},ox=()=>{const{session:t}=Ot(),e=t==null?void 0:t.access_token,n=e||"guest",[r,s]=w.useState(lr[n]||[]),[i,o]=w.useState(!lr[n]);return w.useEffect(()=>{if(lr[n]){s(lr[n]),o(!1);return}(async()=>{o(!0);try{const u={};e&&(u.Authorization=`Bearer ${e}`);const h=await(await fetch("/api/avatars",{headers:u})).json();h.success&&(lr[n]=h.avatars,s(h.avatars))}catch(u){console.error("Failed to load avatars",u)}finally{o(!1)}})()},[e,n]),{avatars:r,loading:i,getAvatarSrc:l=>{let u=r.find(d=>d.id===l);if(!u)for(const d in lr){const h=lr[d].find(f=>f.id===l);if(h){u=h;break}}return u?u.src:null}}};const id=({config:t={},size:e=100,className:n=""})=>{const{avatarId:r}=t,{getAvatarSrc:s,loading:i}=ox(),o=s(r||""),a=o&&(o.toLowerCase().endsWith(".jpg")||o.toLowerCase().endsWith(".jpeg")),l={width:e,height:e,padding:a?0:"12%"},u={objectFit:a?"cover":"contain"};return c.jsx("div",{className:`mascot-avatar-container ${n}`,style:l,children:o?c.jsx("img",{src:o,alt:"Custom Mascot",className:"mascot-avatar-img",style:u}):c.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:i?c.jsx("span",{className:"loading-dots",children:"..."}):c.jsx("span",{style:{fontSize:e*.5,color:"#ccc"},children:"?"})})})},rg=()=>({avatarId:"group1"});const bA=({currentConfig:t,onSave:e,onCancel:n,loading:r=!1,isPremium:s=!1,userRole:i="user",userLevel:o=1})=>{const a=Ze(),[l,u]=w.useState(t||rg()),{avatars:d,loading:h}=ox();w.useEffect(()=>{console.log(" [MASCOT DEBUG] MascotCustomizer mounted"),console.log(" [MASCOT DEBUG] isPremium:",s,"Role:",i,"Level:",o),!t||!t.avatarId?u(rg()):u(t)},[t,s,i,o,d]);const f=m=>{const v=m.hidden,S=i==="admin",x=m.unlockLevel||0;if(v&&!S||m.premium&&!s&&!v||o<x&&!S)return;const y={avatarId:m.id};u(y),e({avatar_style:"custom-mascot",avatar_seed:"custom",avatar_options:y})},g=()=>{a("/premium"),n&&n()};return c.jsxs("div",{className:"mascot-customizer",children:[c.jsxs("div",{className:"mascot-preview-area",children:[c.jsx("div",{className:"mascot-preview-wrapper",children:c.jsx(id,{config:l,size:200})}),c.jsxs("p",{className:"mascot-helper-text",children:["Level: ",o,"  Select your avatar"]}),!s&&i!=="admin"&&c.jsx("button",{type:"button",className:"btn-text-only",onClick:g,style:{fontSize:"0.8rem",marginTop:"0.5rem",textDecoration:"underline",color:"var(--primary)"},children:"Unlock all avatars with Premium"})]}),c.jsx("div",{className:"mascot-controls",children:h?c.jsx("div",{className:"loading-spinner",children:"Loading avatars..."}):c.jsx("div",{className:"options-grid single-category",children:d.filter(m=>!m.hidden||i==="admin").sort((m,v)=>{const S=m.unlockLevel||0,x=v.unlockLevel||0,y=o>=S||m.premium&&s||!m.premium&&!m.unlockLevel||i==="admin",p=o>=x||v.premium&&s||!v.premium&&!v.unlockLevel||i==="admin";return y&&!p?-1:!y&&p?1:S-x}).map(m=>{const v=m.hidden,S=i==="admin",x=m.unlockLevel||0;m.name.includes("King")&&console.log(" [MASCOT DEBUG] King Avatar:",{id:m.id,levelReq:x,userLevel:o,locked:o<x});const y=m.premium&&!s&&!v,p=o<x&&!S,_=v&&!S,b=_||y||p,k=l.avatarId===m.id;let C="";return _?C="Admin Only":p?C=`Lvl ${x}`:y&&(C="Premium"),c.jsxs("button",{type:"button",className:`mascot-option-btn ${k?"selected":""} ${b?"locked":""}`,onClick:()=>f(m),title:b?`${m.name} (${C})`:m.name,disabled:b,children:[c.jsxs("div",{className:"img-wrapper",children:[c.jsx("img",{src:m.src,alt:m.name}),m.premium&&!m.hidden&&c.jsx("span",{className:"premium-badge-icon",title:"Premium",children:""}),m.hidden&&c.jsx("span",{className:"premium-badge-icon admin",title:"Admin Only",children:""}),b&&c.jsx("div",{className:"lock-overlay",children:c.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"bold"},children:p?`Lvl ${x}`:""})})]}),c.jsx("span",{className:"option-label",children:m.name})]},m.id)})})})]})};const ax=({currentOptions:t={},onSave:e,onCancel:n,loading:r=!1,isPremium:s=!1,userRole:i="user",userLevel:o=1})=>c.jsx("div",{className:"avatar-customizer",children:c.jsx(bA,{currentConfig:t,onSave:e,onCancel:n,loading:r,isPremium:s,userRole:i,userLevel:o})}),Wh=({name:t="",avatarStyle:e,avatarSeed:n,avatarOptions:r={},size:s=40,isPremium:i=!1,className:o="",url:a})=>{if(a){const l=a.toLowerCase().endsWith(".jpg")||a.toLowerCase().endsWith(".jpeg");return c.jsx("div",{className:`mascot-avatar-container ${o}`,style:{width:s,height:s,padding:l?0:"12%"},children:c.jsx("img",{src:a,alt:t,className:"mascot-avatar-img",style:{objectFit:l?"cover":"contain"},loading:"lazy"})})}return e==="custom-mascot"&&(r!=null&&r.avatarId)?c.jsx(id,{config:r,size:s,className:o}):c.jsx(id,{config:{avatarId:"Gabu"},size:s,className:o})};const kA=({isOpen:t,onClose:e,roomCode:n,isPremium:r})=>{const{user:s,session:i,refreshUser:o,isPremium:a}=Ot(),l=r!==void 0?r:a,{socket:u}=nr(),{addNotification:d}=il(),h=Ze(),[f,g]=w.useState(!1),[m,v]=w.useState(!1);if(w.useEffect(()=>{t&&g(!1)},[t]),!t)return null;const S=p=>{p.target===p.currentTarget&&e()},x=async p=>{console.log(" [PROFILE MODAL] Saving avatar preferences:",p),v(!0);try{if(!(i!=null&&i.access_token))throw new Error("Not authenticated");const _={userId:s==null?void 0:s.id,...p};console.log(" [PROFILE MODAL] Request body:",_);const b=await fetch("/api/users/avatar",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i.access_token}`},body:JSON.stringify(_)});console.log(" [PROFILE MODAL] Response status:",b.status);const k=await b.json();if(console.log(" [PROFILE MODAL] Response data:",k),!b.ok)throw new Error(k.error||"Failed to save avatar");console.log(" [PROFILE MODAL] Avatar saved successfully"),g(!1),o&&(console.log(" [PROFILE MODAL] Refreshing user data..."),await o(),console.log(" [PROFILE MODAL] User data refreshed")),u&&n?(console.log(" [PROFILE MODAL] Socket available:",{connected:u.connected,id:u.id,roomCode:n}),console.log(" [PROFILE MODAL] Emitting profile_updated to socket:",{roomCode:n,userId:s==null?void 0:s.id,displayName:(s==null?void 0:s.display_name)||(s==null?void 0:s.username),avatarStyle:p.avatar_style,avatarSeed:p.avatar_seed,avatarOptions:p.avatar_options}),u.emit("profile_updated",{roomCode:n,userId:s==null?void 0:s.id,displayName:(s==null?void 0:s.display_name)||(s==null?void 0:s.username),avatarStyle:p.avatar_style,avatarSeed:p.avatar_seed,avatarOptions:p.avatar_options})):console.warn(" [PROFILE MODAL] Cannot emit update: socket or roomCode missing",{socket:!!u,roomCode:n}),d("Avatar updated!","success")}catch(_){console.error(" [PROFILE MODAL] Avatar save error:",_),d(_.message||"Failed to save avatar","error")}finally{v(!1)}},y=()=>c.jsx(Wh,{avatarStyle:s==null?void 0:s.avatar_style,avatarSeed:s==null?void 0:s.avatar_seed,avatarOptions:s==null?void 0:s.avatar_options,name:(s==null?void 0:s.display_name)||(s==null?void 0:s.username)||"User",size:80,isPremium:l,className:"avatar-preview-img"});return c.jsx(AN,{children:c.jsx(Je.div,{className:"profile-settings-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:S,children:c.jsxs(Je.div,{className:"profile-settings-modal",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.3},children:[c.jsxs("div",{className:"profile-settings-header",children:[c.jsx("h2",{className:"profile-settings-title",children:"Avatar Settings"}),c.jsx("button",{className:"close-button",onClick:e,children:c.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:c.jsx("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),c.jsx("div",{className:"profile-settings-content",children:f?c.jsx("div",{className:"avatar-customizer-section",children:c.jsx(ax,{currentStyle:s==null?void 0:s.avatar_style,currentSeed:s==null?void 0:s.avatar_seed,currentOptions:(s==null?void 0:s.avatar_options)||{},username:(s==null?void 0:s.username)||(s==null?void 0:s.display_name),onSave:x,onCancel:()=>g(!1),loading:m,isPremium:l,userRole:s==null?void 0:s.role})}):c.jsxs("div",{className:"avatar-preview-section",children:[c.jsx("div",{className:"avatar-preview-container",children:y()}),c.jsxs("div",{className:"avatar-preview-info",children:[c.jsx("span",{className:"preview-label",children:"Current Avatar"}),c.jsx("button",{className:"change-avatar-btn",onClick:()=>g(!0),children:s!=null&&s.avatar_style?"Change Avatar":"Create Avatar"})]})]})}),c.jsxs("div",{className:"profile-settings-footer",children:[c.jsx("button",{className:"full-account-button",onClick:()=>{e(),h("/account")},children:"Full Account Settings"}),c.jsx("button",{className:"done-button",onClick:e,children:"Done"})]})]})})})},sg=({table:t,filters:e={},onInsert:n,onUpdate:r,onDelete:s,dependencies:i=[],enabled:o=!0})=>{const a=w.useRef(null),l=w.useRef(null);return w.useEffect(()=>{if(!o){console.log(` [REALTIME] Subscription disabled for table: ${t}`);return}const u=e.filter;if(u&&u.includes("eq.null")){console.log(` [REALTIME] Skipping subscription for ${t} - incomplete filter`);return}return console.log(` [REALTIME] Setting up subscription for table: ${t}`,e),(async()=>{try{const h=await Be();if(!h){console.error(" [REALTIME] Cannot setup subscription - Supabase client not available");return}l.current&&(console.log(` [REALTIME] Cleaning up existing subscription for ${t}`),await h.removeChannel(l.current),l.current=null,a.current=null);const f=Date.now(),g=Math.random().toString(36).substring(7),m=`${t}_changes_${f}_${g}`,v=h.channel(m).on("postgres_changes",{event:"*",schema:"public",table:t,...e},x=>{switch(console.log(` [REALTIME] ${t} change:`,x),x.eventType){case"INSERT":n&&n(x.new,x);break;case"UPDATE":r&&r(x.new,x.old,x);break;case"DELETE":s&&s(x.old,x);break;default:console.log(" [REALTIME] Unknown event type")}}),S=v.subscribe(x=>{console.log(` [REALTIME] Subscription status for ${t}:`,x),x==="SUBSCRIBED"?console.log(` [REALTIME] Successfully subscribed to ${t}`):(x==="CLOSED"||x==="CHANNEL_ERROR")&&console.error(` [REALTIME] Subscription error for ${t}:`,x)});l.current=v,a.current=S}catch(h){console.error(` [REALTIME] Error setting up subscription for ${t}:`,h)}})(),()=>{if(console.log(` [REALTIME] Cleaning up subscription for ${t}`),l.current){const h=l.current;Be().then(async f=>{if(f&&h)try{await f.removeChannel(h),console.log(` [REALTIME] Successfully cleaned up subscription for ${t}`)}catch(g){console.error(` [REALTIME] Error cleaning up subscription for ${t}:`,g)}}),l.current=null,a.current=null}}},i),a.current};const jA=({roomCode:t,playerName:e,isHost:n,onLeave:r})=>{var Gh;const{socket:s,socketRef:i,socketId:o,isConnected:a,connectSocket:l,setLastRoom:u,clearLastRoom:d}=nr(),h=s||(i==null?void 0:i.current),{addNotification:f}=il(),{user:g,isAuthenticated:m,isPremium:v}=Ot(),{updateLobbyInfo:S}=fl(),[x,y]=w.useState([]),[p,_]=w.useState(null),[b,k]=w.useState(!0),[C,E]=w.useState(null),[O,T]=w.useState(null),[A,j]=w.useState(n),[N,R]=w.useState("waiting_for_players"),[F,U]=w.useState(!1),[W,L]=w.useState(new Map),[M,V]=w.useState(!1),[$,G]=w.useState(!1),[Le,ie]=w.useState([]),[He,B]=w.useState(!1),[K,Ee]=w.useState([]),oe=w.useRef(t),ee=w.useRef(e),pe=w.useRef(null),me=w.useRef(null),Lt=w.useRef(new Map);w.useRef(0);const Pl=w.useRef(A),Tl=w.useRef(g),cx=w.useRef(N);w.useEffect(()=>{Pl.current=A},[A]),w.useEffect(()=>{Tl.current=g},[g]),w.useEffect(()=>{cx.current=N},[N]),w.useEffect(()=>{B(!1)},[p]),w.useEffect(()=>{!h||!t||h.emit("joinSocketRoom",{roomCode:t})},[h,t]),w.useEffect(()=>{(async()=>{try{const se=await(await fetch("/api/games")).json();se.success&&se.games&&Ee(se.games)}catch(J){console.error("Error fetching games:",J)}})()},[]);const Re=w.useMemo(()=>{if(!p)return null;const I=K.find(J=>J.id===p);return I?{name:I.display_name||I.name,icon:I.icon||"",thumbnailUrl:I.thumbnailUrl,description:I.description,maxPlayers:I.max_players||I.maxPlayers,minPlayers:I.min_players||I.minPlayers||2}:{name:p,icon:"",thumbnailUrl:null,description:"Loading game details...",maxPlayers:null,minPlayers:null}},[p,K]);w.useEffect(()=>{Re&&Re.name&&oe.current&&S(oe.current,Re.name,Re.thumbnailUrl||void 0)},[Re,S]);const ux=I=>{const J=Date.now(),se=1e4;Lt.current.has(I)&&clearInterval(Lt.current.get(I)),L(be=>new Map(be.set(I,10)));const $e=setInterval(()=>{const be=Date.now()-J,nn=Math.max(0,Math.ceil((se-be)/1e3));L(ir=>{const rn=new Map(ir);return nn>0?rn.set(I,nn):rn.delete(I),rn}),nn<=0&&(clearInterval($e),Lt.current.delete(I))},2e3);Lt.current.set(I,$e)},dx=I=>{Lt.current.has(I)&&(clearInterval(Lt.current.get(I)),Lt.current.delete(I)),L(J=>{const se=new Map(J);return se.delete(I),se})},hx=async()=>{if(me.current)try{const I=await Be();if(!I)return;const{data:J,error:se}=await I.from("room_members").select(`user_id, role, is_connected, in_game, current_location, last_ping,
          user:users(username, display_name, premium_tier, avatar_url, avatar_style, avatar_seed, avatar_options, level)`).eq("room_id",me.current);if(se)throw se;const $e=(J==null?void 0:J.map(be=>{var nn,ir,rn,As,Os,H,xe,ue;return{id:be.user_id,name:((nn=be.user)==null?void 0:nn.display_name)||"Player",isHost:be.role==="host",isConnected:be.is_connected,inGame:be.in_game,currentLocation:be.current_location||"lobby",lastPing:be.last_ping,premiumTier:((ir=be.user)==null?void 0:ir.premium_tier)||"free",role:((rn=be.user)==null?void 0:rn.role)||"user",avatarUrl:(As=be.user)==null?void 0:As.avatar_url,avatarStyle:(Os=be.user)==null?void 0:Os.avatar_style,avatarSeed:(H=be.user)==null?void 0:H.avatar_seed,avatarOptions:(xe=be.user)==null?void 0:xe.avatar_options,level:((ue=be.user)==null?void 0:ue.level)||1}}))||[];y($e)}catch(I){console.error("Error fetching player list:",I)}};w.useEffect(()=>{if(!h)return;const I=J=>{ie(se=>[...se,J])};return h.on("chat:message",I),()=>{h.off("chat:message",I)}},[h,t]);const fx=I=>{let J;g!=null&&g.id&&(J=x.find($e=>$e.id===g.id)),!J&&pe.current&&(J=x.find($e=>$e.id===pe.current)),J||(J=x.find($e=>$e.name===ee.current));const se=J?J.name:ee.current;h&&h.emit("chat:message",{message:I,playerName:se})};sg({table:"room_members",filters:me.current?{filter:`room_id=eq.${me.current}`}:{},enabled:!!me.current,onUpdate:I=>{y(J=>J.map(se=>se.id===I.user_id?{...se,isConnected:I.is_connected,inGame:I.in_game,currentLocation:I.current_location,lastPing:I.last_ping}:se))},onInsert:()=>{hx()},onDelete:I=>{y(J=>J.filter(se=>se.id!==I.user_id))},dependencies:[me.current]}),sg({table:"rooms",filters:me.current?{filter:`id=eq.${me.current}`}:{},enabled:!!me.current,onUpdate:(I,J)=>{T(I),R(I.status),I.current_game!==J.current_game&&_(I.current_game!=="lobby"?I.current_game:null)},dependencies:[me.current]}),w.useEffect(()=>{if(!s){l()||(E("Failed to establish connection to server"),k(!1));return}if(!a){k(!0);return}k(!0);const I=()=>{var H;s.emit("joinRoom",{roomCode:oe.current,playerName:ee.current,supabaseUserId:(H=Tl.current)==null?void 0:H.id})};s.connected?I():s.once("connect",I);const J=H=>{var ue,mt,It,Ls,Kh,Jh;const xe=((ue=H.players)==null?void 0:ue.map(We=>({id:We.id,name:We.name,isHost:We.isHost,isConnected:We.isConnected!==void 0?We.isConnected:!0,inGame:We.inGame||!1,currentLocation:We.currentLocation||(We.isConnected?"lobby":"disconnected"),lastPing:We.lastPing,premiumTier:We.premiumTier||"free",role:We.role||"user",avatarUrl:We.avatarUrl,avatarStyle:We.avatarStyle,avatarSeed:We.avatarSeed,avatarOptions:We.avatarOptions,level:We.level||1})))||[];y(xe),T(H.room),R(((mt=H.room)==null?void 0:mt.status)||"waiting_for_players"),_(((It=H.room)==null?void 0:It.game_type)!=="lobby"?H.room.game_type:null),me.current=(Ls=H.room)==null?void 0:Ls.id,H.player?(j(H.player.isHost),pe.current=H.player.id,ee.current=H.player.name):H.isHost!==void 0&&j(H.isHost),k(!1),E(null),u&&u({roomCode:H.roomCode||oe.current,playerName:ee.current,customLobbyName:(Kh=H.player)==null?void 0:Kh.customLobbyName,supabaseUserId:(Jh=Tl.current)==null?void 0:Jh.id})},se=H=>{var xe,ue;(xe=H.player)!=null&&xe.name&&ie(mt=>{const It=mt[mt.length-1],Ls=`${H.player.name} joined the lobby`;return It&&It.message===Ls&&Date.now()-(It.timestamp||0)<2e3?mt:[...mt,{id:Date.now(),type:"system",message:Ls,timestamp:Date.now()}]}),y(H.players||[]),T(H.room),(ue=H.player)!=null&&ue.id&&dx(H.player.id)},$e=H=>{var xe;(xe=H.player)!=null&&xe.name&&ie(ue=>{const mt=ue[ue.length-1],It=`${H.player.name} left the lobby`;return mt&&mt.message===It&&Date.now()-(mt.timestamp||0)<2e3?ue:[...ue,{id:Date.now(),type:"system",message:It,timestamp:Date.now()}]}),y(H.players||[]),H.room&&T(H.room)},be=H=>{H.players?y(H.players):y(xe=>xe.map(ue=>ue.id===H.playerId?{...ue,isConnected:!1}:ue)),H.playerId&&ux(H.playerId)},nn=H=>{_(H.gameType)},ir=H=>{U(!1),s&&s.disconnect(),setTimeout(()=>{window.location.href=H.gameUrl},100)},rn=H=>{const xe=H.players||[];y(xe),H.room&&T(H.room);const ue=xe.find(It=>It.name===ee.current);ue&&j(ue.isHost);const mt=H.reason==="original_host_left"?"left the room":H.reason==="original_host_disconnected"?"disconnected":"transferred host";f(`${H.newHostName} is now the host (previous host ${mt}).`,"info")},As=H=>{H.isNotification?(y(H.players||[]),H.room&&T(H.room),f(`${H.targetName} was removed from the room by ${H.kickedBy}.`,"warning")):(f(`You have been kicked: ${H.reason} (by ${H.kickedBy})`,"error"),s&&s.disconnect(),r&&r())},Os=H=>{let xe=H.message||"An error occurred",ue=!1;if(xe==="Not in a room"){s.emit("joinRoom",{roomCode:oe.current,playerName:ee.current,supabaseUserId:g==null?void 0:g.id});return}switch(H.code){case"ROOM_NOT_FOUND":xe="Room not found. It may have expired or been cleaned up.",ue=!0;break;case"ROOM_FULL":xe="Room is full. Cannot rejoin at this time.",ue=!0;break;case"DUPLICATE_PLAYER":xe="Player name already in use. Try a different name.",ue=!0;break}ue?(E(xe),k(!1)):(f(xe,"warning"),b&&k(!1))};return s.on("roomJoined",J),s.on("playerJoined",se),s.on("playerLeft",$e),s.on("playerDisconnected",be),s.on("gameSelected",nn),s.on("gameStarted",ir),s.on("hostTransferred",rn),s.on("playerKicked",As),s.on("error",Os),()=>{Lt.current.forEach(H=>clearInterval(H)),Lt.current.clear(),L(new Map),s&&(s.off("roomJoined",J),s.off("playerJoined",se),s.off("playerLeft",$e),s.off("playerDisconnected",be),s.off("gameSelected",nn),s.off("gameStarted",ir),s.off("hostTransferred",rn),s.off("playerKicked",As),s.off("error",Os),s.connected&&oe.current&&s.emit("leaveRoom",{roomCode:oe.current}))}},[s,a]),w.useEffect(()=>{if(!s)return;const I=setInterval(()=>{s.connected&&s.emit("heartbeat")},3e4);return()=>clearInterval(I)},[s]);const px=w.useCallback(I=>{s&&a&&A&&s.emit("selectGame",{gameType:I})},[s,a,A]),mx=w.useCallback(()=>{F||(s&&a&&A?(U(!0),f("Starting game...","info"),s.emit("startGame",{roomCode:oe.current}),setTimeout(()=>U(!1),5e3)):A?f("Connection lost. Please refresh the page.","error"):f("Only the host can start the game.","warning"))},[s,a,A,F,f]),qh=w.useCallback(()=>{d&&d(),s&&a&&s.emit("leaveRoom",{roomCode:oe.current}),r&&r()},[s,a,r,d]),gx=w.useCallback(I=>{s&&a&&A&&s.emit("transferHost",{roomCode:oe.current,targetUserId:I})},[s,a,A]),yx=w.useCallback((I,J)=>{s&&a&&A&&window.confirm(`Are you sure you want to kick ${J} from the room?`)&&s.emit("kickPlayer",{roomCode:oe.current,targetUserId:I})},[s,a,A]),vx=I=>{if(I.currentLocation)switch(I.currentLocation){case"game":return{status:"in_game",label:"In Game",color:"#ff6b35",icon:""};case"lobby":return{status:"lobby",label:"In Lobby",color:"#4caf50",icon:""};case"disconnected":return{status:"disconnected",label:"Offline",color:"#666",icon:""};default:return{status:"lobby",label:"In Lobby",color:"#4caf50",icon:""}}return I.isConnected?I.inGame?{status:"in_game",label:"In Game",color:"#ff6b35",icon:""}:{status:"lobby",label:"In Lobby",color:"#4caf50",icon:""}:{status:"disconnected",label:"Offline",color:"#666",icon:""}};w.useMemo(()=>x.reduce((I,J)=>(I.total++,J.currentLocation==="game"||J.inGame?I.inGameCount++:!J.isConnected||J.currentLocation==="disconnected"?I.disconnectedCount++:I.lobbyCount++,I),{total:0,lobbyCount:0,inGameCount:0,disconnectedCount:0}),[x]);const wx=w.useMemo(()=>x.map(I=>({...I,playerStatus:vx(I),countdownTime:W.get(I.id),isDisconnectedWithTimer:!I.isConnected&&(W.get(I.id)||0)>0})),[x,W]);return b||!a?c.jsxs("div",{className:"room-lobby",children:[c.jsxs("div",{className:"lobby-header",children:[c.jsxs("h2",{children:["Room ",t]}),c.jsxs("div",{className:"connection-status",children:["Status: ",a?"Connected":"Connecting..."]})]}),c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{children:a?"Joining room...":"Connecting to server..."})]})]}):C?c.jsxs("div",{className:"room-lobby",children:[c.jsx("div",{className:"lobby-header",children:c.jsxs("h2",{children:["Room ",t]})}),c.jsx("div",{className:"error-container",children:c.jsxs("div",{className:"error-message",children:[c.jsx("h3",{children:"Connection Error"}),c.jsx("p",{children:C}),c.jsx("div",{className:"error-actions",children:c.jsx("button",{onClick:qh,className:"leave-button",children:"Leave Room"})})]})})]}):c.jsxs("div",{className:"room-lobby",children:[c.jsxs("div",{className:"lobby-header",children:[c.jsxs("div",{className:"header-left-actions",children:[c.jsx("button",{onClick:qh,className:"leave-button",children:"Leave Room"}),m&&c.jsx("button",{onClick:()=>G(!0),className:"profile-settings-btn",title:"Profile Settings",children:" Profile"})]}),c.jsxs("div",{className:"room-info-header",children:[O!=null&&O.streamer_mode?c.jsxs("div",{className:"room-code-display streamer-mode",children:[M?t:"",A&&c.jsx("button",{className:"toggle-code-btn",onClick:()=>V(!M),title:M?"Hide code":"Show code",children:M?"":""})]}):c.jsx("div",{className:"room-code-display",children:t}),c.jsx("div",{className:"room-status-section",children:c.jsxs("div",{className:"room-status-display",children:[c.jsx("span",{className:"status-label",children:"Status:"}),c.jsx("span",{className:`status-badge status-${N}`,children:N.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase())})]})}),c.jsx("div",{className:"room-actions",children:!(O!=null&&O.streamer_mode)&&c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"copy-btn",onClick:()=>navigator.clipboard.writeText(t),children:" Copy Code"}),c.jsx("button",{className:"copy-link-btn",onClick:()=>{const I=`${window.location.origin}/?join=${t}`;navigator.clipboard.writeText(I)},children:" Copy Link"})]})})]}),c.jsx("div",{style:{width:"180px"}})]}),c.jsx(kA,{isOpen:$,onClose:()=>G(!1),roomCode:t,isPremium:v}),c.jsxs("div",{className:"lobby-content",children:[c.jsxs("div",{className:"players-section",children:[c.jsx("div",{className:"section-header",children:c.jsx("h3",{className:"section-title",children:"Players in Room"})}),c.jsx("div",{className:"players-grid",children:wx.map(I=>{const{playerStatus:J,countdownTime:se,isDisconnectedWithTimer:$e}=I;return c.jsxs("div",{className:`player-card ${I.isHost?"host":""} ${J.status} ${$e?"disconnecting":""}`,children:[c.jsxs("div",{className:"player-card-content",children:[c.jsx("div",{className:"player-avatar",children:c.jsx(Wh,{url:I.avatarUrl,avatarStyle:I.avatarStyle,avatarSeed:I.avatarSeed,avatarOptions:I.avatarOptions,name:I.name,size:120,isPremium:I.role==="admin"||I.premiumTier!=="free",className:"avatar-image"})}),c.jsxs("div",{className:"player-info",children:[c.jsx("span",{className:"player-name",children:I.name}),c.jsxs("div",{className:"player-badges",children:[c.jsxs("span",{className:"level-badge-lobby",children:["Lvl ",I.level]}),I.isHost&&c.jsx("span",{className:"host-badge",children:"Host"}),c.jsxs("span",{className:"status-badge",style:{backgroundColor:J.color},children:[J.icon," ",J.label]}),$e&&c.jsxs("span",{className:"countdown-badge",children:[" ",se,"s"]})]})]})]}),A&&!I.isHost&&!$e&&c.jsxs("div",{className:"player-actions",children:[c.jsx("button",{className:"make-host-btn",onClick:()=>gx(I.id),children:" Make Host"}),c.jsx("button",{className:"kick-player-btn",onClick:()=>yx(I.id,I.name),children:" Kick"})]})]},I.id)})})]}),c.jsxs("div",{className:"lobby-extras",children:[c.jsx(SA,{messages:Le,onSendMessage:fx,currentPlayerName:ee.current}),c.jsx(_A,{playerName:ee.current})]}),c.jsxs("div",{className:"game-section",children:[c.jsx("h3",{className:"section-title",children:"Game Selection"}),p?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"selected-game-card",children:[c.jsx("div",{className:"game-icon",children:Re!=null&&Re.thumbnailUrl&&!He?c.jsx("img",{src:Re.thumbnailUrl,alt:Re.name||"",style:{width:"100px",height:"100px",objectFit:"contain"},onError:()=>B(!0)}):(Re==null?void 0:Re.icon)||""}),c.jsxs("div",{className:"game-details",children:[c.jsx("h4",{children:Re==null?void 0:Re.name}),c.jsx("p",{children:Re==null?void 0:Re.description})]})]}),c.jsx("div",{className:"game-controls",style:{marginTop:"2rem"},children:A?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:mx,className:"start-game-button",disabled:!s||!a||F,children:F?"Starting...":"Start Game"}),c.jsx("button",{onClick:()=>_(null),className:"change-game-btn",children:"Change Game"})]}):c.jsx("div",{style:{textAlign:"center",color:"#aaa"},children:c.jsx("p",{children:"Waiting for host to start..."})})})]}):c.jsx(xA,{onGameSelect:px,isHost:A,disabled:!s||!a})]})]}),O&&c.jsx("div",{className:"room-details",children:c.jsxs("small",{children:["Room created: ",new Date(O.created_at).toLocaleString(),((Gh=O.metadata)==null?void 0:Gh.created_by_name)&&c.jsxs(c.Fragment,{children:[" by ",O.metadata.created_by_name]})]})})]})};const Tc=({setIsInLobby:t,setLobbyLeaveFn:e})=>{const n=Ze(),r=Sn(),s=w.useRef(new Set),[i,o]=w.useState(!1);nr();const{updateLobbyInfo:a}=fl(),[l,u]=w.useState([]),[d,h]=w.useState(!0),[f,g]=w.useState(!1),[m,v]=w.useState(!1),[S,x]=w.useState(!1),[y,p]=w.useState(null),[_,b]=w.useState(""),[k,C]=w.useState(!1),[E,O]=w.useState(""),[T,A]=w.useState(""),[j,N]=w.useState(!1),R=w.useCallback(async()=>{try{const B=await fA.get("/api/games"),K=B.data.games||B.data;u(K)}catch(B){console.error("[HomePage] Error fetching games:",B),u([])}finally{h(!1)}},[]);w.useEffect(()=>{R()},[R]);const F=w.useCallback(()=>{var Ee,oe;const B={name:sessionStorage.getItem("gamebuddies_playerName")||"",roomCode:sessionStorage.getItem("gamebuddies_roomCode")||"",playerId:sessionStorage.getItem("gamebuddies_playerId")||null,isHost:sessionStorage.getItem("gamebuddies_isHost")==="true"},K=sessionStorage.getItem("gamebuddies:return-session");if(K)try{const ee=JSON.parse(K);B.name=ee.playerName||((Ee=ee.metadata)==null?void 0:Ee.name)||ee.gbPlayerName||B.name,B.roomCode=(ee.roomCode||ee.gbRoomCode||B.roomCode||"").toUpperCase(),B.playerId=ee.playerId||((oe=ee.metadata)==null?void 0:oe.playerId)||B.playerId,ee.isHost!==void 0&&(B.isHost=ee.isHost===!0||ee.isHost==="true")}catch(ee){console.warn("[HomePage] Failed to parse stored return session data:",ee)}return B},[]);w.useEffect(()=>{if(k||i)return;const B=new URLSearchParams(r.search);if(B.has("join")||B.has("invite")||B.has("return")||B.has("session")||r.pathname.match(/^\/lobby\/[A-Za-z0-9-]+/i))return;const K=F();if(K.roomCode&&K.name){const Ee=`auto-rejoin:${K.roomCode}`;if(s.current.has(Ee))return;s.current.add(Ee),O(K.roomCode),A(K.name),N(!0),v(!0)}},[k,i,r.search,r.pathname,F]);const U=w.useCallback(()=>{g(!0)},[]),W=w.useCallback(()=>{v(!0)},[]),L=w.useCallback(()=>{x(!0)},[]),M=w.useCallback((B,K,Ee,oe=null,ee=null)=>{if(!B)return;const pe=K||sessionStorage.getItem("gamebuddies_playerName")||"",me=typeof window<"u"&&window.location?window.location.origin:"";sessionStorage.setItem("gamebuddies_roomCode",B),pe&&sessionStorage.setItem("gamebuddies_playerName",pe),sessionStorage.setItem("gamebuddies_isHost",String(!!Ee)),oe&&sessionStorage.setItem("gamebuddies_playerId",oe),ee&&sessionStorage.setItem("gamebuddies_sessionToken",ee),me&&sessionStorage.setItem("gamebuddies_returnUrl",`${me}/lobby/${B}`);const Lt={roomCode:B,playerName:pe,playerId:oe||sessionStorage.getItem("gamebuddies_playerId"),isHost:!!Ee,returnUrl:me?`${me}/lobby/${B}`:void 0,capturedAt:new Date().toISOString(),source:"gamebuddies",sessionToken:ee||void 0};try{sessionStorage.setItem("gamebuddies:return-session",JSON.stringify(Lt))}catch(Pl){console.warn("[HomePage] Unable to persist return session metadata:",Pl)}},[]),V=w.useCallback(()=>{C(!1),p(null),b(""),t(!1),e(null),sessionStorage.removeItem("gamebuddies_roomCode"),sessionStorage.removeItem("gamebuddies_playerName"),sessionStorage.removeItem("gamebuddies_isHost"),sessionStorage.removeItem("gamebuddies_playerId"),sessionStorage.removeItem("gamebuddies_sessionToken"),sessionStorage.removeItem("gamebuddies_returnUrl"),sessionStorage.removeItem("gamebuddies:return-session"),a(null),n("/",{replace:!0})},[n,t,e,a]),$=w.useCallback(B=>{if(!B)return"Game";const K=l.find(Ee=>Ee.id===B);return K?K.name:B},[l]),G=w.useCallback(B=>{p(B),b(B.playerName),g(!1),C(!0),t(!0),e(()=>V),M(B.roomCode,B.playerName,B.isHost??!0,B.playerId);const K=$(B.gameType);a(B.roomCode,K)},[V,M,t,e,a,$]),Le=w.useCallback(B=>{p(B),b(B.playerName),v(!1),C(!0),t(!0),e(()=>V),M(B.roomCode,B.playerName,B.isHost??!1,B.playerId),N(!1);const K=$(B.gameType||B.current_game);a(B.roomCode,K)},[V,M,t,e,a,$]),ie=w.useCallback(()=>{g(!1),v(!1),x(!1),O(""),A(""),N(!1)},[]),He=w.useCallback(B=>{x(!1),O(B.roomCode);const{name:K}=F();A(K),N(!!K),v(!0)},[F]);return w.useEffect(()=>{if(k)return;const B=new URLSearchParams(r.search),K=B.get("join");if(!K)return;const Ee=K.trim().toUpperCase(),oe=B.get("name")||B.get("player")||"",{name:ee}=F(),pe=oe||ee,me=`join:${Ee}:${pe}`;s.current.has(me)||(O(Ee),A(pe),N(!!pe),v(!0),s.current.add(me))},[r.search,k,F]),w.useEffect(()=>{const B=r.pathname.match(/^\/lobby\/([A-Za-z0-9-]+)/i);if(!B)return;const K=B[1].toUpperCase(),Ee=new URLSearchParams(r.search),oe=Ee.get("name")||Ee.get("player")||"",{name:ee}=F(),pe=oe||ee,me=`lobby:${K}:${pe}`;s.current.has(me)||k||i||(O(K),A(pe),N(!!pe),v(!0),s.current.add(me))},[r.pathname,r.search,k,i,F]),k&&y?c.jsx(jA,{roomCode:y.roomCode,playerName:_,isHost:y.isHost||!1,onLeave:V}):c.jsxs("div",{className:"homepage",children:[c.jsx("div",{className:"background-animation",children:c.jsx("div",{className:"floating-elements",children:[...Array(15)].map((B,K)=>c.jsx("div",{className:`floating-element element-${K+1}`},K))})}),c.jsx("div",{className:"beta-disclaimer",children:c.jsxs("div",{className:"beta-disclaimer-content",children:[c.jsx("span",{className:"beta-badge",children:" BETA"}),c.jsxs("span",{className:"beta-text",children:["GameBuddies.io is currently in ",c.jsx("strong",{children:"beta testing"}),". Some features may not work as expected."]})]})}),c.jsx("section",{className:"hero",children:c.jsxs(Je.div,{className:"hero-content",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},children:[c.jsxs(Je.h1,{className:"hero-title",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},children:[c.jsx("span",{className:"brand-text",children:"GameBuddies"}),c.jsx("span",{className:"brand-dot",children:".io"})]}),c.jsx(Je.p,{className:"hero-subtitle",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:c.jsx("span",{className:"subtitle-highlight",children:"Connect, Play, and Have Fun Together"})}),c.jsxs(Je.div,{className:"hero-buttons",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.7},children:[c.jsxs(Je.button,{className:"cta-button primary",onClick:U,whileHover:{scale:1.05,y:-3},whileTap:{scale:.95},children:[c.jsx("span",{className:"button-text",children:"Create Room"}),c.jsx("span",{className:"button-icon",children:""})]}),c.jsxs(Je.button,{className:"cta-button secondary",onClick:W,whileHover:{scale:1.05,y:-3},whileTap:{scale:.95},children:[c.jsx("span",{className:"button-text",children:"Join Room"}),c.jsx("span",{className:"button-icon",children:""})]}),c.jsxs(Je.button,{className:"cta-button secondary",onClick:L,whileHover:{scale:1.05,y:-3},whileTap:{scale:.95},children:[c.jsx("span",{className:"button-text",children:"Browse Rooms"}),c.jsx("span",{className:"button-icon",children:""})]})]})]})}),c.jsx("section",{className:"games-section",id:"games-section",children:c.jsxs("div",{className:"container",children:[c.jsx(Je.div,{className:"section-header",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:c.jsx("h2",{className:"section-title",children:"Quick Play Games"})}),d?c.jsxs("div",{className:"loading-container",children:[c.jsx("div",{className:"loading-spinner"}),c.jsx("p",{className:"loading-text",children:"Loading awesome games..."})]}):c.jsx("div",{className:"games-grid",children:l.map((B,K)=>c.jsx(Je.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:K*.1},viewport:{once:!0},children:c.jsx(pA,{game:B})},B.id))})]})}),c.jsx("section",{className:"cta-section",children:c.jsx("div",{className:"container",children:c.jsxs(Je.div,{className:"cta-content",initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{duration:.8},viewport:{once:!0},children:[c.jsx("h2",{className:"cta-title",children:"Ready to Start Gaming?"}),c.jsxs(Je.button,{className:"cta-button large",onClick:U,whileHover:{scale:1.05,y:-3},whileTap:{scale:.95},children:[c.jsx("span",{className:"button-text",children:"Start Playing Now"}),c.jsx("span",{className:"button-icon",children:""})]})]})})}),f&&c.jsx(gA,{onRoomCreated:G,onCancel:ie}),m&&c.jsx(vA,{initialRoomCode:E,initialPlayerName:T,autoJoin:j,onRoomJoined:Le,onCancel:ie}),S&&c.jsx(wA,{onRoomSelected:He,onCancel:ie})]})};const Ks=()=>{const t=Sn();return w.useEffect(()=>{if(t.hash){const e=document.querySelector(t.hash);e&&e.scrollIntoView({behavior:"smooth"})}},[t]),c.jsxs("div",{className:"legal-page",children:[c.jsx("aside",{className:"legal-sidebar",children:c.jsxs("nav",{className:"legal-nav",children:[c.jsx("h3",{children:"Legal Information"}),c.jsxs("ul",{children:[c.jsx("li",{children:c.jsx("a",{href:"#impressum",children:"Impressum"})}),c.jsx("li",{children:c.jsx("a",{href:"#privacy",children:"Privacy & Cookies"})}),c.jsx("li",{children:c.jsx("a",{href:"#terms",children:"Terms of Service"})})]})]})}),c.jsxs("main",{className:"legal-content",children:[c.jsxs("section",{id:"impressum",className:"legal-section",children:[c.jsx("h1",{children:"Impressum"}),c.jsx("p",{className:"legal-subtitle",children:"Legal Notice according to  5 TMG (German Telemedia Act)"}),c.jsx("h2",{children:"Service Provider"}),c.jsxs("p",{children:[c.jsx("strong",{children:"[Your Name or Company Name]"}),c.jsx("br",{}),"[Street Address]",c.jsx("br",{}),"[Postal Code] [City]",c.jsx("br",{}),"Deutschland"]}),c.jsx("h2",{children:"Contact / Kontakt"}),c.jsx("p",{children:"Email: contact@gamebuddies.io"}),c.jsx("h2",{children:"VAT ID / Umsatzsteuer-ID"}),c.jsxs("p",{children:["Umsatzsteuer-Identifikationsnummer gem 27a UStG:",c.jsx("br",{}),"[If applicable: DE123456789]",c.jsx("br",{}),c.jsx("em",{children:`If you don't have a VAT ID, state: "Not applicable - small business according to 19 UStG"`})]}),c.jsx("h2",{children:"EU Dispute Resolution / EU-Streitschlichtung"}),c.jsxs("p",{children:["The European Commission provides a platform for online dispute resolution (ODR):",c.jsx("br",{}),c.jsx("a",{href:"https://ec.europa.eu/consumers/odr/",target:"_blank",rel:"noopener noreferrer",children:"https://ec.europa.eu/consumers/odr/"})]}),c.jsx("p",{children:"Our email address can be found above in the contact section."}),c.jsx("h2",{children:"Consumer Dispute Resolution"}),c.jsx("p",{children:"We are not obliged or willing to participate in dispute resolution proceedings before a consumer arbitration board."})]}),c.jsx("hr",{className:"legal-divider"}),c.jsxs("section",{id:"privacy",className:"legal-section",children:[c.jsx("h1",{children:"Privacy Policy & Cookies"}),c.jsx("p",{className:"legal-subtitle",children:"Datenschutzerklrung (GDPR Compliance)"}),c.jsx("p",{className:"effective-date",children:"Last updated: November 18, 2025"}),c.jsx("h2",{children:"1. Data Controller"}),c.jsxs("p",{children:["Responsible for data processing on this website:",c.jsx("br",{}),c.jsx("strong",{children:"[Your Name/Company]"}),c.jsx("br",{}),"[Address]",c.jsx("br",{}),"Email: privacy@gamebuddies.io"]}),c.jsx("h2",{children:"2. Data We Collect"}),c.jsx("p",{children:"We collect account data, session data, and technical data as described in our full policy."}),c.jsx("h2",{children:"7. Your Rights Under GDPR"}),c.jsx("p",{children:"You have the right to access, rectify, erase, and port your data. Contact privacy@gamebuddies.io."})]}),c.jsx("hr",{className:"legal-divider"}),c.jsxs("section",{id:"terms",className:"legal-section",children:[c.jsx("h1",{children:"Terms of Service"}),c.jsx("p",{className:"legal-subtitle",children:"Allgemeine Geschftsbedingungen (AGB)"}),c.jsx("p",{className:"effective-date",children:"Last updated: November 18, 2025"}),c.jsx("h2",{children:"1. Acceptance of Terms"}),c.jsx("p",{children:'By accessing or using GameBuddies.io ("the Service"), you agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, do not use the Service.'}),c.jsx("h2",{children:"2. Service Description"}),c.jsx("p",{children:"GameBuddies.io is a multiplayer game platform that connects users to various browser-based games."})]}),c.jsx("button",{className:"back-to-top",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:" Back to Top"})]})]})};const EA=()=>{const t=Ze(),[e]=ih(),{isAuthenticated:n,loading:r}=Ot(),s=e.get("error"),[i,o]=w.useState("oauth"),[a,l]=w.useState(!1),[u,d]=w.useState(""),[h,f]=w.useState(""),[g,m]=w.useState(""),[v,S]=w.useState(""),[x,y]=w.useState(""),[p,_]=w.useState(!1),[b,k]=w.useState(!0);w.useEffect(()=>{n&&!r&&t("/")},[n,r,t]);const C=async A=>{try{const j=await Be();if(!j){alert("Failed to connect to authentication service");return}const{error:N}=await j.auth.signInWithOAuth({provider:A,options:{redirectTo:`${window.location.origin}/auth/callback`,scopes:A==="discord"?"identify email":void 0}});N&&(console.error("OAuth login error:",N),alert("Login failed. Please try again."))}catch(j){console.error("Login error:",j),alert("An error occurred. Please try again.")}},E=()=>{t("/")},O=async A=>{if(A.preventDefault(),S(""),y(""),!u||!h||!g){S("Please fill in all fields.");return}if(h.length<6){S("Password must be at least 6 characters long.");return}if(h!==g){S("Passwords do not match.");return}_(!0);try{const j=await Be();if(!j){S("Failed to connect to authentication service");return}const N=window.location.hostname==="localhost"?`${window.location.origin}/auth/callback`:"https://gamebuddies.io/auth/callback",{error:R}=await j.auth.signUp({email:u,password:h,options:{emailRedirectTo:N}});R?S(R.message):(y("Registration successful! Please check your email to verify your account."),d(""),f(""),m(""))}catch{S("An error occurred. Please try again.")}finally{_(!1)}},T=async A=>{if(A.preventDefault(),S(""),y(""),!u||!h){S("Please enter your email and password.");return}_(!0);try{const j=await Be();if(!j){S("Failed to connect to authentication service");return}const{error:N}=await j.auth.signInWithPassword({email:u,password:h});N?S(N.message):(b?sessionStorage.removeItem("gamebuddies-session-temp"):sessionStorage.setItem("gamebuddies-session-temp","true"),setTimeout(()=>{window.location.href="/"},500))}catch{S("An error occurred. Please try again.")}finally{_(!1)}};return r?c.jsx("div",{className:"login-page",children:c.jsx("div",{className:"login-container",children:c.jsx("div",{className:"loading",children:"Loading..."})})}):c.jsx("div",{className:"login-page",children:c.jsxs("div",{className:"login-container",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("h1",{children:" GameBuddies.io"}),c.jsx("p",{className:"login-subtitle",children:"Play Games with Friends"})]}),s&&c.jsx("div",{className:"login-error",children:s==="auth_failed"?"Authentication failed. Please try again.":"An error occurred during login."}),v&&c.jsx("div",{className:"login-error",children:v}),x&&c.jsx("div",{className:"login-success",children:x}),c.jsxs("div",{className:"auth-mode-toggle",children:[c.jsx("button",{className:`mode-button ${i==="oauth"?"active":""}`,onClick:()=>{o("oauth"),S(""),y("")},children:"Quick Login"}),c.jsx("button",{className:`mode-button ${i==="email"?"active":""}`,onClick:()=>{o("email"),S(""),y("")},children:"Email / Password"})]}),c.jsx("div",{className:"login-options",children:i==="oauth"?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:E,className:"auth-button guest-button",children:[c.jsx("span",{className:"button-icon",children:""}),c.jsx("span",{className:"button-text",children:"Continue as Guest"})]}),c.jsx("div",{className:"divider",children:c.jsx("span",{children:"or sign in with"})}),c.jsxs("button",{onClick:()=>C("discord"),className:"auth-button discord-button",children:[c.jsx("span",{className:"button-icon",children:""}),c.jsx("span",{className:"button-text",children:"Login with Discord"})]}),c.jsxs("button",{onClick:()=>C("google"),className:"auth-button google-button",children:[c.jsx("span",{className:"button-icon",children:""}),c.jsx("span",{className:"button-text",children:"Login with Google"})]})]}):c.jsxs(c.Fragment,{children:[a?c.jsxs("form",{onSubmit:O,className:"email-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:u,onChange:A=>d(A.target.value),placeholder:"your@email.com",required:!0,autoComplete:"email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:h,onChange:A=>f(A.target.value),placeholder:"",required:!0,autoComplete:"new-password"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),c.jsx("input",{type:"password",id:"confirmPassword",value:g,onChange:A=>m(A.target.value),placeholder:"",required:!0,autoComplete:"new-password"})]}),c.jsx("button",{type:"submit",className:"auth-button email-submit-button",disabled:p,children:p?"Processing...":"Sign Up"}),c.jsxs("div",{className:"auth-toggle",children:[c.jsx("span",{children:"Already have an account?"}),c.jsx("button",{type:"button",onClick:()=>{l(!1),S(""),y("")},className:"toggle-link",children:"Sign In"})]})]}):c.jsxs("form",{onSubmit:T,className:"email-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:u,onChange:A=>d(A.target.value),placeholder:"your@email.com",required:!0,autoComplete:"email"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:h,onChange:A=>f(A.target.value),placeholder:"",required:!0,autoComplete:"current-password"})]}),c.jsx("div",{className:"remember-me-group",children:c.jsxs("label",{className:"remember-me-label",children:[c.jsx("input",{type:"checkbox",checked:b,onChange:A=>k(A.target.checked),disabled:p}),c.jsx("span",{className:"checkbox-custom"}),c.jsx("span",{className:"remember-me-text",children:"Remember me"})]})}),c.jsx("button",{type:"submit",className:"auth-button email-submit-button",disabled:p,children:p?"Processing...":"Sign In"}),c.jsx("div",{className:"forgot-password",children:c.jsx("a",{href:"/password-reset",children:"Forgot password?"})}),c.jsxs("div",{className:"auth-toggle",children:[c.jsx("span",{children:"Don't have an account?"}),c.jsx("button",{type:"button",onClick:()=>{l(!0),S(""),y("")},className:"toggle-link",children:"Sign Up"})]})]}),c.jsx("div",{className:"divider",children:c.jsx("span",{children:"or continue as guest"})}),c.jsxs("button",{onClick:E,className:"auth-button guest-button",children:[c.jsx("span",{className:"button-icon",children:""}),c.jsx("span",{className:"button-text",children:"Continue as Guest"})]})]})}),c.jsxs("div",{className:"login-benefits",children:[c.jsx("p",{className:"benefits-title",children:"Why sign in?"}),c.jsxs("ul",{className:"benefits-list",children:[c.jsx("li",{children:" Save your game progress"}),c.jsx("li",{children:" Unlock achievements"}),c.jsx("li",{children:" Find and play with friends"}),c.jsx("li",{children:" Access premium features"})]})]}),c.jsx("div",{className:"login-footer",children:c.jsxs("p",{children:["By signing in, you agree to our ",c.jsx("a",{href:"/terms",children:"Terms of Service"})," and"," ",c.jsx("a",{href:"/privacy",children:"Privacy Policy"})]})})]})})};const CA=()=>{const t=Ze(),[e,n]=w.useState("loading"),[r,s]=w.useState(null);w.useEffect(()=>{i()},[]);const i=async()=>{try{console.log(" [AUTH] Handling OAuth callback...");const a=await Be();if(!a){s("Failed to initialize Supabase client"),n("error"),setTimeout(()=>t("/login?error=auth_failed"),2e3);return}const{data:{session:l},error:u}=await a.auth.getSession();if(u){console.error(" [AUTH] Session error:",u),s(u.message),n("error"),setTimeout(()=>t("/login?error=auth_failed"),2e3);return}if(!l){console.error(" [AUTH] No session found"),n("error"),setTimeout(()=>t("/login?error=no_session"),2e3);return}console.log(" [AUTH] Session obtained:",{user_id:l.user.id,email:l.user.email,provider:l.user.app_metadata.provider}),n("syncing"),await o(l.user),n("success"),setTimeout(()=>t("/"),1e3)}catch(a){console.error(" [AUTH] Callback error:",a),s(a.message),n("error"),setTimeout(()=>t("/login?error=callback_failed"),2e3)}},o=async a=>{try{console.log(" [AUTH] Syncing user to database..."),console.log(" [AUTH] User metadata:",{id:a.id,email:a.email,provider:a.app_metadata.provider,email_confirmed:a.email_confirmed_at,created_at:a.created_at,app_metadata:a.app_metadata,user_metadata:a.user_metadata});const l=a.app_metadata.provider||"email",u=l==="email";console.log(" [AUTH] Auth type:",u?"EMAIL":"OAUTH",`(${l})`);const d={supabase_user_id:a.id,email:a.email,email_confirmed_at:a.email_confirmed_at,oauth_provider:u?null:l,oauth_id:u?null:a.user_metadata.provider_id||a.id,avatar_url:a.user_metadata.avatar_url||a.user_metadata.picture||null,display_name:a.user_metadata.full_name||a.user_metadata.name||(a.email?a.email.split("@")[0]:"User")};console.log(" [AUTH] Sending sync payload:",d);const h=await fetch("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(console.log(" [AUTH] Sync response status:",h.status,h.statusText),!h.ok){const g=await h.json();throw console.error(" [AUTH] Sync failed with error:",g),new Error(g.error||"Failed to sync user")}const f=await h.json();console.log(" [AUTH] User synced successfully:",f.user)}catch(l){console.error(" [AUTH] User sync failed:",l),console.error(" [AUTH] Error details:",{message:l.message,stack:l.stack})}};return c.jsx("div",{className:"auth-callback-page",children:c.jsxs("div",{className:"auth-callback-container",children:[e==="loading"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner"}),c.jsx("h2",{children:"Logging you in..."}),c.jsx("p",{children:"Please wait while we complete your authentication"})]}),e==="syncing"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner"}),c.jsx("h2",{children:"Setting up your account..."}),c.jsx("p",{children:"Just a moment"})]}),e==="success"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"success-icon",children:""}),c.jsx("h2",{children:"Success!"}),c.jsx("p",{children:"Redirecting you now..."})]}),e==="error"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"error-icon",children:""}),c.jsx("h2",{children:"Authentication Failed"}),c.jsx("p",{children:r||"Something went wrong. Redirecting to login..."})]})]})})};const PA=()=>{const t=Ze(),[e]=ih(),[n,r]=w.useState(""),[s,i]=w.useState(""),[o,a]=w.useState(""),[l,u]=w.useState(""),[d,h]=w.useState(""),[f,g]=w.useState(!1),[m,v]=w.useState(!1);w.useEffect(()=>{e.get("type")==="recovery"&&v(!0)},[e]);const S=async y=>{if(y.preventDefault(),u(""),h(""),!n){u("Please enter your email address.");return}g(!0);try{const p=await Be();if(!p){u("Failed to connect to authentication service");return}const _=window.location.hostname==="localhost"?`${window.location.origin}/password-reset`:"https://gamebuddies.io/password-reset",{error:b}=await p.auth.resetPasswordForEmail(n,{redirectTo:_});b?u(b.message):(h("Password reset instructions have been sent to your email. Please check your inbox."),r(""))}catch(p){console.error("Password reset request error:",p),u("An error occurred. Please try again.")}finally{g(!1)}},x=async y=>{if(y.preventDefault(),u(""),h(""),!s||!o){u("Please fill in all fields.");return}if(s.length<6){u("Password must be at least 6 characters long.");return}if(s!==o){u("Passwords do not match.");return}g(!0);try{const p=await Be();if(!p){u("Failed to connect to authentication service");return}const{error:_}=await p.auth.updateUser({password:s});_?u(_.message):(h("Password updated successfully! Redirecting to home..."),setTimeout(()=>{t("/")},2e3))}catch(p){console.error("Password update error:",p),u("An error occurred. Please try again.")}finally{g(!1)}};return c.jsx("div",{className:"password-reset-page",children:c.jsxs("div",{className:"password-reset-container",children:[c.jsxs("div",{className:"password-reset-header",children:[c.jsx("h1",{children:" GameBuddies.io"}),c.jsx("p",{className:"password-reset-subtitle",children:m?"Set New Password":"Reset Password"})]}),l&&c.jsx("div",{className:"reset-error",children:l}),d&&c.jsx("div",{className:"reset-success",children:d}),m?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"reset-instructions",children:"Please enter your new password below."}),c.jsxs("form",{onSubmit:x,className:"reset-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"newPassword",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",value:s,onChange:y=>i(y.target.value),placeholder:"",required:!0,disabled:f})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",value:o,onChange:y=>a(y.target.value),placeholder:"",required:!0,disabled:f})]}),c.jsx("button",{type:"submit",className:"reset-button",disabled:f,children:f?"Updating...":"Update Password"})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"reset-instructions",children:"Enter your email address and we'll send you instructions to reset your password."}),c.jsxs("form",{onSubmit:S,className:"reset-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",value:n,onChange:y=>r(y.target.value),placeholder:"your@email.com",required:!0,disabled:f})]}),c.jsx("button",{type:"submit",className:"reset-button",disabled:f,children:f?"Sending...":"Send Reset Instructions"})]})]}),c.jsx("div",{className:"reset-footer",children:c.jsx("button",{onClick:()=>t("/login"),className:"back-link",children:" Back to Login"})})]})})};const TA=()=>{var C,E,O,T;const t=Ze(),{user:e,isAuthenticated:n}=Ot(),[r,s]=w.useState(null),[i,o]=w.useState(null),[a,l]=w.useState(!0),{addNotification:u}=il(),[d,h]=w.useState(""),[f,g]=w.useState(null),[m,v]=w.useState(!1),S=(e==null?void 0:e.premium_tier)==="lifetime"||(e==null?void 0:e.premium_tier)==="monthly",x=(e==null?void 0:e.premium_tier)==="lifetime",y=(e==null?void 0:e.premium_tier)==="monthly",p=async A=>{if(!A||A.length<3)return!1;try{return(await(await fetch(`/api/stripe/validate-referral/${A}`)).json()).valid}catch{return!1}},_=async()=>{if(!d||d.length<3){g(null);return}v(!0);const A=await p(d);g(A),v(!1)};w.useEffect(()=>{(async()=>{try{const j=await fetch("/api/stripe/prices"),N=await j.json();if(!j.ok)throw new Error(N.error||"Failed to fetch prices");o({monthly:{amount:(N.monthly.amount/100).toFixed(2),currency:N.monthly.currency.toUpperCase(),name:N.monthly.product.name},lifetime:{amount:(N.lifetime.amount/100).toFixed(2),currency:N.lifetime.currency.toUpperCase(),name:N.lifetime.product.name}}),l(!1)}catch{o({monthly:{amount:"4.99",currency:"EUR",name:"Monthly Premium"},lifetime:{amount:"29.99",currency:"EUR",name:"Lifetime Premium"}}),l(!1)}})()},[]);const b=async A=>{if(!n){t("/login");return}if(!r){if(d&&f===!1){u("Please clear or fix the invalid referral code before proceeding.","error");return}s(A);try{const j=await Be();if(!j)throw new Error("Failed to connect");const{data:{session:N}}=await j.auth.getSession();if(!(N!=null&&N.access_token))throw new Error("Not authenticated");const R=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.access_token}`},body:JSON.stringify({userId:e==null?void 0:e.id,priceType:A,referralCode:d.length>0?d:void 0})}),F=await R.json();if(!R.ok)throw new Error(F.error||"Failed to create checkout session");window.location.href=F.url}catch(j){u(`Payment error: ${j.message}`,"error"),s(null)}}},k=async()=>{try{const A=await Be();if(!A)throw new Error("Failed to connect");const{data:{session:j}}=await A.auth.getSession();if(!(j!=null&&j.access_token))throw new Error("Not authenticated");const N=await fetch("/api/stripe/customer-portal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j.access_token}`},body:JSON.stringify({userId:e==null?void 0:e.id})}),R=await N.json();if(!N.ok)throw new Error(R.error||"Failed to create portal session");window.location.href=R.url}catch(A){u(`Error opening portal: ${A.message}`,"error")}};return c.jsxs("div",{className:"premium-page",children:[c.jsxs("div",{className:"premium-header",children:[c.jsx("h1",{children:" GameBuddies Premium"}),c.jsx("p",{className:"premium-subtitle",children:S?"You are a premium member! Thank you for your support. ":"Unlock the full GameBuddies experience"})]}),S&&c.jsxs("div",{className:"current-tier-banner",children:[c.jsx("div",{className:"tier-badge",children:x?" Lifetime Premium":" Monthly Premium"}),y&&c.jsxs("div",{className:"tier-info",children:[c.jsx("p",{children:"Your subscription renews automatically each month"}),c.jsx("button",{onClick:k,className:"manage-button",children:"Manage Subscription"})]})]}),c.jsxs("div",{className:"referral-code-section",children:[c.jsx("h2",{children:"Have a Referral Code?"}),c.jsx("p",{className:"section-description",children:"Enter your streamer's code to support them!"}),c.jsxs("div",{className:"form-group relative-input",children:[c.jsx("input",{type:"text",placeholder:"Referral Code (Optional)",value:d,onChange:A=>{h(A.target.value.toUpperCase()),g(null)},onBlur:_,disabled:r!==null,className:`input ${f===!1?"input-error":f===!0?"input-success":""}`}),m&&c.jsx("span",{className:"input-status-icon loading",children:""}),f===!0&&c.jsx("span",{className:"input-status-icon success",children:""}),f===!1&&c.jsx("span",{className:"input-status-icon error",children:""})]})]}),c.jsxs("div",{className:"pricing-tiers",children:[c.jsxs("div",{className:`pricing-card ${S?"":"current"}`,children:[c.jsxs("div",{className:"tier-header",children:[c.jsx("h2",{children:"Free"}),c.jsxs("div",{className:"price",children:[c.jsx("span",{className:"amount",children:"0"}),c.jsx("span",{className:"period",children:"forever"})]})]}),c.jsxs("ul",{className:"features",children:[c.jsx("li",{className:"included",children:" Play all games"}),c.jsx("li",{className:"included",children:" Join rooms"}),c.jsx("li",{className:"not-included",children:" Custom avatars"})]})]}),c.jsxs("div",{className:`pricing-card ${y?"current":""}`,children:[c.jsxs("div",{className:"tier-header",children:[c.jsx("h2",{children:((C=i==null?void 0:i.monthly)==null?void 0:C.name)||"Monthly Premium"}),c.jsxs("div",{className:"price",children:[c.jsxs("span",{className:"amount",children:["",((E=i==null?void 0:i.monthly)==null?void 0:E.amount)||"4.99"]}),c.jsx("span",{className:"period",children:"/ month"})]})]}),c.jsxs("ul",{className:"features",children:[c.jsx("li",{className:"included",children:" All Free features"}),c.jsx("li",{className:"included",children:" Custom avatars"})]}),c.jsx("div",{className:"card-footer",children:y?c.jsx("button",{onClick:k,className:"action-button manage",children:"Manage Subscription"}):x?c.jsx("button",{className:"action-button disabled",disabled:!0,children:"You have Lifetime"}):c.jsx("button",{onClick:()=>b("monthly"),className:"action-button",disabled:r!==null,children:r==="monthly"?"Processing...":"Subscribe Now"})})]}),c.jsxs("div",{className:`pricing-card premium ${x?"current":""}`,children:[c.jsx("div",{className:"best-value-badge",children:"Best Value"}),c.jsxs("div",{className:"tier-header",children:[c.jsx("h2",{children:((O=i==null?void 0:i.lifetime)==null?void 0:O.name)||"Lifetime Premium"}),c.jsxs("div",{className:"price",children:[c.jsxs("span",{className:"amount",children:["",((T=i==null?void 0:i.lifetime)==null?void 0:T.amount)||"29.99"]}),c.jsx("span",{className:"period",children:"one-time"})]})]}),c.jsxs("ul",{className:"features",children:[c.jsx("li",{className:"included",children:" All Monthly features"}),c.jsx("li",{className:"included",children:" Lifetime access"}),c.jsx("li",{className:"premium-highlight",children:" Never pay again"})]}),c.jsx("div",{className:"card-footer",children:x?c.jsxs("div",{className:"lifetime-badge",children:[c.jsx("span",{className:"star",children:""}),c.jsx("span",{children:"Lifetime Member"})]}):c.jsx("button",{onClick:()=>b("lifetime"),className:"action-button lifetime",disabled:r!==null,children:r==="lifetime"?"Processing...":"Get Lifetime Access"})})]})]})]})};const NA=()=>{const t=Ze(),[e]=ih(),n=e.get("session_id");return w.useEffect(()=>{console.log(" [PAYMENT] Payment successful, session:",n);const r=setTimeout(()=>{t("/")},5e3);return()=>clearTimeout(r)},[n,t]),c.jsx("div",{className:"payment-result-page success",children:c.jsxs("div",{className:"result-container",children:[c.jsx("div",{className:"result-icon success-icon",children:""}),c.jsx("h1",{children:"Payment Successful!"}),c.jsx("p",{className:"result-message",children:"Thank you for upgrading to Premium! Your account has been activated."}),c.jsxs("div",{className:"result-details",children:[c.jsx("h3",{children:"What's next?"}),c.jsxs("ul",{children:[c.jsx("li",{children:" Enjoy your ad-free experience"}),c.jsx("li",{children:" Customize your avatar"}),c.jsx("li",{children:" Access exclusive games"}),c.jsx("li",{children:" View advanced statistics"}),c.jsx("li",{children:" Get priority support"})]})]}),c.jsxs("div",{className:"result-actions",children:[c.jsx("button",{onClick:()=>t("/"),className:"primary-button",children:"Go to Homepage"}),c.jsx("button",{onClick:()=>t("/premium"),className:"secondary-button",children:"View Premium Benefits"})]}),c.jsx("p",{className:"redirect-notice",children:"You will be redirected to the homepage in 5 seconds..."})]})})},RA=()=>{const t=Ze();return c.jsx("div",{className:"payment-result-page cancel",children:c.jsxs("div",{className:"result-container",children:[c.jsx("div",{className:"result-icon cancel-icon",children:""}),c.jsx("h1",{children:"Payment Cancelled"}),c.jsx("p",{className:"result-message",children:"Your payment was cancelled. No charges were made."}),c.jsxs("div",{className:"result-details",children:[c.jsx("p",{children:"Changed your mind? You can try again anytime!"}),c.jsx("p",{children:"Premium features include:"}),c.jsxs("ul",{children:[c.jsx("li",{children:" Ad-free experience"}),c.jsx("li",{children:" Custom avatars"}),c.jsx("li",{children:" Exclusive games"}),c.jsx("li",{children:" Advanced statistics"}),c.jsx("li",{children:" Priority support"})]})]}),c.jsxs("div",{className:"result-actions",children:[c.jsx("button",{onClick:()=>t("/premium"),className:"primary-button",children:"View Premium Plans"}),c.jsx("button",{onClick:()=>t("/"),className:"secondary-button",children:"Go to Homepage"})]})]})})};const AA=()=>{const t=Ze(),{user:e,isAuthenticated:n,loading:r,session:s,refreshUser:i,isPremium:o}=Ot(),[a,l]=w.useState(!1),[u,d]=w.useState(!1),[h,f]=w.useState(!1);if(!n)return t("/login"),null;const g=(e==null?void 0:e.premium_tier)==="lifetime",m=(e==null?void 0:e.premium_tier)==="monthly",v=(e==null?void 0:e.subscription_canceled_at)&&o;!o&&(e==null||e.premium_expires_at);const S=async()=>{l(!0);try{const p=await Be();if(!p)throw new Error("Failed to connect");const{data:{session:_}}=await p.auth.getSession();if(!(_!=null&&_.access_token))throw new Error("Not authenticated");const b=await fetch("/api/stripe/customer-portal",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_.access_token}`},body:JSON.stringify({userId:e==null?void 0:e.id})}),k=await b.json();if(!b.ok)throw new Error(k.error||"Failed to open customer portal");window.location.href=k.url}catch(p){alert(`Error: ${p.message}`),l(!1)}},x=async()=>{if(window.confirm(`Are you sure you want to cancel your subscription?

Your premium access will continue until the end of your current billing period.`)){l(!0);try{const _=await Be();if(!_)throw new Error("Failed to connect");const{data:{session:b}}=await _.auth.getSession();if(!(b!=null&&b.access_token))throw new Error("Not authenticated");const k=await fetch("/api/stripe/cancel-subscription",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.access_token}`},body:JSON.stringify({userId:e==null?void 0:e.id})}),C=await k.json();if(!k.ok)throw new Error(C.error||"Failed to cancel subscription");alert("Your subscription has been canceled. Premium access will continue until the end of your billing period."),window.location.reload()}catch(_){alert(`Error: ${_.message}`),l(!1)}}},y=async p=>{d(!0);try{if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const _=await fetch("/api/users/avatar",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({userId:e==null?void 0:e.id,...p})}),b=await _.json();if(!_.ok)throw new Error(b.error||"Failed to save avatar");f(!1),i&&await i()}catch(_){alert(`Error: ${_.message}`)}finally{d(!1)}};return c.jsx("div",{className:"account-page",children:c.jsxs("div",{className:"account-container",children:[c.jsxs("div",{className:"account-header",children:[c.jsx("h1",{children:"Account Settings"}),c.jsx("p",{className:"account-subtitle",children:"Manage your profile and subscription"})]}),c.jsxs("div",{className:"account-section",children:[c.jsx("h2",{children:"Profile Information"}),c.jsxs("div",{className:"info-grid",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Username"}),c.jsx("div",{className:"info-value",children:(e==null?void 0:e.username)||(e==null?void 0:e.display_name)})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:"Email"}),c.jsx("div",{className:"info-value",children:e==null?void 0:e.email})]})]})]}),c.jsxs("div",{className:"account-section avatar-section",children:[c.jsx("h2",{children:"Custom Avatar"}),h?c.jsx(ax,{currentStyle:e==null?void 0:e.avatar_style,currentSeed:e==null?void 0:e.avatar_seed,currentOptions:(e==null?void 0:e.avatar_options)||{},username:(e==null?void 0:e.username)||(e==null?void 0:e.display_name),onSave:y,onCancel:()=>f(!1),loading:u,isPremium:o,userRole:e==null?void 0:e.role,userLevel:(e==null?void 0:e.level)||1}):c.jsxs("div",{className:"current-avatar",children:[c.jsx("div",{className:"avatar-display",children:e!=null&&e.avatar_style?c.jsx(Wh,{avatarStyle:e.avatar_style,avatarSeed:e.avatar_seed,avatarOptions:e.avatar_options,name:e.username||e.display_name,size:120,isPremium:!0,className:"avatar-large"}):c.jsx("div",{className:"avatar-placeholder",children:c.jsx("span",{children:((e==null?void 0:e.username)||(e==null?void 0:e.display_name)||"?").charAt(0).toUpperCase()})})}),c.jsx("button",{onClick:()=>f(!0),className:"btn btn-secondary",children:e!=null&&e.avatar_style?"Change Avatar":"Create Avatar"})]})]}),c.jsxs("div",{className:"account-section subscription-section",children:[c.jsx("h2",{children:"Subscription Status"}),c.jsxs("div",{className:"status-card",children:[c.jsxs("div",{className:"status-header",children:[c.jsx("div",{className:"status-icon",children:(e==null?void 0:e.role)==="admin"?"":g?"":m?"":""}),c.jsx("div",{className:"status-info",children:c.jsx("h3",{children:(e==null?void 0:e.role)==="admin"?"Administrator":g?"Lifetime Premium":m?"Monthly Premium":"Free Plan"})})]}),c.jsx("div",{className:"subscription-actions",children:o?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:S,className:"btn btn-secondary",disabled:a,children:a?"Loading...":"Manage Subscription"}),m&&!v&&c.jsx("button",{onClick:x,className:"btn btn-danger",disabled:a,children:a?"Processing...":"Cancel Subscription"})]}):c.jsx("button",{onClick:()=>t("/premium"),className:"btn btn-primary",children:"Upgrade to Premium"})})]})]}),c.jsxs("div",{className:"account-section help-section",children:[c.jsx("h2",{children:"Need Help?"}),c.jsx("button",{onClick:()=>window.location.href="mailto:support@gamebuddies.io",className:"btn btn-outline",children:"Contact Support"})]})]})})};const OA=()=>{Ot();const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(""),[o,a]=w.useState(""),[l,u]=w.useState(""),[d,h]=w.useState(""),[f,g]=w.useState(.2),[m,v]=w.useState(""),[S,x]=w.useState(""),y=async()=>{try{const _=await Be();if(!_)return;const{data:{session:b}}=await _.auth.getSession(),C=await(await fetch("/api/admin/affiliates",{headers:{Authorization:`Bearer ${b==null?void 0:b.access_token}`}})).json();C.success&&e(C.affiliates)}catch(_){console.error("Error fetching affiliates:",_)}finally{r(!1)}};w.useEffect(()=>{y()},[]);const p=async _=>{_.preventDefault(),v(""),x("");try{const b=await Be();if(!b)return;const{data:{session:k}}=await b.auth.getSession(),E=await(await fetch("/api/admin/affiliates",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k==null?void 0:k.access_token}`},body:JSON.stringify({code:s,commissionRate:f,name:o,email:l,notes:d})})).json();E.success?(x(`Affiliate ${E.affiliate.code} created!`),i(""),a(""),u(""),h(""),y()):v(E.error)}catch(b){v(b.message)}};return n?c.jsx("div",{className:"admin-page",children:"Loading..."}):c.jsxs("div",{className:"admin-page",children:[c.jsx("h1",{children:"Admin: Affiliate Management"}),m&&c.jsx("div",{className:"error-msg",children:m}),S&&c.jsx("div",{className:"success-msg",children:S}),c.jsxs("div",{className:"add-affiliate-section",children:[c.jsx("h2",{children:"Add New Affiliate"}),c.jsxs("form",{onSubmit:p,children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Name (Optional):"}),c.jsx("input",{type:"text",value:o,onChange:_=>a(_.target.value),placeholder:"Streamer Name"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email (Optional):"}),c.jsx("input",{type:"email",value:l,onChange:_=>u(_.target.value),placeholder:"email@example.com"})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Referral Code:"}),c.jsx("input",{type:"text",value:s,onChange:_=>i(_.target.value.toUpperCase()),placeholder:"STREAMER123",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Commission Rate (0.0 - 1.0):"}),c.jsx("input",{type:"number",step:"0.01",value:f,onChange:_=>g(parseFloat(_.target.value)),required:!0})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Notes (Internal):"}),c.jsx("textarea",{value:d,onChange:_=>h(_.target.value),placeholder:"Payment details, contacts, etc.",rows:3,className:"notes-input"})]}),c.jsx("button",{type:"submit",children:"Create Affiliate"})]})]}),c.jsxs("div",{className:"affiliates-list",children:[c.jsx("h2",{children:"Existing Affiliates"}),c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Name"}),c.jsx("th",{children:"Code"}),c.jsx("th",{children:"Rate"}),c.jsx("th",{children:"Total Earnings"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Created At"})]})}),c.jsx("tbody",{children:t.map(_=>c.jsxs("tr",{children:[c.jsx("td",{children:_.name||"-"}),c.jsx("td",{className:"code-cell",children:_.code}),c.jsxs("td",{children:[(_.commission_rate*100).toFixed(0),"%"]}),c.jsxs("td",{children:["",_.total_earnings||0]}),c.jsx("td",{children:_.status}),c.jsx("td",{children:new Date(_.created_at).toLocaleDateString()})]},_.id))})]})]})]})};const LA=()=>{const[t,e]=w.useState(null),[n,r]=w.useState([]),[s,i]=w.useState(null),[o,a]=w.useState(!0),[l,u]=w.useState(!1),d=w.useCallback(async(v=!1)=>{v&&u(!0);try{const S=await Be();if(!S)return;const{data:{session:x}}=await S.auth.getSession(),y={Authorization:`Bearer ${x==null?void 0:x.access_token}`},[p,_,b]=await Promise.all([fetch("/api/admin/dashboard-stats",{headers:y}),fetch("/api/admin/live-rooms",{headers:y}),fetch("/api/admin/online-stats",{headers:y})]),[k,C,E]=await Promise.all([p.json(),_.json(),b.json()]);k.success&&e(k),C.success&&r(C.rooms||[]),E.success&&i(E.stats)}catch(S){console.error(S)}finally{a(!1),u(!1)}},[]);w.useEffect(()=>{d()},[d]);const h=()=>{d(!0)};if(o)return c.jsx("div",{className:"admin-page",children:"Loading Dashboard..."});if(!t)return c.jsx("div",{className:"admin-page",children:"Failed to load stats"});const{metrics:f,recentUsers:g,gameStats:m}=t;return c.jsxs("div",{className:"admin-page",children:[c.jsxs("div",{className:"admin-header",children:[c.jsx("h1",{children:"Admin Dashboard"}),c.jsx("button",{className:"refresh-btn",onClick:h,disabled:l,children:l?" Refreshing...":" Refresh"})]}),c.jsxs("div",{className:"metrics-grid",children:[c.jsxs("div",{className:"metric-card",children:[c.jsx("h3",{children:"Registered Users"}),c.jsx("div",{className:"value",children:f.registeredUsers})]}),c.jsxs("div",{className:"metric-card highlight",children:[c.jsx("h3",{children:"Premium Members"}),c.jsx("div",{className:"value",children:f.premiumUsers})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("h3",{children:"Active Rooms"}),c.jsx("div",{className:"value",children:f.activeRooms})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("h3",{children:"Total Games Played"}),c.jsx("div",{className:"value",children:f.totalSessions})]}),s&&c.jsxs("div",{className:"metric-card online",children:[c.jsx("h3",{children:"Online Now"}),c.jsx("div",{className:"value",children:s.totalConnections||0})]})]}),c.jsxs("div",{className:"dashboard-content",children:[c.jsxs("div",{className:"panel wide",children:[c.jsxs("h2",{children:["Live Rooms (",n.length,")"]}),n.length>0?c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Room Code"}),c.jsx("th",{children:"Host"}),c.jsx("th",{children:"Game"}),c.jsx("th",{children:"Players"}),c.jsx("th",{children:"Status"})]})}),c.jsx("tbody",{children:n.map(v=>c.jsxs("tr",{children:[c.jsx("td",{children:c.jsx("code",{className:"room-code",children:v.roomCode})}),c.jsx("td",{children:v.hostName}),c.jsx("td",{children:v.currentGame}),c.jsxs("td",{children:[v.playerCount,"/",v.maxPlayers]}),c.jsx("td",{children:c.jsx("span",{className:`status-badge ${v.status}`,children:v.status})})]},v.roomCode))})]}):c.jsx("div",{className:"empty",children:"No active rooms right now"})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h2",{children:"Newest Members"}),c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"User"}),c.jsx("th",{children:"Tier"}),c.jsx("th",{children:"Joined"})]})}),c.jsx("tbody",{children:g.map(v=>c.jsxs("tr",{children:[c.jsx("td",{children:v.username}),c.jsx("td",{children:c.jsx("span",{className:`tier-badge ${v.premium_tier}`,children:v.premium_tier})}),c.jsx("td",{children:new Date(v.created_at).toLocaleDateString()})]},v.id))})]})]}),c.jsxs("div",{className:"panel",children:[c.jsx("h2",{children:"Popular Games"}),c.jsx("div",{className:"game-stats-list",children:Object.entries(m).sort(([,v],[,S])=>S-v).map(([v,S])=>c.jsxs("div",{className:"stat-row",children:[c.jsx("span",{className:"stat-label",children:v}),c.jsx("span",{className:"stat-value",children:S})]},v))})]})]})]})},ig=({children:t})=>{const{user:e,isAuthenticated:n,loading:r}=Ot();return r?c.jsx("div",{style:{padding:"100px",color:"white"},children:"Loading auth..."}):!n||(e==null?void 0:e.role)!=="admin"?c.jsx(Fb,{to:"/",replace:!0}):c.jsx(c.Fragment,{children:t})},IA=()=>{var u;const[t,e]=w.useState(!1),[n,r]=w.useState({}),[s,i]=w.useState("");if(w.useEffect(()=>{const d=()=>{r({timestamp:new Date().toISOString(),url:window.location.href,pathname:window.location.pathname,search:window.location.search,sessionStorage:{roomCode:sessionStorage.getItem("gamebuddies_roomCode"),playerName:sessionStorage.getItem("gamebuddies_playerName"),isHost:sessionStorage.getItem("gamebuddies_isHost"),gameType:sessionStorage.getItem("gamebuddies_gameType"),returnUrl:sessionStorage.getItem("gamebuddies_returnUrl")},environment:{hostname:window.location.hostname,origin:window.location.origin,userAgent:navigator.userAgent.substring(0,100)+"...",serverUrl:{}.REACT_APP_SERVER_URL}})};d();const h=setInterval(d,5e3);return()=>clearInterval(h)},[]),w.useEffect(()=>{const d=g=>{const m=g.target;if(m.tagName==="INPUT"||m.tagName==="TEXTAREA")return;const v=(s+g.key.toLowerCase()).slice(-5);i(v),console.log(" [DEBUG PANEL] Key sequence:",v),v==="debug"&&(console.log(" [DEBUG PANEL] Debug sequence detected! Showing panel."),e(!0),i(""))},h=()=>{i("")};let f;return s.length>0&&(f=setTimeout(h,2e3)),document.addEventListener("keypress",d),()=>{document.removeEventListener("keypress",d),f&&clearTimeout(f)}},[s]),!(window.location.search.includes("debug=true")||window.location.search.includes("debug=1")||t))return null;const a={position:"fixed",top:"10px",right:"10px",zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.9)",color:"#00ff00",padding:"10px",borderRadius:"5px",fontSize:"12px",fontFamily:"monospace",maxWidth:"400px",maxHeight:"500px",overflow:"auto",border:"1px solid #333"},l={position:"fixed",top:"10px",right:"10px",zIndex:1e4,backgroundColor:"#333",color:"#fff",padding:"5px 10px",borderRadius:"3px",cursor:"pointer",fontSize:"12px",border:"none"};return t?c.jsxs("div",{style:a,children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[c.jsx("strong",{children:" GameBuddies Debug Panel"}),c.jsx("button",{onClick:()=>e(!1),style:{background:"none",border:"none",color:"#fff",cursor:"pointer"},children:""})]}),c.jsx("div",{style:{marginBottom:"10px",fontSize:"10px",color:"#888"},children:' Tip: Type "debug" anywhere to show this panel'}),c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Current State:"}),c.jsx("pre",{style:{margin:"5px 0",fontSize:"10px",whiteSpace:"pre-wrap"},children:JSON.stringify(n,null,2)})]}),c.jsxs("div",{style:{marginBottom:"10px"},children:[c.jsx("strong",{children:"Quick Actions:"}),c.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"5px",flexWrap:"wrap"},children:[c.jsx("button",{onClick:()=>{console.log(" [DEBUG] Current system state:",n),console.log(" [DEBUG] Full session storage:",{...Object.keys(sessionStorage).reduce((d,h)=>(d[h]=sessionStorage.getItem(h),d),{})})},style:{fontSize:"10px",padding:"2px 5px",background:"#444",color:"#fff",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Log State"}),c.jsx("button",{onClick:()=>{Object.keys(sessionStorage).forEach(d=>{d.startsWith("gamebuddies_")&&sessionStorage.removeItem(d)}),console.log(" [DEBUG] Cleared GameBuddies session storage")},style:{fontSize:"10px",padding:"2px 5px",background:"#600",color:"#fff",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Clear Session"}),c.jsx("button",{onClick:()=>{const d=new URL(window.location.href);d.searchParams.set("debug","true"),window.history.replaceState({},"",d.toString()),console.log(" [DEBUG] Added debug=true to URL")},style:{fontSize:"10px",padding:"2px 5px",background:"#006",color:"#fff",border:"none",borderRadius:"2px",cursor:"pointer"},children:"Persist Debug"})]})]}),((u=n.sessionStorage)==null?void 0:u.roomCode)&&c.jsxs("div",{style:{padding:"5px",backgroundColor:"rgba(0, 255, 0, 0.1)",borderRadius:"3px"},children:[c.jsx("strong",{children:" Active GameBuddies Session"}),c.jsx("br",{}),"Room: ",n.sessionStorage.roomCode,c.jsx("br",{}),"Player: ",n.sessionStorage.playerName,c.jsx("br",{}),"Host: ",n.sessionStorage.isHost]}),s.length>0&&c.jsxs("div",{style:{padding:"5px",backgroundColor:"rgba(255, 255, 0, 0.1)",borderRadius:"3px",marginTop:"5px",fontSize:"10px"},children:['Key sequence: "',s,'"']})]}):c.jsx("button",{style:l,onClick:()=>e(!0),title:"Show GameBuddies Debug Panel (or type 'debug')",children:" DEBUG"})};const og=({friend:t,isOnline:e,onInvite:n,isCurrentlyInLobby:r})=>c.jsxs("div",{className:"friend-item",children:[c.jsxs("div",{className:"avatar-wrapper",children:[c.jsx("img",{src:t.avatar_url||"/avatars/free/Gabu.png",alt:t.username}),c.jsx("span",{className:`status-dot ${e?"online":"offline"}`})]}),c.jsxs("div",{className:"info",children:[c.jsx("span",{className:"username",children:t.username}),c.jsxs("span",{className:"level",children:["Lvl ",t.level||1]})]}),c.jsx("div",{className:"actions",children:e&&r&&c.jsx("button",{className:"invite-btn",onClick:n,children:"Invite"})})]}),DA=()=>{const{friends:t,pendingRequests:e,onlineFriends:n,sendFriendRequest:r,acceptFriendRequest:s,rejectFriendRequest:i,inviteFriend:o,isCurrentlyInLobby:a,currentRoomCode:l,currentLobbyGameName:u,currentLobbyThumbnail:d}=fl(),[h,f]=w.useState(!1),[g,m]=w.useState("online"),[v,S]=w.useState(""),[x,y]=w.useState(""),[p,_]=w.useState(null),b=async E=>{E.preventDefault();const O=await r(x);_(O),O.success&&y("")},k=t.filter(E=>n.has(E.id)),C=t.filter(E=>{var O;return E.username.toLowerCase().includes(v.toLowerCase())||((O=E.display_name)==null?void 0:O.toLowerCase().includes(v.toLowerCase()))});return h?c.jsxs("div",{className:"friend-list-container",children:[c.jsxs("div",{className:"friend-list-header",children:[c.jsx("h3",{children:"Friends"}),c.jsx("button",{className:"close-btn",onClick:()=>f(!1),children:""})]}),c.jsxs("div",{className:"friend-tabs",children:[c.jsxs("button",{className:g==="online"?"active":"",onClick:()=>m("online"),children:["Online (",k.length,")"]}),c.jsx("button",{className:g==="all"?"active":"",onClick:()=>m("all"),children:"All"}),c.jsxs("button",{className:g==="pending"?"active":"",onClick:()=>m("pending"),children:["Pending ",e.length>0&&`(${e.length})`]}),c.jsx("button",{className:g==="add"?"active":"",onClick:()=>m("add"),children:"Add"})]}),c.jsxs("div",{className:"friend-list-content",children:[g==="online"&&c.jsx("div",{className:"list online-list",children:k.length===0?c.jsx("p",{className:"empty",children:"No friends online"}):k.map(E=>c.jsx(og,{friend:E,isOnline:!0,onInvite:()=>o(E.id,l,u,d),isCurrentlyInLobby:a},E.friendshipId||E.id))}),g==="all"&&c.jsxs("div",{className:"list all-list",children:[c.jsx("input",{type:"text",placeholder:"Search friends...",value:v,onChange:E=>S(E.target.value),className:"friend-search"}),C.map(E=>c.jsx(og,{friend:E,isOnline:n.has(E.id),onInvite:()=>o(E.id,l,u,d),isCurrentlyInLobby:a},E.friendshipId||E.id))]}),g==="pending"&&c.jsxs("div",{className:"list pending-list",children:[e.map(E=>{var O;return c.jsxs("div",{className:"pending-item",children:[c.jsxs("div",{className:"info",children:[c.jsx("span",{className:"username",children:((O=E.user)==null?void 0:O.username)||E.from_username||"Unknown"}),c.jsx("span",{className:"type",children:E.type==="sent"?"Sent":"Received"})]}),c.jsxs("div",{className:"actions",children:[E.type!=="sent"&&c.jsx("button",{className:"accept-btn",onClick:()=>s(E.id),children:""}),c.jsx("button",{className:"reject-btn",onClick:()=>i(E.id),children:""})]})]},E.id)}),e.length===0&&c.jsx("p",{className:"empty",children:"No pending requests"})]}),g==="add"&&c.jsxs("div",{className:"add-friend-section",children:[c.jsxs("form",{onSubmit:b,children:[c.jsx("input",{type:"text",placeholder:"Enter username...",value:x,onChange:E=>y(E.target.value),required:!0}),c.jsx("button",{type:"submit",children:"Send Request"})]}),p&&c.jsx("p",{className:`message ${p.success?"success":"error"}`,children:p.message||p.error})]})]})]}):c.jsxs("div",{className:"friend-list-toggle",onClick:()=>f(!0),children:[c.jsx("span",{className:"icon",children:""}),k.length>0&&c.jsx("span",{className:"badge",children:k.length}),e.length>0&&c.jsx("span",{className:"badge pending",children:e.length})]})};const UA=()=>{const{gameInvites:t,dismissInvite:e}=fl(),n=Ze();if(t.length===0)return null;const r=s=>{n(`/lobby/${s.roomId}`),e(s.id)};return c.jsx("div",{className:"game-invite-container",children:t.map(s=>c.jsxs("div",{className:"game-invite-toast",children:[c.jsxs("div",{className:"invite-content",children:[c.jsxs("div",{className:"invite-header",children:[c.jsx("span",{className:"invite-icon",children:""}),c.jsx("span",{className:"invite-title",children:"Game Invite"})]}),c.jsxs("div",{className:"invite-body",children:[c.jsxs("p",{className:"invite-message",children:[c.jsx("span",{className:"host-name",children:s.hostName})," wants you to play"]}),c.jsxs("div",{className:"game-info-row",children:[s.gameThumbnail&&c.jsx("img",{src:s.gameThumbnail,alt:s.gameName,className:"game-thumbnail"}),c.jsx("p",{className:"game-name-display",children:s.gameName})]})]})]}),c.jsxs("div",{className:"invite-actions",children:[c.jsx("button",{className:"decline-btn",onClick:()=>e(s.id),children:"Decline"}),c.jsx("button",{className:"accept-btn",onClick:()=>r(s),children:"Join"})]})]},s.id))})};function FA(){const[t,e]=w.useState(!1),[n,r]=w.useState(null),s=Ze();console.log(" [APP DEBUG] App component rendering:",{timestamp:new Date().toISOString(),location:window.location.href,isInLobby:t});const i=w.useCallback(()=>{t&&n?(n(),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},100)):(s("/",{replace:!0}),window.scrollTo({top:0,behavior:"smooth"}))},[t,n,s]),o=w.useCallback(()=>{if(t&&n)n(),setTimeout(()=>{const a=document.getElementById("games-section");a&&a.scrollIntoView({behavior:"smooth"})},100);else{const a=document.getElementById("games-section");a&&a.scrollIntoView({behavior:"smooth"})}},[t,n]);return c.jsxs("div",{className:"App",children:[c.jsx(ON,{onNavigateHome:i,onNavigateGames:o,isInLobby:t}),c.jsx(mE,{}),c.jsx(IA,{}),c.jsx(DA,{}),c.jsx(UA,{}),c.jsxs($b,{children:[c.jsx(Ie,{path:"/",element:c.jsx(Tc,{setIsInLobby:e,setLobbyLeaveFn:r})}),c.jsx(Ie,{path:"/lobby/:roomCode",element:c.jsx(Tc,{setIsInLobby:e,setLobbyLeaveFn:r})}),c.jsx(Ie,{path:"/login",element:c.jsx(EA,{})}),c.jsx(Ie,{path:"/auth/callback",element:c.jsx(CA,{})}),c.jsx(Ie,{path:"/password-reset",element:c.jsx(PA,{})}),c.jsx(Ie,{path:"/premium",element:c.jsx(TA,{})}),c.jsx(Ie,{path:"/account",element:c.jsx(AA,{})}),c.jsx(Ie,{path:"/admin/affiliates",element:c.jsx(ig,{children:c.jsx(OA,{})})}),c.jsx(Ie,{path:"/admin/dashboard",element:c.jsx(ig,{children:c.jsx(LA,{})})}),c.jsx(Ie,{path:"/payment/success",element:c.jsx(NA,{})}),c.jsx(Ie,{path:"/payment/cancel",element:c.jsx(RA,{})}),c.jsx(Ie,{path:"/legal",element:c.jsx(Ks,{})}),c.jsx(Ie,{path:"/impressum",element:c.jsx(Ks,{})}),c.jsx(Ie,{path:"/privacy",element:c.jsx(Ks,{})}),c.jsx(Ie,{path:"/datenschutz",element:c.jsx(Ks,{})}),c.jsx(Ie,{path:"/terms",element:c.jsx(Ks,{})}),c.jsx(Ie,{path:"/*",element:c.jsx(Tc,{setIsInLobby:e,setLobbyLeaveFn:r})})]}),c.jsx(LN,{})]})}function BA(){return c.jsx(Zb,{children:c.jsx(Kb,{children:c.jsx(fE,{children:c.jsx(Gk,{children:c.jsx(Kk,{children:c.jsx(pE,{children:c.jsx(FA,{})})})})})})})}const lx=document.getElementById("root");if(!lx)throw new Error("Failed to find root element");const $A=Nc.createRoot(lx);$A.render(c.jsx(BA,{}));

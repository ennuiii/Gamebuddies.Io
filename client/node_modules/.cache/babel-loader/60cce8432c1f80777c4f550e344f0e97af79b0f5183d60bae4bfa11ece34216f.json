{"ast":null,"code":"import{createClient}from'@supabase/supabase-js';// Function to get Supabase config from server\nconst getSupabaseConfig=async()=>{try{const response=await fetch('/api/supabase-config');if(!response.ok){throw new Error('Failed to fetch Supabase config');}return await response.json();}catch(error){console.error('❌ Failed to get Supabase config from server:',error);return null;}};// Initialize Supabase client\nlet supabaseClient=null;let initializationPromise=null;const initializeSupabase=async()=>{if(supabaseClient)return supabaseClient;// Prevent multiple simultaneous initialization attempts\nif(initializationPromise){return initializationPromise;}initializationPromise=(async()=>{try{const config=await getSupabaseConfig();if(!config||!config.url||!config.anonKey){console.error('❌ Cannot initialize Supabase client - invalid config:',config);return null;}supabaseClient=createClient(config.url,config.anonKey,{realtime:{params:{eventsPerSecond:10}}});console.log('✅ Supabase client initialized for frontend');return supabaseClient;}catch(error){console.error('❌ Error initializing Supabase client:',error);return null;}})();return initializationPromise;};// Export a promise that resolves to the initialized client\nexport const getSupabaseClient=async()=>{if(!supabaseClient){await initializeSupabase();}return supabaseClient;};// Export null initially - client must use getSupabaseClient() for async initialization\nexport const supabase=null;export default null;","map":{"version":3,"names":["createClient","getSupabaseConfig","response","fetch","ok","Error","json","error","console","supabaseClient","initializationPromise","initializeSupabase","config","url","anonKey","realtime","params","eventsPerSecond","log","getSupabaseClient","supabase"],"sources":["C:/Gamebuddies2/gamebuddies/Gamebuddies.Io/client/src/utils/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Function to get Supabase config from server\r\nconst getSupabaseConfig = async () => {\r\n  try {\r\n    const response = await fetch('/api/supabase-config');\r\n    if (!response.ok) {\r\n      throw new Error('Failed to fetch Supabase config');\r\n    }\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('❌ Failed to get Supabase config from server:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Initialize Supabase client\r\nlet supabaseClient = null;\r\nlet initializationPromise = null;\r\n\r\nconst initializeSupabase = async () => {\r\n  if (supabaseClient) return supabaseClient;\r\n\r\n  // Prevent multiple simultaneous initialization attempts\r\n  if (initializationPromise) {\r\n    return initializationPromise;\r\n  }\r\n\r\n  initializationPromise = (async () => {\r\n    try {\r\n      const config = await getSupabaseConfig();\r\n      if (!config || !config.url || !config.anonKey) {\r\n        console.error('❌ Cannot initialize Supabase client - invalid config:', config);\r\n        return null;\r\n      }\r\n\r\n      supabaseClient = createClient(config.url, config.anonKey, {\r\n        realtime: {\r\n          params: {\r\n            eventsPerSecond: 10\r\n          }\r\n        }\r\n      });\r\n\r\n      console.log('✅ Supabase client initialized for frontend');\r\n      return supabaseClient;\r\n    } catch (error) {\r\n      console.error('❌ Error initializing Supabase client:', error);\r\n      return null;\r\n    }\r\n  })();\r\n\r\n  return initializationPromise;\r\n};\r\n\r\n// Export a promise that resolves to the initialized client\r\nexport const getSupabaseClient = async () => {\r\n  if (!supabaseClient) {\r\n    await initializeSupabase();\r\n  }\r\n  return supabaseClient;\r\n};\r\n\r\n// Export null initially - client must use getSupabaseClient() for async initialization\r\nexport const supabase = null;\r\nexport default null; "],"mappings":"AAAA,OAASA,YAAY,KAAQ,uBAAuB,CAEpD;AACA,KAAM,CAAAC,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,sBAAsB,CAAC,CACpD,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,iCAAiC,CAAC,CACpD,CACA,MAAO,MAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAC9B,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8CAA8C,CAAEA,KAAK,CAAC,CACpE,MAAO,KAAI,CACb,CACF,CAAC,CAED;AACA,GAAI,CAAAE,cAAc,CAAG,IAAI,CACzB,GAAI,CAAAC,qBAAqB,CAAG,IAAI,CAEhC,KAAM,CAAAC,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIF,cAAc,CAAE,MAAO,CAAAA,cAAc,CAEzC;AACA,GAAIC,qBAAqB,CAAE,CACzB,MAAO,CAAAA,qBAAqB,CAC9B,CAEAA,qBAAqB,CAAG,CAAC,SAAY,CACnC,GAAI,CACF,KAAM,CAAAE,MAAM,CAAG,KAAM,CAAAX,iBAAiB,CAAC,CAAC,CACxC,GAAI,CAACW,MAAM,EAAI,CAACA,MAAM,CAACC,GAAG,EAAI,CAACD,MAAM,CAACE,OAAO,CAAE,CAC7CN,OAAO,CAACD,KAAK,CAAC,uDAAuD,CAAEK,MAAM,CAAC,CAC9E,MAAO,KAAI,CACb,CAEAH,cAAc,CAAGT,YAAY,CAACY,MAAM,CAACC,GAAG,CAAED,MAAM,CAACE,OAAO,CAAE,CACxDC,QAAQ,CAAE,CACRC,MAAM,CAAE,CACNC,eAAe,CAAE,EACnB,CACF,CACF,CAAC,CAAC,CAEFT,OAAO,CAACU,GAAG,CAAC,4CAA4C,CAAC,CACzD,MAAO,CAAAT,cAAc,CACvB,CAAE,MAAOF,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CAC7D,MAAO,KAAI,CACb,CACF,CAAC,EAAE,CAAC,CAEJ,MAAO,CAAAG,qBAAqB,CAC9B,CAAC,CAED;AACA,MAAO,MAAM,CAAAS,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAC3C,GAAI,CAACV,cAAc,CAAE,CACnB,KAAM,CAAAE,kBAAkB,CAAC,CAAC,CAC5B,CACA,MAAO,CAAAF,cAAc,CACvB,CAAC,CAED;AACA,MAAO,MAAM,CAAAW,QAAQ,CAAG,IAAI,CAC5B,cAAe,KAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}